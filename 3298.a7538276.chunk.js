/*! For license information please see 3298.a7538276.chunk.js.LICENSE.txt */
(self.webpackChunk_genially_view_client=self.webpackChunk_genially_view_client||[]).push([[3298],{31446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 2===e.length?r(e[0],e[1])||null:e.slice(1).reduce((function(e,t){return r(e,t)}),e[0])||null};var n=new WeakMap;function r(e,t){if(e&&t){var r=n.get(e)||new WeakMap;n.set(e,r);var s=r.get(t)||function(n){o(e,n),o(t,n)};return r.set(t,s),s}return e||t}function o(e,t){"function"===typeof e?e(t):e.current=t}},69561:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=Array.isArray;function o(e){var t,n,s=typeof e,i="";if("string"===s||"number"===s)return e||"";if(r(e)&&e.length>0)for(t=0,n=e.length;t<n;t++)""!==(s=o(e[t]))&&(i+=(i&&" ")+s);else for(t in e)e.hasOwnProperty(t)&&e[t]&&(i+=(i&&" ")+t);return i}},31601:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function o(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function i(e,t){try{return t in e}catch(n){return!1}}function a(e,t,n){var o={};return n.isMergeableObject(e)&&s(e).forEach((function(t){o[t]=r(e[t],n)})),s(t).forEach((function(s){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(i(e,s)&&n.isMergeableObject(t[s])?o[s]=function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"===typeof n?n:l}(s,n)(e[s],t[s],n):o[s]=r(t[s],n))})),o}function l(e,n,s){(s=s||{}).arrayMerge=s.arrayMerge||o,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var i=Array.isArray(n);return i===Array.isArray(e)?i?s.arrayMerge(e,n,s):a(e,n,s):r(n,s)}l.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return l(e,n,t)}),{})};var c=l;e.exports=c},8999:e=>{"use strict";e.exports=e=>{if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},28894:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!==o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!==o--;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;0!==o--;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}},26731:(e,t,n)=>{"use strict";var r=n(39771);e.exports=function(e){return r(e)||"function"===typeof e||Array.isArray(e)}},58428:(e,t,n)=>{"use strict";var r=n(46312);e.exports=Number.isFinite||function(e){return!("number"!==typeof e||r(e)||e===1/0||e===-1/0)}},90631:(e,t,n)=>{var r=n(13001);e.exports=Number.isInteger||function(e){return"number"===typeof e&&r(e)&&Math.floor(e)===e}},13001:e=>{"use strict";e.exports=Number.isFinite||function(e){return!("number"!==typeof e||e!==e||e===1/0||e===-1/0)}},39771:(e,t,n)=>{"use strict";var r=n(53543);function o(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==o(e)&&("function"===typeof(t=e.constructor)&&(!1!==o(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},53543:e=>{"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},97021:(e,t)=>{"use strict";var n="undefined"!==typeof Reflect?Reflect.construct:void 0,r=Object.defineProperty,o=Error.captureStackTrace;function s(e){void 0!==e&&r(this,"message",{configurable:!0,value:e,writable:!0});var t=this.constructor.name;void 0!==t&&t!==this.name&&r(this,"name",{configurable:!0,value:t,writable:!0}),o(this,this.constructor)}void 0===o&&(o=function(e){var t=new Error;r(e,"stack",{configurable:!0,get:function(){var e=t.stack;return r(this,"stack",{configurable:!0,value:e,writable:!0}),e},set:function(t){r(e,"stack",{configurable:!0,value:t,writable:!0})}})}),s.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:s,writable:!0}});var i=function(){function e(e,t){return r(e,"name",{configurable:!0,value:t})}try{var t=function(){};if(e(t,"foo"),"foo"===t.name)return e}catch(n){}}();(e.exports=function(e,t){if(null==t||t===Error)t=s;else if("function"!==typeof t)throw new TypeError("super_ should be a function");var r;if("string"===typeof e)r=e,e=void 0!==n?function(){return n(t,arguments,this.constructor)}:function(){t.apply(this,arguments)},void 0!==i&&(i(e,r),r=void 0);else if("function"!==typeof e)throw new TypeError("constructor should be either a string or a function");e.super_=e.super=t;var o={constructor:{configurable:!0,value:e,writable:!0}};return void 0!==r&&(o.name={configurable:!0,value:r,writable:!0}),e.prototype=Object.create(t.prototype,o),e}).BaseError=s},46312:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!==e}},82502:(e,t,n)=>{"use strict";var r=n(26731);e.exports=function(e,t,n){if(!r(e))return{};"function"===typeof t&&(n=t,t=[]),"string"===typeof t&&(t=[t]);for(var o="function"===typeof n,s=Object.keys(e),i={},a=0;a<s.length;a++){var l=s[a],c=e[l];t&&(-1!==t.indexOf(l)||o&&!n(c,l,e))||(i[l]=c)}return i}},52134:(e,t,n)=>{"use strict";var r=n(53543);e.exports=function(e,t){if(!r(e)&&"function"!==typeof e)return{};var n={};if("string"===typeof t)return t in e&&(n[t]=e[t]),n;for(var o=t.length,s=-1;++s<o;){var i=t[s];i in e&&(n[i]=e[i])}return n}},57336:e=>{"use strict";function t(e,t){if("string"!==typeof e)return[e];var n=[e];"string"===typeof t||Array.isArray(t)?t={brackets:t}:t||(t={});var r=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],o=t.escape||"___",s=!!t.flat;r.forEach((function(e){var t=new RegExp(["\\",e[0],"[^\\",e[0],"\\",e[1],"]*\\",e[1]].join("")),r=[];function s(t,s,i){var a=n.push(t.slice(e[0].length,-e[1].length))-1;return r.push(a),o+a+o}n.forEach((function(e,r){for(var o,i=0;e!=o;)if(o=e,e=e.replace(t,s),i++>1e4)throw Error("References have circular dependency. Please, check them.");n[r]=e})),r=r.reverse(),n=n.map((function(t){return r.forEach((function(n){t=t.replace(new RegExp("(\\"+o+n+"\\"+o+")","g"),e[0]+"$1"+e[1])})),t}))}));var i=new RegExp("\\"+o+"([0-9]+)\\"+o);return s?n:function e(t,n,r){for(var o,s=[],a=0;o=i.exec(t);){if(a++>1e4)throw Error("Circular references in parenthesis");s.push(t.slice(0,o.index)),s.push(e(n[o[1]],n)),t=t.slice(o.index+o[0].length)}return s.push(t),s}(n[0],n)}function n(e,t){if(t&&t.flat){var n,r=t&&t.escape||"___",o=e[0];if(!o)return"";for(var s=new RegExp("\\"+r+"([0-9]+)\\"+r),i=0;o!=n;){if(i++>1e4)throw Error("Circular references in "+e);n=o,o=o.replace(s,a)}return o}return e.reduce((function e(t,n){return Array.isArray(n)&&(n=n.reduce(e,"")),t+n}),"");function a(t,n){if(null==e[n])throw Error("Reference "+n+"is undefined");return e[n]}}function r(e,r){return Array.isArray(e)?n(e,r):t(e,r)}r.parse=t,r.stringify=n,e.exports=r},2993:e=>{"use strict";var t=/^(-?\d?\.?\d+)e([\+\-]\d)+/;e.exports=function(e){var n=e.match(t);if(!n)throw new Error("Invalid exponential");return n.slice(1)}},86960:(e,t,n)=>{"use strict";var r=n(58428),o=n(2993);e.exports=function(e){if(!r(e))throw new Error("Value must be a finite number");var t=o(e.toExponential()),n=t[0],s=parseInt(t[1],10),i=(n.split(".")[1]||"").length;return!i&&s>0?0:i+-1*s}},52253:(e,t,n)=>{"use strict";var r=n(58428),o=n(90631);e.exports=function(e,t){if(!r(e))throw new Error("Value must be a finite number");if(!o(t)||t<0)throw new Error("Precision must be a non-negative integer");return parseFloat(e.toFixed(t))}},76964:(e,t,n)=>{"use strict";var r=n(52253),o=n(86960);e.exports=i;var s={down:"floor",up:"ceil"};function i(e,t,n){if(t=t||1,n){if(!s.hasOwnProperty(n))throw new Error("invalid direction");var a=s[n];return r(Math[a](e/t)*t,o(t))}var l=i(e,t,"down"),c=i(e,t,"up");return e-l<c-e?l:c}i.up=function(e,t){return i(e,t,"up")},i.down=function(e,t){return i(e,t,"down")}},14736:(e,t,n)=>{"use strict";n.d(t,{MA:()=>o,OR:()=>h,OW:()=>d,Tc:()=>i,VX:()=>c,Wz:()=>l,_S:()=>r,bC:()=>u,bh:()=>f,s9:()=>p,yE:()=>s});var r="ProseMirror-selectednode",o=(".".concat(r),"\ufffc"),s="\0",i="__state_override__";var a={LastNodeCompatible:"lastNodeCompatible",FormattingMark:"formattingMark",FormattingNode:"formattingNode",NodeCursor:"nodeCursor",FontStyle:"fontStyle",Link:"link",Color:"color",Alignment:"alignment",Indentation:"indentation",Behavior:"behavior",Code:"code",InlineNode:"inline",ListContainerNode:"listContainer",ListItemNode:"listItemNode",Block:"block",BlockNode:"block",TextBlock:"textBlock",ExcludeInputRules:"excludeFromInputRules",PreventExits:"preventsExits",Media:"media"},l=a,c=Symbol.for("__remirror__"),d=(e=>(e.PlainExtension="RemirrorPlainExtension",e.NodeExtension="RemirrorNodeExtension",e.MarkExtension="RemirrorMarkExtension",e.PlainExtensionConstructor="RemirrorPlainExtensionConstructor",e.NodeExtensionConstructor="RemirrorNodeExtensionConstructor",e.MarkExtensionConstructor="RemirrorMarkExtensionConstructor",e.Manager="RemirrorManager",e.Preset="RemirrorPreset",e.PresetConstructor="RemirrorPresetConstructor",e))(d||{}),h=(e=>(e[e.Critical=1e6]="Critical",e[e.Highest=1e5]="Highest",e[e.High=1e4]="High",e[e.Medium=1e3]="Medium",e[e.Default=100]="Default",e[e.Low=10]="Low",e[e.Lowest=0]="Lowest",e))(h||{}),u=(e=>(e[e.None=0]="None",e[e.Create=1]="Create",e[e.EditorView=2]="EditorView",e[e.Runtime=3]="Runtime",e[e.Destroy=4]="Destroy",e))(u||{}),p=(e=>(e.Undo="_|undo|_",e.Redo="_|redo|_",e.Bold="_|bold|_",e.Italic="_|italic|_",e.Underline="_|underline|_",e.Strike="_|strike|_",e.Code="_|code|_",e.Paragraph="_|paragraph|_",e.H1="_|h1|_",e.H2="_|h2|_",e.H3="_|h3|_",e.H4="_|h4|_",e.H5="_|h5|_",e.H6="_|h6|_",e.TaskList="_|task|_",e.BulletList="_|bullet|_",e.OrderedList="_|number|_",e.Quote="_|quote|_",e.Divider="_|divider|_",e.Codeblock="_|codeblock|_",e.ClearFormatting="_|clear|_",e.Superscript="_|sup|_",e.Subscript="_|sub|_",e.LeftAlignment="_|left-align|_",e.CenterAlignment="_|center-align|_",e.RightAlignment="_|right-align|_",e.JustifyAlignment="_|justify-align|_",e.InsertLink="_|link|_",e.Find="_|find|_",e.FindBackwards="_|find-backwards|_",e.FindReplace="_|find-replace|_",e.AddFootnote="_|footnote|_",e.AddComment="_|comment|_",e.ContextMenu="_|context-menu|_",e.IncreaseFontSize="_|inc-font-size|_",e.DecreaseFontSize="_|dec-font-size|_",e.IncreaseIndent="_|indent|_",e.DecreaseIndent="_|dedent|_",e.Shortcuts="_|shortcuts|_",e.Copy="_|copy|_",e.Cut="_|cut|_",e.Paste="_|paste|_",e.PastePlain="_|paste-plain|_",e.SelectAll="_|select-all|_",e.Format="_|format|_",e))(p||{}),f=(e=>(e.UNKNOWN="RMR0001",e.INVALID_COMMAND_ARGUMENTS="RMR0002",e.CUSTOM="RMR0003",e.CORE_HELPERS="RMR0004",e.MUTATION="RMR0005",e.INTERNAL="RMR0006",e.MISSING_REQUIRED_EXTENSION="RMR0007",e.MANAGER_PHASE_ERROR="RMR0008",e.INVALID_GET_EXTENSION="RMR0010",e.INVALID_MANAGER_ARGUMENTS="RMR0011",e.SCHEMA="RMR0012",e.HELPERS_CALLED_IN_OUTER_SCOPE="RMR0013",e.INVALID_MANAGER_EXTENSION="RMR0014",e.DUPLICATE_COMMAND_NAMES="RMR0016",e.DUPLICATE_HELPER_NAMES="RMR0017",e.NON_CHAINABLE_COMMAND="RMR0018",e.INVALID_EXTENSION="RMR0019",e.INVALID_CONTENT="RMR0021",e.INVALID_NAME="RMR0050",e.EXTENSION="RMR0100",e.EXTENSION_SPEC="RMR0101",e.EXTENSION_EXTRA_ATTRIBUTES="RMR0102",e.INVALID_SET_EXTENSION_OPTIONS="RMR0103",e.REACT_PROVIDER_CONTEXT="RMR0200",e.REACT_GET_ROOT_PROPS="RMR0201",e.REACT_EDITOR_VIEW="RMR0202",e.REACT_CONTROLLED="RMR0203",e.REACT_NODE_VIEW="RMR0204",e.REACT_GET_CONTEXT="RMR0205",e.REACT_COMPONENTS="RMR0206",e.REACT_HOOKS="RMR0207",e.I18N_CONTEXT="RMR0300",e))(f||{})},69811:(e,t,n)=>{"use strict";n.d(t,{KX:()=>g,vA:()=>v,ZY:()=>y,qE:()=>Q,cx:()=>le,$N:()=>Z,jO:()=>w,Np:()=>H,CN:()=>pe,Y:()=>ae,mK:()=>O,V1:()=>ue,cy:()=>K,Lm:()=>P,VP:()=>$,RI:()=>V,Tn:()=>R,tH:()=>F,EI:()=>W,hX:()=>z,Et:()=>I,Gv:()=>j,Qd:()=>D,gd:()=>B,Kg:()=>A,b0:()=>T,HP:()=>x,HV:()=>ee,lQ:()=>Y,Ik:()=>k,Oy:()=>J,y1:()=>se,di:()=>te,dI:()=>E,jw:()=>X,pD:()=>oe,NF:()=>G,wC:()=>ne,zu:()=>S,ux:()=>ie});var r=n(97021),o=n(14736);function s(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=s(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function i(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=s(e))&&(r&&(r+=" "),r+=t);return r}var a=n(31601),l=(n(28894),n(82502)),c=(n(52134),Object.defineProperty),d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&p(e,n,t[n]);if(d)for(var n of d(t))u.call(t,n)&&p(e,n,t[n]);return e},m=(e,t,n)=>p(e,"symbol"!==typeof t?t+"":t,n);function g(e){return e}function y(e,t,n){const r=e[t];return v(!T(r),n),r}function v(e,t){if(!e)throw new b(t)}var b=class extends r.BaseError{constructor(){super(...arguments),m(this,"name","AssertionError")}};function w(e){return Object.entries(e)}function x(e){return Object.keys(e)}function S(e){return Object.values(e)}function O(e,t,n){return e.includes(t,n)}function k(e){return Object.assign(Object.create(null),e)}function E(e){return Object.prototype.toString.call(e)}function C(e){return E(e).slice(8,-1)}function M(e,t){return n=>typeof n===e&&(!t||t(n))}function N(e){return t=>C(t)===e}var T=M("undefined"),A=M("string"),I=M("number",(e=>!Number.isNaN(e))),R=M("function");function _(e){return null===e}function P(e){return!0===e||!1===e}M("symbol");function D(e){if("Object"!==C(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})}function L(e){return null==e||/^[bns]/.test(typeof e)}function z(e){return _(e)||T(e)}function j(e){return!z(e)&&(R(e)||M("object")(e))}function F(e){return t=>j(t)&&t instanceof e}var B=N("RegExp");N("Date"),N("Error");function V(e){return j(e)&&!function(e){return N("Map")(e)}(e)&&!function(e){return N("Set")(e)}(e)&&0===Object.keys(e).length}var K=Array.isArray;function $(e){return K(e)&&0===e.length}function W(e){return K(e)&&e.length>0}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>!!e;t.lastIndex=0;const r=[],o=t.flags;let s;o.includes("g")||(t=new RegExp(t.source,"g".concat(o)));do{s=t.exec(e),s&&r.push(s)}while(n(s));return t.lastIndex=0,r}function U(){const e=Date.now(),t=U.last||e;return U.last=e>t?e:t+1}function G(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").concat(U().toString(36))}function J(e){return l(e,(e=>!T(e)))}function q(e){if(!D(e))throw new Error("An invalid value was passed into this clone utility. Expected a plain object");return f({},e)}U.last=0;function X(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=t?[...e].reverse():e,r=new Set(n);return t?[...r].reverse():[...r]}function Y(){}function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.all(t,{isMergeableObject:D})}function Q(e){let{min:t,max:n,value:r}=e;return r<t?t:r>n?n:r}function ee(e){return e[e.length-1]}function te(e,t){return[...e].map(((e,t)=>({value:e,index:t}))).sort(((e,n)=>t(e.value,n.value)||e.index-n.index)).map((e=>{let{value:t}=e;return t}))}function ne(e,t){const n=q(t);let r=n;for(const[o,s]of e.entries()){const t=o>=e.length-1;let i=r[s];if(t){if(K(r)){const e=Number.parseInt(s.toString(),10);I(e)&&r.splice(e,1)}else Reflect.deleteProperty(r,s);return n}if(L(i))return n;i=K(i)?[...i]:f({},i),r[s]=i,r=i}return n}function re(e){return t=>function(e,t,n){try{if(A(t)&&t in e)return e[t];K(t)&&(t="['".concat(t.join("']['"),"']"));let r=e;return t.replace(/\[\s*(["'])(.*?)\1\s*]|^\s*(\w+)\s*(?=\.|\[|$)|\.\s*(\w*)\s*(?=\.|\[|$)|\[\s*(-?\d+)\s*]/g,((e,t,n,o,s,i)=>(r=r[n||o||s||i],""))),void 0===r?n:r}catch(r){return n}}(t,e)}function oe(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[],o=new Set,s=R(t)?t:re(t),i=n?[...e].reverse():e;for(const a of i){const e=s(a);o.has(e)||(o.add(e),r.push(a))}return n?r.reverse():r}function se(e,t){const n=K(e)?e[0]:e;return I(t)?n<=t?Array.from({length:t+1-n},((e,t)=>t+n)):Array.from({length:n+1-t},((e,t)=>-1*t+n)):Array.from({length:Math.abs(n)},((e,t)=>(n<0?-1:1)*t))}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=n.filter(I);return e>=Math.min(...o)&&e<=Math.max(...o)}function ae(e){return R(e)?e():e}function le(){return X(i(...arguments).split(" ")).join(" ")}var ce="https://remirror.io/docs/errors",de={[o.bh.UNKNOWN]:"An error occurred but we're not quite sure why. \ud83e\uddd0",[o.bh.INVALID_COMMAND_ARGUMENTS]:"The arguments passed to the command method were invalid.",[o.bh.CUSTOM]:"This is a custom error, possibly thrown by an external library.",[o.bh.CORE_HELPERS]:"An error occurred in a function called from the `@remirror/core-helpers` library.",[o.bh.MUTATION]:"Mutation of immutable value detected.",[o.bh.INTERNAL]:"This is an error which should not occur and is internal to the remirror codebase.",[o.bh.MISSING_REQUIRED_EXTENSION]:"Your editor is missing a required extension.",[o.bh.MANAGER_PHASE_ERROR]:"This occurs when accessing a method or property before it is available.",[o.bh.INVALID_GET_EXTENSION]:"The user requested an invalid extension from the getExtensions method. Please check the `createExtensions` return method is returning an extension with the defined constructor.",[o.bh.INVALID_MANAGER_ARGUMENTS]:"Invalid value(s) passed into `Manager` constructor. Only `Presets` and `Extensions` are supported.",[o.bh.SCHEMA]:"There is a problem with the schema or you are trying to access a node / mark that doesn't exists.",[o.bh.HELPERS_CALLED_IN_OUTER_SCOPE]:"The `helpers` method which is passed into the ``create*` method should only be called within returned method since it relies on an active view (not present in the outer scope).",[o.bh.INVALID_MANAGER_EXTENSION]:"You requested an invalid extension from the manager.",[o.bh.DUPLICATE_COMMAND_NAMES]:"Command method names must be unique within the editor.",[o.bh.DUPLICATE_HELPER_NAMES]:"Helper method names must be unique within the editor.",[o.bh.NON_CHAINABLE_COMMAND]:"Attempted to chain a non chainable command.",[o.bh.INVALID_EXTENSION]:"The provided extension is invalid.",[o.bh.INVALID_CONTENT]:"The content provided to the editor is not supported.",[o.bh.INVALID_NAME]:"An invalid name was used for the extension.",[o.bh.EXTENSION]:"An error occurred within an extension. More details should be made available.",[o.bh.EXTENSION_SPEC]:"The spec was defined without calling the `defaults`, `parse` or `dom` methods.",[o.bh.EXTENSION_EXTRA_ATTRIBUTES]:"Extra attributes must either be a string or an object.",[o.bh.INVALID_SET_EXTENSION_OPTIONS]:"A call to `extension.setOptions` was made with invalid keys.",[o.bh.REACT_PROVIDER_CONTEXT]:"`useRemirrorContext` was called outside of the `remirror` context. It can only be used within an active remirror context created by the `<Remirror />`.",[o.bh.REACT_GET_ROOT_PROPS]:"`getRootProps` has been attached to the DOM more than once. It should only be attached to the dom once per editor.",[o.bh.REACT_EDITOR_VIEW]:"A problem occurred adding the editor view to the dom.",[o.bh.REACT_CONTROLLED]:"There is a problem with your controlled editor setup.",[o.bh.REACT_NODE_VIEW]:"Something went wrong with your custom ReactNodeView Component.",[o.bh.REACT_GET_CONTEXT]:"You attempted to call `getContext` provided by the `useRemirror` prop during the first render of the editor. This is not possible and should only be after the editor first mounts.",[o.bh.REACT_COMPONENTS]:"An error occurred within a remirror component.",[o.bh.REACT_HOOKS]:"An error occurred within a remirror hook.",[o.bh.I18N_CONTEXT]:"You called `useI18n()` outside of an `I18nProvider` context."};var he=class e extends r.BaseError{constructor(){let{code:e,message:t,disableLogging:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=function(e){return A(e)&&O(S(o.bh),e)}(e)?e:o.bh.CUSTOM;super(function(e,t){const n=de[e],r=n?"".concat(n,"\n\n"):"",o=t?"".concat(t,"\n\n"):"";return"".concat(r).concat(o,"For more information visit ").concat(ce,"#").concat(e.toLowerCase())}(r,t)),m(this,"errorCode"),m(this,"url"),this.errorCode=r,this.url="".concat(ce,"#").concat(r.toLowerCase()),n||console.error(this.message)}static create(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}};function ue(e,t){if(!e)throw he.create(t)}function pe(e){return e}},28736:(e,t,n)=>{"use strict";n.d(t,{mQ:()=>ee,PV:()=>re,E4:()=>$,cX:()=>Ae,cA:()=>T,$g:()=>K,YT:()=>J,KP:()=>G,tt:()=>q,xA:()=>Q,BE:()=>Me,xo:()=>we,YE:()=>Ie,ny:()=>j,ve:()=>Oe,U9:()=>ke,r3:()=>Ce,Pg:()=>ie,Qc:()=>Ee,gd:()=>A,IC:()=>Ne,J9:()=>Y,FZ:()=>je,XG:()=>xe,IB:()=>ve,xh:()=>W,hm:()=>H,dT:()=>Se,bT:()=>We,fW:()=>se,_V:()=>ye,rU:()=>Z,WS:()=>U,BQ:()=>ge,nW:()=>ce,wm:()=>de,rQ:()=>le,nw:()=>oe,CD:()=>X,i6:()=>Ue,UI:()=>He,eE:()=>ue,h$:()=>Ve,OX:()=>rt,_1:()=>ne,dV:()=>Be,TC:()=>_,tZ:()=>ze,i4:()=>et,ee:()=>Ze,y_:()=>qe,dC:()=>Xe,tQ:()=>Je,Im:()=>Ge});var r=n(14736),o=n(69811),s=n(27908),i=n(82711),a=/[A-Z]/g,l=/^ms-/,c={};function d(e){return"-"+e.toLowerCase()}const h=function(e){if(c.hasOwnProperty(e))return c[e];var t=e.replace(a,d);return c[e]=l.test(t)?"-"+t:t};function u(e,t){return function(e){return h(e)}(e)+":"+t}function p(){return"undefined"!==typeof document?document:null}var f=n(82502),m=n(94644),g=n(57336),y=n(52350),v=n(10278),b=Object.defineProperty,w=Object.defineProperties,x=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,E=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&E(e,n,t[n]);if(S)for(var n of S(t))k.call(t,n)&&E(e,n,t[n]);return e},M=(e,t)=>w(e,x(t)),N=(e,t)=>{var n={};for(var r in e)O.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&S)for(var r of S(e))t.indexOf(r)<0&&k.call(e,r)&&(n[r]=e[r]);return n},T={get isBrowser(){return!("undefined"===typeof window||"undefined"===typeof window.document||!window.navigator||!window.navigator.userAgent)},get isJSDOM(){return T.isBrowser&&window.navigator.userAgent.includes("jsdom")},get isNode(){return"undefined"!==typeof process&&null!=process.versions&&null!=process.versions.node},get isIos(){return T.isBrowser&&/iPod|iPhone|iPad/.test(navigator.platform)},get isMac(){return T.isBrowser&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)},get isApple(){return T.isNode?"darwin"===process.platform:!!T.isBrowser&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)},get isDevelopment(){return!1},get isTest(){return!1},get isProduction(){return!0}};function A(e,t){var n,r;const o=_e(e);return null!=(r=null==(n=null==o?void 0:o.getComputedStyle(e))?void 0:n.getPropertyValue(t))?r:""}var I=["px","rem","em","in","q","mm","cm","pt","pc","vh","vw","vmin","vmax"],R=/[\d-.]+(\w+)$/;function _(){var e;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0")||"0",n=Number.parseFloat(t),r=t.match(R),s=(null!=(e=null==r?void 0:r[1])?e:"px").toLowerCase();return[n,(0,o.mK)(I,s)?s:"px"]}var P=96,D=25.4,L=72,z=6;function j(e){if(H(e))return A(e,"font-size")||j(e.parentElement);const t=_e(e);return t?A(t.document.documentElement,"font-size"):""}var F=/^([a-z]+)\((.+)\)$/i;function B(e,t){if(!F.test(e))return Number.NaN;const n=g(e,{brackets:["()"],escape:"_",flat:!0});if(!n||0===n.length)return Number.NaN;function r(e){return e.replace(/_(\d+)_/g,((e,t)=>{var r;const o=Number.parseFloat(t);return null!=(r=n[o])?r:""}))}const s=Ce(n,0);for(const i of(0,o.Np)(s,F)){const e=Ce(i,1),n=r(Ce(i,2)).split(/\s*,\s*/).map((e=>{if(F.test(e)){return B(r(e),t)}return V(e,t)}));switch(e){case"min":return Math.min(...n);case"max":return Math.max(...n);case"clamp":{const[e,t,r]=n;if((0,o.Et)(e)&&(0,o.Et)(t)&&(0,o.Et)(r))return(0,o.qE)({min:e,max:r,value:t});break}default:return Number.NaN}}return Number.NaN}function V(e,t){const[n,r]=_(e);return t(n,r)}function K(e,t){const n=function(e){const t=De(e),n=t.document.documentElement||t.document.body;return(r,o)=>{switch(o){case"rem":return r*K(j(n));case"em":return r*K(j(e),null==e?void 0:e.parentElement);case"in":return r*P;case"q":return r*P/D/4;case"mm":return r*P/D;case"cm":return r*P*10/D;case"pt":return r*P/L;case"pc":return r*P/z;case"vh":return(r*t.innerHeight||n.clientWidth)/100;case"vw":return(r*t.innerWidth||n.clientHeight)/100;case"vmin":return r*Math.min(t.innerWidth||n.clientWidth,t.innerHeight||n.clientHeight)/100;case"vmax":return r*Math.max(t.innerWidth||n.clientWidth,t.innerHeight||n.clientHeight)/100;default:return r}}}(t);return F.test(e)?B(e.toLowerCase(),n):V(e,n)}function $(e,t,n){const r=De(n),o=r.document.documentElement||r.document.body,s=K(e,n);switch(t){case"px":default:return s;case"rem":return s/K(j(o));case"em":return s*K(j(n),null==n?void 0:n.parentElement);case"in":return s/P;case"q":return s/P*D*4;case"mm":return s/P*D;case"cm":return s/P/10*D;case"pt":return s/P*L;case"pc":return s/P*z;case"vh":return s/(r.innerHeight||o.clientWidth)*100;case"vw":return s/(r.innerWidth||o.clientHeight)*100;case"vmin":return s/Math.min(r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)*100;case"vmax":return s/Math.max(r.innerWidth||o.clientWidth,r.innerHeight||o.clientHeight)*100}}function W(e){return(0,o.Gv)(e)&&(0,o.Et)(e.nodeType)&&(0,o.Kg)(e.nodeName)}function H(e){return W(e)&&1===e.nodeType}function U(e){const{types:t,node:n}=e;if(!n)return!1;const r=e=>e===n.type||e===n.type.name;return(0,o.cy)(t)?t.some(r):r(t)}function G(e){const{predicate:t,selection:n}=e,r=he(n)?n.selection.$from:pe(n)?n.$from:n;for(let o=r.depth;o>0;o--){const e=r.node(o),n=o>0?r.before(o):0,s=r.start(o),i=n+e.nodeSize;if(t(e,n))return{pos:n,depth:o,node:e,start:s,end:i}}}function J(e){const{depth:t}=e,n=t>0?e.before(t):0,r=e.node(t);return{pos:n,start:e.start(t),node:r,end:n+r.nodeSize,depth:t}}function q(e){const{types:t,selection:n}=e;return G({predicate:e=>U({types:t,node:e}),selection:n})}function X(e){return pe(e)?e.empty:e.selection.empty}function Y(e){return e.docChanged||e.selectionSet}function Z(e){return!!Q(e)}function Q(e){var t;const{state:n,type:s,attrs:i}=e,{selection:a,doc:l}=n,c=(0,o.Kg)(s)?l.type.schema.nodes[s]:s;(0,o.V1)(c,{code:r.bh.SCHEMA,message:"No node exists for ".concat(s)});const d=null!=(t=function(e){const{types:t,selection:n}=e;if(ge(n)&&U({types:t,node:n.node}))return{pos:n.$from.pos,depth:n.$from.depth,start:n.$from.start(),end:n.$from.pos+n.node.nodeSize,node:n.node}}({selection:a,types:s}))?t:G({predicate:e=>e.type===c,selection:a});return i&&!(0,o.RI)(i)&&d?d.node.hasMarkup(c,C(C({},d.node.attrs),i))?d:void 0:d}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{if(!(0,o.EI)(t))return!1;const[n,...r]=t;let s=!1;const i=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return()=>{if(!(0,o.EI)(n))return!1;s=!0;const[,...t]=n;return ee(...n)(M(C({},e),{next:i(...t)}))}},a=i(...r),l=n(M(C({},e),{next:a}));return s||l?l:a()}}function te(e,t){var n;const r=new Map,s=(0,o.Ik)();for(const i of e)for(const[e,a]of(0,o.jO)(i)){const o=[...null!=(n=r.get(e))?n:[],a],i=ee(...o);r.set(e,o),s[e]=t(i)}return s}function ne(e){return te(e,(e=>(t,n,r)=>e({state:t,dispatch:n,view:r,tr:t.tr,next:()=>!1})))}function re(e,t){var n;const r=null!=(n=e.attrs)?n:{};return Object.entries(t).every((e=>{let[t,n]=e;return r[t]===n}))}function oe(e){return(0,o.Gv)(e)}function se(e,t){return(0,o.cy)(t)?(0,o.mK)(t,e[r.VX]):t===e[r.VX]}function ie(e,t){return(0,o.Kg)(e)?(0,o.ZY)(t.nodes,e):e}function ae(e){return(0,o.Gv)(e)&&e instanceof m.sX}function le(e){return(0,o.Gv)(e)&&e instanceof m.bP}function ce(e){return(0,o.Gv)(e)&&e instanceof m.FK}function de(e){return(0,o.Gv)(e)&&e instanceof m.CU}function he(e){return(0,o.Gv)(e)&&e instanceof s.$t}function ue(e){return(0,o.Gv)(e)&&e instanceof s.U3}function pe(e){return(0,o.Gv)(e)&&e instanceof s.LN}function fe(e){return(0,o.Gv)(e)&&e instanceof m.pc}function me(e){const{trState:t,from:n,to:r,type:s,attrs:i={}}=e,{doc:a}=t,l=function(e,t){return(0,o.Kg)(e)?(0,o.ZY)(t.marks,e):e}(s,a.type.schema);if(0===Object.keys(i).length)return a.rangeHasMark(n,r,l);let c=!1;return r>n&&a.nodesBetween(n,r,(e=>{var t;if(c)return!1;const n=null!=(t=e.marks)?t:[];return c=n.some((e=>e.type===l&&re(e,i))),!c})),c}function ge(e){return(0,o.Gv)(e)&&e instanceof s.nh}function ye(e){const{trState:t,type:n,attrs:s={},from:i,to:a}=e,{selection:l,doc:c,storedMarks:d}=t,h=(0,o.Kg)(n)?c.type.schema.marks[n]:n;if((0,o.V1)(h,{code:r.bh.SCHEMA,message:"Mark type: ".concat(n," does not exist on the current schema.")}),i&&a)try{return Math.max(i,a)<c.nodeSize&&me(M(C({},e),{from:i,to:a}))}catch(u){return!1}if(l.empty){return(null!=d?d:l.$from.marks()).some((e=>e.type===n&&re(e,null!=s?s:{})))}return me(M(C({},e),{from:l.from,to:l.to}))}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){var t,n;return null!=(n=null==(t=e.nodes.doc)?void 0:t.createAndFill())?n:void 0}(e.type.schema);if(!n)return!1;const{ignoreAttributes:r,ignoreDocAttributes:o}=t;return r?be(n,e):o?n.content.eq(e.content):n.eq(e)}function be(e,t){if(e===t)return!0;return e.type===t.type&&m.CU.sameSet(e.marks,t.marks)&&function(){if(e.content===t.content)return!0;if(e.content.size!==t.content.size)return!1;const n=[],r=[];e.content.forEach((e=>n.push(e))),t.content.forEach((e=>r.push(e)));for(const[e,t]of n.entries()){const n=r[e];if(!n)return!1;if(!be(t,n))return!1}return!0}()}function we(e){for(const t of Object.values(e.nodes))if("doc"!==t.name&&(t.isBlock||t.isTextblock))return t;(0,o.V1)(!1,{code:r.bh.SCHEMA,message:"No default block node found for the provided schema."})}function xe(e){return e.type===we(e.type.schema)}function Se(e){return!!e&&e.type.isBlock&&!e.textContent&&!e.childCount}function Oe(e,t,n){const s=e.parent.childAfter(e.parentOffset);if(!s.node)return;const i=(0,o.Kg)(t)?t:t.name,a=s.node.marks.find((e=>{let{type:t}=e;return t.name===i}));let l=e.index(),c=e.start()+s.offset,d=l+1,h=c+s.node.nodeSize;if(!a)return n&&h<n.pos?Oe(e.doc.resolve(h+1),t,n):void 0;for(;l>0&&a.isInSet(e.parent.child(l-1).marks);)l-=1,c-=e.parent.child(l).nodeSize;for(;d<e.parent.childCount&&a.isInSet(e.parent.child(d).marks);)h+=e.parent.child(d).nodeSize,d+=1;return{from:c,to:h,text:e.doc.textBetween(c,h,r.MA,"\n\n"),mark:a}}function ke(e,t){const n=[],{$from:r,$to:o}=e;let s=r;for(;;){const e=Oe(s,t,o);if(!e)return n;if(n.push(e),!(e.to<o.pos))return n;s=r.doc.resolve(e.to+1)}}function Ee(e){return function(e,t){if(!ue(e.selection))return;let{from:n,to:o}=e.selection;const i=(t,n)=>function(e){var t,n;return null!=(n=null==(t=e.content.firstChild)?void 0:t.textContent)?n:""}(s.U3.between(e.doc.resolve(t),e.doc.resolve(n)).content());for(let r=i(n-1,n);r&&!t.test(r);n--,r=i(n-1,n));for(let r=i(o,o+1);r&&!t.test(r);o++,r=i(o,o+1));if(n===o)return;return{from:n,to:o,text:e.doc.textBetween(n,o,r.MA,"\n\n")}}(e,/\W/)}function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,o.cy)(e)?e[t]:e;return(0,o.vA)((0,o.Kg)(n),"No match string found for match ".concat(e)),null!=n?n:""}function Me(e){return ue(e)?e.$cursor:void 0}function Ne(e,t){const n=t.nodeSize-2;let r;const i=e=>(0,o.qE)({min:0,max:n,value:e});if(pe(e))return e;if("all"===e)return new s.i5(t);if(r="start"===e?0:"end"===e?n:fe(e)?e.pos:e,(0,o.Et)(r))return r=i(r),s.U3.near(t.resolve(r));if(a=r,(0,o.Gv)(a)&&(0,o.Et)(a.anchor)&&(0,o.Et)(a.head)){const e=i(r.anchor),n=i(r.head);return s.U3.between(t.resolve(e),t.resolve(n))}var a;const l=i(r.from),c=i(r.to);return s.U3.between(t.resolve(l),t.resolve(c))}var Te=3;function Ae(e){const{content:t,schema:n,document:s,stringHandler:i,onError:a,attempts:l=0}=e,c=a&&l<=Te||0===l;if((0,o.V1)(c,{code:r.bh.INVALID_CONTENT,message:"The invalid content has been called recursively more than ${MAX_ATTEMPTS} times. The content is invalid and the error handler has not been able to recover properly."}),(0,o.Kg)(t)){(0,o.V1)(i,{code:r.bh.INVALID_CONTENT,message:"The string '".concat(t,"' was added to the editor, but no `stringHandler` was added. Please provide a valid string handler which transforms your content to a `ProsemirrorNode` to prevent this error.")});return i({document:s,content:t,schema:n})}if(he(t))return t.doc;if(le(t))return t;try{return n.nodeFromJSON(t)}catch(d){const s=function(e){var t=e,{json:n,schema:r}=t,s=N(t,["json","schema"]);const i=new Set((0,o.HP)(r.marks)),a=new Set((0,o.HP)(r.nodes)),l=$e({json:n,path:[],validNodes:a,validMarks:i});return C({json:n,invalidContent:l,transformers:Ke},s)}({schema:n,error:d,json:t}),i=null==a?void 0:a(s);return(0,o.V1)(i,{code:r.bh.INVALID_CONTENT,message:"An error occurred when processing the content. Please provide an `onError` handler to process the invalid content: ".concat(JSON.stringify(s.invalidContent,null,2))}),Ae(M(C({},e),{content:i,attempts:l+1}))}}function Ie(){const e=p();if(e)return e;throw new Error("Unable to retrieve the document from the global scope. \nIt seems that you are running Remirror in a non-browser environment. Remirror need browser APIs to work. \nIf you are using Jest (or other testing frameworks), make sure that you are using the JSDOM environment (https://jestjs.io/docs/29.0/configuration#testenvironment-string). \nIf you are using Next.js (or other server-side rendering frameworks), please use dynamic import with `ssr: false` to load the editor component without rendering it on the server (https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr). \nIf you are using Node.js, you can install JSDOM and Remirror will try to use it automatically, or you can create a fake document and pass it to Remirror")}function Re(e){var t,n,r;return null!=(r=null!=(t=null==e?void 0:e.defaultView)?t:"undefined"!==typeof window?window:void 0)?r:null==(n=p())?void 0:n.defaultView}function _e(e){return Re(null==e?void 0:e.ownerDocument)}function Pe(e){var t;const n=null!=(t=Re(e))?t:Ie().defaultView;if(n)return n;throw new Error("Unable to retrieve the window from the global scope")}function De(e){return Pe(null==e?void 0:e.ownerDocument)}function Le(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie();const n=function(e,t){return!!le(e)&&(t?e.type===t.nodes.doc:"doc"===e.type.name)}(e,e.type.schema)?e.content:m.FK.from(e);return m.ZF.fromSchema(e.type.schema).serializeFragment(n,{document:t})}function ze(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie();const n=t.createElement("div");return n.append(Le(e,t)),n.innerHTML}function je(e){const t=e,{content:n,schema:r,document:o,fragment:s=!1}=t,i=N(t,["content","schema","document","fragment"]),a=function(e,t){return(new(Pe(t).DOMParser)).parseFromString("<body>".concat(e,"</body>"),"text/html").body}(n,o),l=m.S4.fromSchema(r);return s?l.parseSlice(a,C(C({},Fe),i)).content:l.parse(a,C(C({},Fe),i))}var Fe={preserveWhitespace:!1};function Be(e,t){const n=(0,o.HP)(t.defaults());return f(C({},e),n)}function Ve(e,t){let n="";t&&(n="".concat(t.trim()));const r=function(e){var t="";for(var n in e){var r=e[n];"string"!==typeof r&&"number"!==typeof r||(t&&(t+=";"),t+=u(n,r))}return t}(e);if(!r)return n;const o=(n.endsWith(";")," ");return"".concat(n).concat(o).concat(r)}var Ke={remove(e,t){let n=e;for(const r of t)r.invalidParentNode||(n=(0,o.wC)(r.path,n));return n}};function $e(e){const{json:t,validMarks:n,validNodes:r,path:s=[]}=e,i={validMarks:n,validNodes:r},a=[],{type:l,marks:c,content:d}=t;let{invalidParentMark:h=!1,invalidParentNode:u=!1}=e;if(c){const e=[];for(const[t,r]of c.entries()){const i=(0,o.Kg)(r)?r:r.type;n.has(i)||(e.unshift({name:i,path:[...s,"marks","".concat(t)],type:"mark",invalidParentMark:h,invalidParentNode:u}),h=!0)}a.push(...e)}if(r.has(l)||(a.push({name:l,type:"node",path:s,invalidParentMark:h,invalidParentNode:u}),u=!0),d){const e=[];for(const[t,n]of d.entries())e.unshift(...$e(M(C({},i),{json:n,path:[...s,"content","".concat(t)],invalidParentMark:h,invalidParentNode:u})));a.unshift(...e)}return a}function We(e){return!!(ue(e)&&e.$cursor&&e.$cursor.parentOffset>=e.$cursor.parent.content.size)}function He(e){return!!(ue(e)&&e.$cursor&&e.$cursor.parentOffset<=0)}function Ue(e){const t=s.LN.atStart(e.$anchor.doc);return!(!He(e)||t.anchor!==e.anchor)}function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return function(r){const{tr:s,dispatch:a,state:l}=r,c=(0,o.Kg)(e)?(0,o.ZY)(l.schema.nodes,e):e,{from:d,to:h}=Ne(null!=n?n:s.selection,s.doc),u=s.doc.resolve(d),p=s.doc.resolve(h),f=u.blockRange(p),m=f&&(0,i.oM)(f,c,t);return!(!m||!f)&&(null==a||a(s.wrap(f,m).scrollIntoView()),!0)}}function Je(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return r=>{const{tr:s,state:a}=r;return Q({state:s,type:(0,o.Kg)(e)?(0,o.ZY)(a.schema.nodes,e):e,attrs:t})?function(e){let{tr:t,dispatch:n}=e;const{$from:r,$to:s}=t.selection,a=r.blockRange(s),l=a&&(0,i.jP)(a);return!(!(0,o.Et)(l)||!a)&&(null==n||n(t.lift(a,l).scrollIntoView()),!0)}(r):Ge(e,t,n)(r)}}function qe(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(s){const{tr:i,dispatch:a,state:l}=s,c=(0,o.Kg)(e)?(0,o.ZY)(l.schema.nodes,e):e,{from:d,to:h}=Ne(null!=n?n:i.selection,i.doc);let u,p=!1;return i.doc.nodesBetween(d,h,((e,n)=>{if(p)return!1;if(!e.isTextblock||e.hasMarkup(c,t))return;if(e.type===c)return p=!0,void(u=e.attrs);const r=i.doc.resolve(n),o=r.index();p=r.parent.canReplaceWith(o,o+1,c),p&&(u=r.parent.attrs)})),!!p&&(null==a||a(i.setBlockType(d,h,c,C(C({},r?u:{}),t)).scrollIntoView()),!0)}}function Xe(e){return t=>{var n;const{tr:r,state:o}=t,{type:s,attrs:i,preserveAttrs:a=!0}=e,l=Q({state:r,type:s,attrs:i}),c=null!=(n=e.toggleType)?n:we(o.schema);if(l)return qe(c,C(C({},a?l.node.attrs:{}),i))(t);const d=Q({state:r,type:c,attrs:i});return qe(s,C(C({},a?null==d?void 0:d.node.attrs:{}),i))(t)}}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=navigator.userAgent.match(/Chrom(e|ium)\/(\d+)\./);return!!t&&Number.parseInt((0,o.ZY)(t,2),10)>=e}function Ze(e){const{attrs:t={},appendText:n="",content:i="",keepSelection:a=!1,range:l}=e;return c=>{let{state:d,tr:h,dispatch:u}=c;var p,f,g,y;const v=d.schema,b=Ne(null!=(f=null!=(p=e.selection)?p:l)?f:h.selection,h.doc),w=b.$from.index(),{from:x,to:S,$from:O}=b,k=(0,o.Kg)(e.type)?null!=(g=v.nodes[e.type])?g:v.marks[e.type]:e.type;if((0,o.V1)(!(0,o.Kg)(e.type)||k,{code:r.bh.SCHEMA,message:"Schema contains no marks or nodes with name ".concat(k)}),E=k,(0,o.Gv)(E)&&E instanceof m.Z6){if(!O.parent.canReplaceWith(w,w,k))return!1;h.replaceWith(x,S,k.create(t,i?v.text(i):void 0))}else(0,o.V1)(i,{message:"`replaceText` cannot be called without content when using a mark type"}),h.replaceWith(x,S,v.text(i,ae(k)?[k.create(t)]:void 0));var E;return n&&h.insertText(n),a&&function(e,t){let{head:n,empty:r,anchor:o}=e;for(const s of t.steps)n=s.getMap().map(n);r?t.setSelection(s.U3.near(t.doc.resolve(n))):t.setSelection(s.U3.between(t.doc.resolve(o),t.doc.resolve(n)))}(d.selection,h),u&&(Ye(60)&&(null==(y=document.getSelection())||y.empty()),u(h)),!0}}function Qe(e,t){const n=e.parent.childAfter(e.parentOffset);if(!n.node)return;const{marks:r,nodeSize:o}=n.node;if(r[0])return r[0].type;const s=e.start()+n.offset+o;return Qe(e.doc.resolve(s+1),t)}function et(e){return t=>{let{dispatch:n,tr:s,state:i}=t;var a,l;const{type:c,expand:d=!0,range:h}=e,u=Ne(null!=(l=null!=(a=e.selection)?a:h)?l:s.selection,s.doc);let{from:p,to:f,$from:m,$to:g}=u;const y=(0,o.Kg)(c)?i.schema.marks[c]:c;null!==y&&(0,o.V1)(y,{code:r.bh.SCHEMA,message:"Mark type: ".concat(c," does not exist on the current schema.")});const v=null!=y?y:Qe(m);if(!v)return!1;const b=Oe(m,v,g);return d&&b&&(p=Math.max(0,Math.min(p,b.from)),f=Math.min(Math.max(f,b.to),s.doc.nodeSize-2)),null==n||n(s.removeMark(p,(0,o.Et)(f)?f:p,ae(y)?y:void 0)),!0}}function tt(e){const{node:t,predicate:n,descend:s=!0,action:i}=e;(0,o.V1)(le(t),{code:r.bh.INTERNAL,message:'Invalid "node" parameter passed to "findChildren".'}),(0,o.V1)((0,o.Tn)(n),{code:r.bh.INTERNAL,message:'Invalid "predicate" parameter passed to "findChildren".'});const a=[];return t.descendants(((e,t)=>{const r={node:e,pos:t};return n(r)?(a.push(r),null==i||i(r),s):s})),a}function nt(e){let{predicate:t}=e;return e=>tt(M(C({},e),{predicate:t}))}nt({predicate:e=>e.node.isText}),nt({predicate:e=>e.node.isInline}),nt({predicate:e=>e.node.isBlock});function rt(e){const{regexp:t,type:n,getAttributes:s,ignoreWhitespace:i=!1,beforeDispatch:a,updateCaptured:l,shouldSkip:c,invalidMarks:d}=e;let h;const u=new y.fV(t,((e,t,p,f)=>{var m;const{tr:g,schema:y}=e;h||(h=(0,o.Kg)(n)?y.marks[n]:n,(0,o.V1)(h,{code:r.bh.SCHEMA,message:"Mark type: ".concat(n," does not exist on the current schema.")}));let v=t[1],b=t[0];const w=ot({captureGroup:v,fullMatch:b,end:f,start:p,rule:u,state:e,ignoreWhitespace:i,invalidMarks:d,shouldSkip:c,updateCaptured:l});if(!w)return null;({start:p,end:f,captureGroup:v,fullMatch:b}=w);const x=(0,o.Tn)(s)?s(t):s;let S=f,O=[];if(v){const e=b.search(/\S/),t=p+b.indexOf(v),n=t+v.length;O=null!=(m=g.storedMarks)?m:[],n<f&&g.delete(n,f),t>p&&g.delete(p+e,t),S=p+e+v.length}return g.addMark(p,S,h.create(x)),g.setStoredMarks(O),null==a||a({tr:g,match:t,start:p,end:f}),g}));return u}function ot(e){let{captureGroup:t,fullMatch:n,end:r,start:o,rule:s,ignoreWhitespace:i,shouldSkip:a,updateCaptured:l,state:c,invalidMarks:d}=e;var h,u,p,f,m,g;if(null==n)return null;const y=null!=(h=null==l?void 0:l({captureGroup:t,fullMatch:n,start:o,end:r}))?h:{};t=null!=(u=y.captureGroup)?u:t,n=null!=(p=y.fullMatch)?p:n,o=null!=(f=y.start)?f:o,r=null!=(m=y.end)?m:r;const b=c.doc.resolve(o),w=c.doc.resolve(r);return d&&(0,v.Gb)({$from:b,$to:w},d)||s.invalidMarks&&(0,v.Gb)({$from:b,$to:w},s.invalidMarks)||i&&""===(null==t?void 0:t.trim())||(null==a?void 0:a({state:c,captureGroup:t,fullMatch:n,start:o,end:r,ruleType:"mark"}))||(null==(g=s.shouldSkip)?void 0:g.call(s,{state:c,captureGroup:t,fullMatch:n,start:o,end:r,ruleType:"mark"}))?null:{captureGroup:t,end:r,fullMatch:n,start:o}}},37643:(e,t,n)=>{"use strict";n.d(t,{dTB:()=>sr,z1i:()=>me,udg:()=>ge,UBi:()=>fe,QIB:()=>dr,G5h:()=>Ee,ckn:()=>Se,dwU:()=>ke,I2T:()=>we,AYH:()=>hr,pi3:()=>Ce,wh:()=>lt});var r=n(69811),o=n(14736),s=n(83207),i=n(28736),a=n(82502),l=n(52134),c=n(54518),d=n(94644),h=n(27908),u=n(26244),p=n(17293),f=n(3904),m=n(52350),g=n(6521);function y(e){const t=(0,r.di)(e,((e,t)=>{var n,r;return(null!=(n=t.priority)?n:o.OR.Low)-(null!=(r=e.priority)?r:o.OR.Low)})),n=[],s=[];for(const r of t)E(r)?n.push(r):s.push(r);let i;return new h.k_({key:v,view:e=>(i=e,{}),props:{transformPasted:e=>{var t,o,s,a;const l=i.state.selection.$from,c=l.node().type.name,h=new Set(l.marks().map((e=>e.type.name)));for(const u of n){if((null==(t=u.ignoredNodes)?void 0:t.includes(c))||(null==(o=u.ignoredMarks)?void 0:o.some((e=>h.has(e)))))continue;const n=null!=(a=null==(s=e.content.firstChild)?void 0:s.textContent)?a:"",l=!i.state.selection.empty&&1===e.content.childCount&&n,p=(0,r.Np)(n,u.regexp)[0];if(l&&p&&"mark"===u.type&&u.replaceSelection){const{from:e,to:t}=i.state.selection,n=i.state.doc.slice(e,t),o=n.content.textBetween(0,n.content.size);if("boolean"!==typeof u.replaceSelection?u.replaceSelection(o):u.replaceSelection){const e=[],{getAttributes:t,markType:o}=u,s=(0,r.Tn)(t)?t(p,!0):t,i=o.create(s);return n.content.forEach((t=>{if(t.isText){const n=i.addToSet(t.marks);e.push(t.mark(n))}})),d.Ji.maxOpen(d.FK.fromArray(e))}}const{nodes:f,transformed:m}=O(e.content,u,i.state.schema);m&&(e="node"===u.type&&u.nodeType.isBlock?new d.Ji(d.FK.fromArray(f),0,0):new d.Ji(d.FK.fromArray(f),e.openStart,e.openEnd))}return function(e){const t=d.Ji.maxOpen(e.content);return t.openStart<e.openStart||t.openEnd<e.openEnd?t:e}(e)},handleDOMEvents:{paste:(e,t)=>{var n,r;const o=t;if(!(null==(r=(n=e.props).editable)?void 0:r.call(n,e.state)))return!1;const{clipboardData:i}=o;if(!i)return!1;const a=[...i.items].map((e=>e.getAsFile())).filter((e=>!!e));if(0===a.length)return!1;const{selection:l}=e.state;for(const{fileHandler:c,regexp:d}of s){const t=d?a.filter((e=>d.test(e.type))):a;if(0!==t.length&&c({event:o,files:t,selection:l,view:e,type:"paste"}))return o.preventDefault(),!0}return!1},drop:(e,t)=>{var n,r,o,i;const a=t;if(!(null==(r=(n=e.props).editable)?void 0:r.call(n,e.state)))return!1;const{dataTransfer:l,clientX:c,clientY:d}=a;if(!l)return!1;const h=function(e){var t,n;const{dataTransfer:r}=e;if(!r)return[];if((null==(t=r.files)?void 0:t.length)>0)return[...r.files];if(null==(n=r.items)?void 0:n.length)return[...r.items].map((e=>e.getAsFile())).filter((e=>!!e));return[]}(a);if(0===h.length)return!1;const u=null!=(i=null==(o=e.posAtCoords({left:c,top:d}))?void 0:o.pos)?i:e.state.selection.anchor;for(const{fileHandler:p,regexp:f}of s){const t=f?h.filter((e=>f.test(e.type))):h;if(0!==t.length&&p({event:a,files:t,pos:u,view:e,type:"drop"}))return a.preventDefault(),!0}return!1}}}})}var v=new h.hs("pasteRule");function b(e,t){return function n(o){const{fragment:s,rule:i,nodes:a}=o,{regexp:l,ignoreWhitespace:c,ignoredMarks:h,ignoredNodes:u}=i;let p=!1;return s.forEach((o=>{var s;if((null==u?void 0:u.includes(o.type.name))||C(o))return void a.push(o);if(!o.isText){const e=n({fragment:o.content,rule:i,nodes:[]});p||(p=e.transformed);const t=d.FK.fromArray(e.nodes);return void(o.type.validContent(t)?a.push(o.copy(t)):a.push(...e.nodes))}if(o.marks.some((e=>M(e)||(null==h?void 0:h.includes(e.type.name)))))return void a.push(o);const f=null!=(s=o.text)?s:"";let m=0;for(const n of(0,r.Np)(f,l)){const r=n[1],s=n[0];if(c&&""===(null==r?void 0:r.trim())||!s)return;const l=n.index,d=l+s.length;l>m&&a.push(o.cut(m,l));let h=o.cut(l,d);if(s&&r){const e=s.search(/\S/),t=l+s.indexOf(r),n=t+r.length;e&&a.push(o.cut(l,l+e)),h=o.cut(t,n)}e({nodes:a,rule:i,textNode:h,match:n,schema:t}),p=!0,m=d}f&&m<f.length&&a.push(o.cut(m))})),{nodes:a,transformed:p}}}function w(e){var t;const{nodes:n,rule:o,textNode:s,match:i,schema:a}=e,{transformMatch:l,getAttributes:c,markType:d}=o,h=(0,r.Tn)(c)?c(i,!1):c,u=null!=(t=s.text)?t:"",p=d.create(h),f=null==l?void 0:l(i);if(""===f)return;if(!1===f)return void n.push(a.text(u,s.marks));const m=p.addToSet(s.marks);n.push(a.text(null!=f?f:u,m))}function x(e){var t;const{nodes:n,rule:r,textNode:o,match:s,schema:i}=e,{transformMatch:a}=r,l=null==a?void 0:a(s);if(""===l||!1===l)return;const c=null!=(t=null!=l?l:o.text)?t:"";n.push(i.text(c,o.marks))}function S(e){const{nodes:t,rule:n,textNode:o,match:s}=e,{getAttributes:i,nodeType:a,getContent:l}=n,c=(0,r.Tn)(i)?i(s,!1):i,d=(l?l(s):o)||void 0;t.push(a.createChecked(c,d))}function O(e,t,n){const r=[];switch(t.type){case"mark":return b(w,n)({fragment:e,nodes:r,rule:t});case"node":return b(S,n)({fragment:e,nodes:r,rule:t});default:return b(x,n)({fragment:e,nodes:r,rule:t})}}var k=["mark","node","text"];function E(e){return(0,r.mK)(k,e.type)}function C(e){var t;return e.type.spec.code||(null==(t=e.type.spec.group)?void 0:t.split(" ").includes("code"))}function M(e){var t;return"code"===e.type.name||(null==(t=e.type.spec.group)?void 0:t.split(" ").includes("code"))}var N=n(10278),T=n(36934);const A=function(e,t){};var I=Object.create,R=Object.defineProperty,_=Object.defineProperties,P=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,F=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),B=e=>{throw TypeError(e)},V=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,K=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&V(e,n,t[n]);if(L)for(var n of L(t))j.call(t,n)&&V(e,n,t[n]);return e},$=(e,t)=>_(e,D(t)),W=(e,t)=>R(e,"name",{value:t,configurable:!0}),H=(e,t)=>{var n={};for(var r in e)z.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&L)for(var r of L(e))t.indexOf(r)<0&&j.call(e,r)&&(n[r]=e[r]);return n},U=e=>{var t;return[,,,I(null!=(t=null==e?void 0:e[F("metadata")])?t:null)]},G=["class","method","getter","setter","accessor","field","value","get","set"],J=e=>void 0!==e&&"function"!==typeof e?B("Function expected"):e,q=(e,t,n,r,o)=>({kind:G[e],name:t,metadata:r,addInitializer:e=>n._?B("Already initialized"):o.push(J(e||null))}),X=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},Y=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=G[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&P(h<4?o:{get[n](){return te(this,s)},set[n](e){return re(this,s,e)}},n));h?p&&h<4&&W(s,(h>2?"set ":h>1?"get ":"")+n):W(o,n);for(var b=r.length-1;b>=0;b--)c=q(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>ee(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?te:oe)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>re(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?J(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?B("Object expected"):(J(i=a.get)&&(v.get=i),J(i=a.set)&&(v.set=i),J(i=a.init)&&g.unshift(i));return h||((e,t)=>{V(t,F("metadata"),e[3])})(e,o),v&&R(o,n,v),p?4^h?s:v:o},Z=(e,t,n)=>V(e,"symbol"!==typeof t?t+"":t,n),Q=(e,t,n)=>t.has(e)||B("Cannot "+n),ee=(e,t)=>Object(t)!==t?B('Cannot use the "in" operator on this value'):e.has(t),te=(e,t,n)=>(Q(e,t,"read from private field"),n?n.call(e):t.get(e)),ne=(e,t,n)=>t.has(e)?B("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),re=(e,t,n,r)=>(Q(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),oe=(e,t,n)=>(Q(e,t,"access private method"),n);function se(e,t){return e===t}function ie(e){const{previousOptions:t,update:n,equals:o=se}=e,s=(0,r.CN)(K(K({},t),n)),i=(0,r.Ik)(),a=(0,r.HP)(t);for(const r of a){const e=t[r],n=s[r];o(e,n)?i[r]={changed:!1}:i[r]={changed:!0,previousValue:e,value:n}}return{changes:(0,r.CN)(i),options:s,pickChanged:e=>{const t=(0,r.Ik)();for(const n of e){const e=i[n];(null==e?void 0:e.changed)&&(t[n]=e.value)}return t}}}var ae={[o.bh.DUPLICATE_HELPER_NAMES]:"helper method",[o.bh.DUPLICATE_COMMAND_NAMES]:"command method"};function le(e){const{name:t,set:n,code:o}=e,s=ae[o];(0,r.V1)(!n.has(t),{code:o,message:"There is a naming conflict for the name: ".concat(t," used in this '").concat(s,"'. Please rename or remove from the editor to avoid runtime errors.")}),n.add(t)}var ce="__IGNORE__",de="__ALL__",he=class{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];let[s]=n;Z(this,"~O",{}),Z(this,"_initialOptions"),Z(this,"_dynamicKeys"),Z(this,"_options"),Z(this,"_mappedHandlers"),Z(this,"onAddCustomHandler"),this._mappedHandlers=(0,r.Ik)(),this.populateMappedHandlers(),this._options=this._initialOptions=(0,r.$N)(e,this.constructor.defaultOptions,null!=s?s:(0,r.Ik)(),this.createDefaultHandlerOptions()),this._dynamicKeys=this.getDynamicKeys(),this.init()}get options(){return this._options}get dynamicKeys(){return this._dynamicKeys}get initialOptions(){return this._initialOptions}init(){}getDynamicKeys(){const e=[],{customHandlerKeys:t,handlerKeys:n,staticKeys:o}=this.constructor;for(const s of(0,r.HP)(this._options))o.includes(s)||n.includes(s)||t.includes(s)||e.push(s);return e}ensureAllKeysAreDynamic(e){if(i.cA.isProduction)return;const t=[];for(const n of(0,r.HP)(e))this._dynamicKeys.includes(n)||t.push(n);(0,r.V1)((0,r.VP)(t),{code:o.bh.INVALID_SET_EXTENSION_OPTIONS,message:"Invalid properties passed into the 'setOptions()' method: ".concat(JSON.stringify(t),".")})}setOptions(e){var t;const n=this.getDynamicOptions();this.ensureAllKeysAreDynamic(e);const{changes:r,options:o,pickChanged:s}=ie({previousOptions:n,update:e});this.updateDynamicOptions(o),null==(t=this.onSetOptions)||t.call(this,{reason:"set",changes:r,options:o,pickChanged:s,initialOptions:this._initialOptions})}resetOptions(){var e;const t=this.getDynamicOptions(),{changes:n,options:r,pickChanged:o}=ie({previousOptions:t,update:this._initialOptions});this.updateDynamicOptions(r),null==(e=this.onSetOptions)||e.call(this,{reason:"reset",options:r,changes:n,pickChanged:o,initialOptions:this._initialOptions})}getDynamicOptions(){return a(this._options,[...this.constructor.customHandlerKeys,...this.constructor.handlerKeys])}updateDynamicOptions(e){this._options=K(K({},this._options),e)}populateMappedHandlers(){for(const e of this.constructor.handlerKeys)this._mappedHandlers[e]=[]}createDefaultHandlerOptions(){var e=this;const t=(0,r.Ik)();for(const n of this.constructor.handlerKeys)t[n]=function(){var t;const{handlerKeyOptions:r}=e.constructor,o=null==(t=r[n])?void 0:t.reducer;for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];let l=null==o?void 0:o.getDefault(...i);for(const[,c]of e._mappedHandlers[n]){const e=c(...i);if(l=o?o.accumulator(l,e,...i):e,ue(r,l,n))return l}return l};return t}addHandler(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.OR.Default;return this._mappedHandlers[e].push([n,t]),this.sortHandlers(e),()=>this._mappedHandlers[e]=this._mappedHandlers[e].filter((e=>{let[,n]=e;return n!==t}))}hasHandlers(e){var t;return(null!=(t=this._mappedHandlers[e])?t:[]).length>0}sortHandlers(e){this._mappedHandlers[e]=(0,r.di)(this._mappedHandlers[e],((e,t)=>{let[n]=e,[r]=t;return r-n}))}addCustomHandler(e,t){var n,o;return null!=(o=null==(n=this.onAddCustomHandler)?void 0:n.call(this,{[e]:t}))?o:r.lQ}};function ue(e,t,n){const{[de]:o}=e,s=e[n];return!(!o&&!s)&&(!(!s||s.earlyReturnValue===ce||((0,r.Tn)(s.earlyReturnValue)?!0!==s.earlyReturnValue(t):t!==s.earlyReturnValue))||!(!o||o.earlyReturnValue===ce||((0,r.Tn)(o.earlyReturnValue)?!0!==o.earlyReturnValue(t):t!==o.earlyReturnValue)))}Z(he,"defaultOptions",{}),Z(he,"staticKeys",[]),Z(he,"handlerKeys",[]),Z(he,"handlerKeyOptions",{}),Z(he,"customHandlerKeys",[]);var pe=class extends he{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];super(ye,...t),Z(this,"priorityOverride"),Z(this,"_extensions"),Z(this,"extensionMap"),Z(this,"_store"),Z(this,"~E",{}),this._extensions=(0,r.pD)(this.createExtensions(),(e=>e.constructor)),this.extensionMap=new Map;for(const r of this._extensions)this.extensionMap.set(r.constructor,r)}get priority(){var e,t;return null!=(t=null!=(e=this.priorityOverride)?e:this.options.priority)?t:this.constructor.defaultPriority}get constructorName(){return"".concat((0,s.fL)(this.name),"Extension")}get store(){return(0,r.V1)(this._store,{code:o.bh.MANAGER_PHASE_ERROR,message:"An error occurred while attempting to access the 'extension.store' when the Manager has not yet set created the lifecycle methods."}),(0,r.CN)(this._store,{requireKeys:!0})}get extensions(){return this._extensions}replaceChildExtension(e,t){this.extensionMap.has(e)&&(this.extensionMap.set(e,t),this._extensions=this.extensions.map((n=>t.constructor===e?t:n)))}createExtensions(){return[]}getExtension(e){const t=this.extensionMap.get(e);return(0,r.V1)(t,{code:o.bh.INVALID_GET_EXTENSION,message:"'".concat(e.name,"' does not exist within the preset: '").concat(this.name,"'")}),t}isOfType(e){return this.constructor===e}setStore(e){this._store||(this._store=e)}clone(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new this.constructor(...t)}setPriority(e){this.priorityOverride=e}};Z(pe,"defaultPriority",o.OR.Default);var fe=class extends pe{static get[o.VX](){return o.OW.PlainExtensionConstructor}get[o.VX](){return o.OW.PlainExtension}},me=class extends pe{static get[o.VX](){return o.OW.MarkExtensionConstructor}get[o.VX](){return o.OW.MarkExtension}get type(){return(0,r.ZY)(this.store.schema.marks,this.name)}constructor(){super(...arguments)}};Z(me,"disableExtraAttributes",!1);var ge=class extends pe{static get[o.VX](){return o.OW.NodeExtensionConstructor}get[o.VX](){return o.OW.NodeExtension}get type(){return(0,r.ZY)(this.store.schema.nodes,this.name)}constructor(){super(...arguments)}};Z(ge,"disableExtraAttributes",!1);var ye={priority:void 0,extraAttributes:{},disableExtraAttributes:!1,exclude:{}};function ve(e){return(0,i.nw)(e)&&(0,i.fW)(e,[o.OW.PlainExtension,o.OW.MarkExtension,o.OW.NodeExtension])}function be(e){return(0,i.nw)(e)&&(0,i.fW)(e,o.OW.PlainExtension)}function we(e){return(0,i.nw)(e)&&(0,i.fW)(e,o.OW.NodeExtension)}function xe(e){return(0,i.nw)(e)&&(0,i.fW)(e,o.OW.MarkExtension)}function Se(e){return(t,n)=>{if(n&&"class"!==n.kind)throw new Error("The extension decorator can only be used on a class.");const o=e,{defaultOptions:s,customHandlerKeys:i,handlerKeys:a,staticKeys:l,defaultPriority:c,handlerKeyOptions:d}=o,h=H(o,["defaultOptions","customHandlerKeys","handlerKeys","staticKeys","defaultPriority","handlerKeyOptions"]),u=(0,r.KX)(t);s&&(u.defaultOptions=s),c&&(u.defaultPriority=c),d&&(u.handlerKeyOptions=d),u.staticKeys=null!=l?l:[],u.handlerKeys=null!=a?a:[],u.customHandlerKeys=null!=i?i:[];for(const[e,r]of Object.entries(h))u[e]||(u[e]=r);return(0,r.KX)(u)}}var Oe=class extends fe{constructor(){var e;super(...arguments),e=this,Z(this,"attributeList",[]),Z(this,"attributeObject",(0,r.Ik)()),Z(this,"updateAttributes",(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.transformAttributes(),t&&e.store.commands.forceUpdate("attributes")}))}get name(){return"attributes"}onCreate(){this.transformAttributes(),this.store.setExtensionStore("updateAttributes",this.updateAttributes)}transformAttributes(){var e,t,n,o;if(this.attributeObject=(0,r.Ik)(),null==(e=this.store.managerSettings.exclude)?void 0:e.attributes)this.store.setStoreKey("attributes",this.attributeObject);else{this.attributeList=[];for(const e of this.store.extensions){if(null==(t=e.options.exclude)?void 0:t.attributes)continue;const s=null==(n=e.createAttributes)?void 0:n.call(e),i=$(K({},s),{class:(0,r.cx)(...null!=(o=e.classNames)?o:[],null==s?void 0:s.class)});this.attributeList.unshift(i)}for(const e of this.attributeList)this.attributeObject=$(K(K({},this.attributeObject),e),{class:(0,r.cx)(this.attributeObject.class,e.class)});this.store.setStoreKey("attributes",this.attributeObject)}}};function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{const r=n.name;if("string"!==typeof r)throw new TypeError("Invalid method name provided");return n.addInitializer((function(){var t;(null!=(t=this.decoratedHelpers)?t:this.decoratedHelpers={})[r]=e})),t}}function Ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{const r=n.name;if("string"!==typeof r)throw new TypeError("Invalid method name provided");return n.addInitializer((function(){var t;(null!=(t=this.decoratedCommands)?t:this.decoratedCommands={})[r]=e})),t}}function Ce(e){return(t,n)=>{const r=n.name;if("string"!==typeof r)throw new TypeError("Invalid method name provided");return n.addInitializer((function(){var t;(null!=(t=this.decoratedKeybindings)?t:this.decoratedKeybindings={})[r]=e})),t}}var Me,Ne,Te,Ae,Ie,Re,_e,Pe,De,Le,ze,je,Fe,Be,Ve,Ke,$e,We,He,Ue,Ge,Je,qe,Xe,Ye,Ze,Qe,et,tt,nt,rt,ot,st,it,at=class{constructor(e){this.promiseCreator=e,Z(this,"failureHandlers",[]),Z(this,"successHandlers",[]),Z(this,"validateHandlers",[]),Z(this,"generateCommand",(()=>e=>{let t=!0;const{view:n,tr:r,dispatch:o}=e;if(!n)return!1;for(const s of this.validateHandlers)if(!s($(K({},e),{dispatch:()=>{}}))){t=!1;break}if(!o||!t)return t;return this.promiseCreator(e).then((e=>{this.runHandlers(this.successHandlers,{value:e,state:n.state,tr:n.state.tr,dispatch:n.dispatch,view:n})})).catch((e=>{this.runHandlers(this.failureHandlers,{error:e,state:n.state,tr:n.state.tr,dispatch:n.dispatch,view:n})})),o(r),!0}))}validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";return this.validateHandlers[t](e),this}success(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";return this.successHandlers[t](e),this}failure(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";return this.failureHandlers[t](e),this}runHandlers(e,t){var n;for(const r of e)if(!r($(K({},t),{dispatch:()=>{}})))break;null==(n=t.dispatch)||n.call(t,t.tr)}};function lt(e){const{type:t,attrs:n,range:s,selection:a}=e;return e=>{var l;const{dispatch:c,tr:d,state:h}=e,f=(0,r.Kg)(t)?h.schema.marks[t]:t;if((0,r.V1)(f,{code:o.bh.SCHEMA,message:"Mark type: ".concat(t," does not exist on the current schema.")}),s||a){const{from:e,to:r}=(0,i.IC)(null!=(l=null!=a?a:s)?l:d.selection,d.doc);return(0,i._V)(K({trState:d,type:t},s))?null==c||c(d.removeMark(e,r,f)):null==c||c(d.addMark(e,r,f.create(n))),!0}return(0,u.lm)((0,p.wh)(f,n))(e)}}st=[Se({defaultPriority:o.OR.Highest,defaultOptions:{trackerClassName:"remirror-tracker-position",trackerNodeName:"span"},staticKeys:["trackerClassName","trackerNodeName"]})];var ct=class extends(ot=fe,rt=[Ee()],nt=[Ee()],tt=[Ee()],et=[Ee()],Qe=[Ee()],Ze=[Ee()],Ye=[Ee()],Xe=[Ee()],qe=[Ee()],Je=[Ee()],Ge=[Ee()],Ue=[Ee()],He=[Ee()],We=[Ee()],$e=[Ee()],Ke=[Ee()],Ve=[Ee()],Be=[Ee()],Fe=[Ee()],je=[Ee()],ze=[Ee()],Le=[Ee()],De=[Ee()],Pe=[Ee({description:e=>{let{t:t}=e;return t(c.KV.SELECT_ALL_DESCRIPTION)},label:e=>{let{t:t}=e;return t(c.KV.SELECT_ALL_LABEL)},shortcut:o.s9.SelectAll})],_e=[Ee({description:e=>{let{t:t}=e;return t(c.KV.COPY_DESCRIPTION)},label:e=>{let{t:t}=e;return t(c.KV.COPY_LABEL)},shortcut:o.s9.Copy,icon:"fileCopyLine"})],Re=[Ee({description:e=>{let{t:t}=e;return t(c.KV.PASTE_DESCRIPTION)},label:e=>{let{t:t}=e;return t(c.KV.PASTE_LABEL)},shortcut:o.s9.Paste,icon:"clipboardLine"})],Ie=[Ee({description:e=>{let{t:t}=e;return t(c.KV.CUT_DESCRIPTION)},label:e=>{let{t:t}=e;return t(c.KV.CUT_LABEL)},shortcut:o.s9.Cut,icon:"scissorsFill"})],Ae=[Ee()],Te=[ke()],Ne=[ke()],Me=[ke()],ot){constructor(){var e;super(...arguments),e=this,X(it,5,this),Z(this,"_transaction"),Z(this,"decorated",new Map),Z(this,"forceUpdateTransaction",(function(t){const{forcedUpdates:n}=e.getCommandMeta(t);for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return e.setCommandMeta(t,{forcedUpdates:(0,r.jw)([...n,...s])}),t}))}get name(){return"commands"}get transaction(){const e=this.store.getState();this._transaction||(this._transaction=e.tr);const t=this._transaction.before.eq(e.doc),n=!(0,r.VP)(this._transaction.steps);if(!t){const t=e.tr;if(n)for(const e of this._transaction.steps)t.step(e);this._transaction=t}return this._transaction}onCreate(){this.store.setStoreKey("getForcedUpdates",this.getForcedUpdates.bind(this))}onView(e){var t,n,o;const{extensions:s,helpers:i}=this.store,a=(0,r.Ik)(),l=new Set;let c=(0,r.Ik)();const d=t=>{var n;const o=(0,r.Ik)(),s=()=>null!=t?t:this.transaction;let i=[];const l=()=>i;for(const[e,r]of Object.entries(a))(null==(n=c[e])?void 0:n.disableChaining)||(o[e]=this.chainedFactory({chain:o,command:r.original,getTr:s,getChain:l}));const h=e=>{(0,r.V1)(e===s(),{message:"Chaining currently only supports `CommandFunction` methods which do not use the `state.tr` property. Instead you should use the provided `tr` property."})};return o.run=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=i;i=[];for(const e of n)if(!e(h)&&t.exitEarly)return;e.dispatch(s())},o.tr=()=>{const e=i;i=[];for(const t of e)t(h);return s()},o.enabled=()=>{for(const e of i)if(!e())return!1;return!0},o.new=e=>d(e),o};for(const u of s){const e=null!=(n=null==(t=u.createCommands)?void 0:t.call(u))?n:{},s=null!=(o=u.decoratedCommands)?o:{},d={};c=$(K({},c),{decoratedCommands:s});for(const[t,n]of Object.entries(s)){const o=(0,r.Kg)(n.shortcut)&&n.shortcut.startsWith("_|")?{shortcut:i.getNamedShortcut(n.shortcut,u.options)}:void 0;this.updateDecorated(t,K($(K({},n),{name:u.name}),o)),e[t]=u[t].bind(u),n.active&&(d[t]=()=>{var e,t;return null!=(t=null==(e=n.active)?void 0:e.call(n,u.options,this.store))&&t})}(0,r.RI)(e)||this.addCommands({active:d,names:l,commands:a,extensionCommands:e})}const h=d();for(const[r,u]of Object.entries(h))d[r]=u;this.store.setStoreKey("commands",a),this.store.setStoreKey("chain",d),this.store.setExtensionStore("commands",a),this.store.setExtensionStore("chain",d)}onStateUpdate(e){let{state:t}=e;this._transaction=t.tr}createPlugin(){return{}}customDispatch(e){return e}insertText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.Kg)(e)?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:o,dispatch:s,state:i}=n;const a=i.schema,l=o.selection,{from:c=l.from,to:d=(null!=c?c:l.to),marks:h={}}=t;if(!s)return!0;o.insertText(e,c,d);const u=(0,r.ZY)(o.steps,o.steps.length-1).getMap().map(d);for(const[e,t]of(0,r.jO)(h))o.addMark(c,u,(0,r.ZY)(a.marks,e).create(t));return s(o),!0}}(e,t):this.store.createPlaceholderCommand({promise:e,placeholder:{type:"inline"},onSuccess:(e,n,r)=>this.insertText(e,K(K({},t),n))(r)}).generateCommand()}selectText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,dispatch:o}=n;const s=(0,i.IC)(e,r.doc);return!(r.selection.anchor===s.anchor&&r.selection.head===s.head&&!t.forceUpdate)&&(null==o||o(r.setSelection(s)),!0)}}selectMark(e){return t=>{const{tr:n}=t,r=(0,i.ve)(n.selection.$from,e);return!!r&&this.store.commands.selectText.original({from:r.from,to:r.to})(t)}}delete(e){return t=>{let{tr:n,dispatch:r}=t;const{from:o,to:s}=null!=e?e:n.selection;return null==r||r(n.delete(o,s)),!0}}emptyUpdate(e){return t=>{let{tr:n,dispatch:r}=t;return r&&(null==e||e(),r(n)),!0}}forceUpdate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let{tr:n,dispatch:r}=e;return null==r||r(this.forceUpdateTransaction(n,...t)),!0}}updateNodeAttributes(e,t){return n=>{let{tr:r,dispatch:o}=n;return null==o||o(r.setNodeMarkup(e,void 0,t)),!0}}setContent(e,t){return n=>{const{tr:r,dispatch:o}=n,s=this.store.manager.createState({content:e,selection:t});return!!s&&(null==o||o(r.replaceRangeWith(0,r.doc.nodeSize-2,s.doc)),!0)}}resetContent(){return e=>{const{tr:t,dispatch:n}=e,r=this.store.manager.createEmptyDoc();return r?this.setContent(r)(e):(null==n||n(t.delete(0,t.doc.nodeSize)),!0)}}emptySelection(){return e=>{let{tr:t,dispatch:n}=e;return!t.selection.empty&&(null==n||n(t.setSelection(h.U3.near(t.selection.$anchor))),!0)}}insertNewLine(){return e=>{let{dispatch:t,tr:n}=e;return!!(0,i.eE)(n.selection)&&(null==t||t(n.insertText("\n")),!0)}}insertNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{dispatch:s,tr:a,state:l}=n;var c,h;const{attrs:u,range:p,selection:f,replaceEmptyParentBlock:m=!1}=t,{from:g,to:y,$from:v}=(0,i.IC)(null!=(c=null!=f?f:p)?c:a.selection,a.doc);if((0,i.rQ)(e)||(0,i.nW)(e)){const t=v.before(v.depth);return null==s||s(m&&g===y&&(0,i.dT)(v.parent)?a.replaceWith(t,t+v.parent.nodeSize,e):a.replaceWith(g,y,e)),!0}const b=(0,r.Kg)(e)?l.schema.nodes[e]:e;(0,r.V1)(b,{code:o.bh.SCHEMA,message:"The requested node type ".concat(e," does not exist in the schema.")});const w=null==(h=t.marks)?void 0:h.map((e=>{if(e instanceof d.CU)return e;const t=(0,r.Kg)(e)?l.schema.marks[e]:e;return(0,r.V1)(t,{code:o.bh.SCHEMA,message:"The requested mark type ".concat(e," does not exist in the schema.")}),t.create()})),x=b.createAndFill(u,(0,r.Kg)(t.content)?l.schema.text(t.content):t.content,w);if(!x)return!1;return null==s||s(g!==y?a.replaceRangeWith(g,y,x):a.insert(g,x)),!0}}focus(e){return t=>{const{dispatch:n,tr:r}=t,{view:o}=this.store;if(!1===e)return!1;if(o.hasFocus()&&(void 0===e||!0===e))return!1;if(void 0===e||!0===e){const{from:t=0,to:n=t}=r.selection;e={from:t,to:n}}return n&&this.delayedFocus(),this.selectText(e)(t)}}blur(e){return t=>{const{view:n}=this.store;return!!n.hasFocus()&&(requestAnimationFrame((()=>{n.dom.blur()})),!e||this.selectText(e)(t))}}setBlockNodeType(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(0,i.y_)(e,t,n,r)}toggleWrappingNode(e,t,n){return(0,i.tQ)(e,t,n)}toggleBlockNodeItem(e){return(0,i.dC)(e)}wrapInNode(e,t,n){return(0,i.Im)(e,t,n)}applyMark(e,t,n){return function(e,t,n){return s=>{let{tr:a,dispatch:l,state:c}=s;const d=(0,i.IC)(null!=n?n:a.selection,a.doc),h=(0,i.BE)(d),u=(0,r.Kg)(e)?c.schema.marks[e]:e;if((0,r.V1)(u,{code:o.bh.SCHEMA,message:"Mark type: ".concat(e," does not exist on the current schema.")}),d.empty&&!h||!function(e,t,n){for(const{$from:r,$to:o}of n){let n=0===r.depth&&t.type.allowsMarkType(e);if(t.nodesBetween(r.pos,o.pos,(t=>{if(n)return!1;n=t.inlineContent&&t.type.allowsMarkType(e)})),n)return!0}return!1}(u,a.doc,d.ranges))return!1;if(!l)return!0;if(h)return a.removeStoredMark(u),t&&a.addStoredMark(u.create(t)),l(a),!0;let p=!1;for(const{$from:e,$to:t}of d.ranges){if(p)break;p=a.doc.rangeHasMark(e.pos,t.pos,u)}for(const{$from:e,$to:n}of d.ranges)p&&a.removeMark(e.pos,n.pos,u),t&&a.addMark(e.pos,n.pos,u.create(t));return l(a),!0}}(e,t,n)}toggleMark(e){return lt(e)}removeMark(e){return(0,i.i4)(e)}setMeta(e,t){return n=>{let{tr:r}=n;return r.setMeta(e,t),!0}}selectAll(){return this.selectText("all")}copy(){return e=>!e.tr.selection.empty&&(e.dispatch&&document.execCommand("copy"),!0)}paste(){return this.store.createPlaceholderCommand({promise:async()=>{var e;return(null==(e=navigator.clipboard)?void 0:e.readText)?await navigator.clipboard.readText():""},placeholder:{type:"inline"},onSuccess:(e,t,n)=>this.insertNode((0,i.FZ)({content:e,schema:n.state.schema}),{selection:t})(n)}).generateCommand()}cut(){return e=>!e.tr.selection.empty&&(e.dispatch&&document.execCommand("cut"),!0)}replaceText(e){return(0,i.ee)(e)}getAllCommandOptions(){const e={};for(const[t,n]of this.decorated)(0,r.RI)(n)||(e[t]=n);return e}getCommandOptions(e){return this.decorated.get(e)}getCommandProp(){return{tr:this.transaction,dispatch:this.store.view.dispatch,state:this.store.view.state,view:this.store.view}}updateDecorated(e,t){var n;if(!t)return void this.decorated.delete(e);const r=null!=(n=this.decorated.get(e))?n:{name:""};this.decorated.set(e,K(K({},r),t))}handleIosFocus(){i.cA.isIos&&this.store.view.dom.focus()}delayedFocus(){this.handleIosFocus(),requestAnimationFrame((()=>{this.store.view.focus(),this.store.view.dispatch(this.transaction.scrollIntoView())}))}getForcedUpdates(e){return this.getCommandMeta(e).forcedUpdates}getCommandMeta(e){var t;const n=null!=(t=e.getMeta(this.pluginKey))?t:{};return K(K({},wt),n)}setCommandMeta(e,t){const n=this.getCommandMeta(e);e.setMeta(this.pluginKey,K(K({},n),t))}addCommands(e){const{extensionCommands:t,commands:n,names:s,active:i}=e;for(const[a,l]of(0,r.jO)(t))le({name:a,set:s,code:o.bh.DUPLICATE_COMMAND_NAMES}),(0,r.V1)(!xt.has(a),{code:o.bh.DUPLICATE_COMMAND_NAMES,message:"The command name you chose is forbidden."}),n[a]=this.createUnchainedCommand(l,i[a])}unchainedFactory(e){var t=this;return function(){const{shouldDispatch:n=!0,command:r}=e,{view:o}=t.store,{state:s}=o;let i;return n&&(i=o.dispatch),r(...arguments)({state:s,dispatch:i,view:o,tr:s.tr})}}createUnchainedCommand(e,t){const n=this.unchainedFactory({command:e});return n.enabled=this.unchainedFactory({command:e,shouldDispatch:!1}),n.original=e,n.active=t,n}chainedFactory(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const{chain:s,command:i,getTr:a,getChain:l}=e,c=l(),{view:d}=t.store,{state:h}=d;return c.push((e=>i(...r)({state:h,dispatch:e,view:d,tr:a()}))),s}}};Y(it=U(ot),1,"customDispatch",rt,ct),Y(it,1,"insertText",nt,ct),Y(it,1,"selectText",tt,ct),Y(it,1,"selectMark",et,ct),Y(it,1,"delete",Qe,ct),Y(it,1,"emptyUpdate",Ze,ct),Y(it,1,"forceUpdate",Ye,ct),Y(it,1,"updateNodeAttributes",Xe,ct),Y(it,1,"setContent",qe,ct),Y(it,1,"resetContent",Je,ct),Y(it,1,"emptySelection",Ge,ct),Y(it,1,"insertNewLine",Ue,ct),Y(it,1,"insertNode",He,ct),Y(it,1,"focus",We,ct),Y(it,1,"blur",$e,ct),Y(it,1,"setBlockNodeType",Ke,ct),Y(it,1,"toggleWrappingNode",Ve,ct),Y(it,1,"toggleBlockNodeItem",Be,ct),Y(it,1,"wrapInNode",Fe,ct),Y(it,1,"applyMark",je,ct),Y(it,1,"toggleMark",ze,ct),Y(it,1,"removeMark",Le,ct),Y(it,1,"setMeta",De,ct),Y(it,1,"selectAll",Pe,ct),Y(it,1,"copy",_e,ct),Y(it,1,"paste",Re,ct),Y(it,1,"cut",Ie,ct),Y(it,1,"replaceText",Ae,ct),Y(it,1,"getAllCommandOptions",Te,ct),Y(it,1,"getCommandOptions",Ne,ct),Y(it,1,"getCommandProp",Me,ct),ct=Y(it,0,"CommandsExtension",st,ct),X(it,1,ct);var dt,ht,ut,pt,ft,mt,gt,yt,vt,bt,wt={forcedUpdates:[]},xt=new Set(["run","chain","original","raw","enabled","tr","new"]);vt=[Se({defaultOptions:{persistentSelectionClass:void 0,placeholderClassName:"placeholder",placeholderNodeName:"span"},staticKeys:["placeholderClassName","placeholderNodeName"],handlerKeys:["decorations"],handlerKeyOptions:{decorations:{reducer:{accumulator:(e,t,n)=>e.add(n.doc,t.find()),getDefault:()=>f.zF.empty}}},defaultPriority:o.OR.Low})];var St=class extends(yt=fe,gt=[Ee()],mt=[Ee()],ft=[Ee()],pt=[Ee()],ut=[Ee()],ht=[ke()],dt=[ke()],yt){constructor(){super(...arguments),X(bt,5,this),Z(this,"placeholders",f.zF.empty),Z(this,"placeholderWidgets",new Map),Z(this,"createPlaceholderCommand",(e=>{const t=(0,r.NF)(),{promise:n,placeholder:o,onFailure:s,onSuccess:i}=e;return new at(n).validate((e=>this.addPlaceholder(t,o)(e))).success((e=>{var n;const{state:r,tr:o,dispatch:a,view:l,value:c}=e,d=this.store.helpers.findPlaceholder(t);if(!d){const e=new Error("The placeholder has been removed");return null!=(n=null==s?void 0:s({error:e,state:r,tr:o,dispatch:a,view:l}))&&n}return this.removePlaceholder(t)({state:r,tr:o,view:l,dispatch:()=>{}}),i(c,d,{state:r,tr:o,dispatch:a,view:l})})).failure((e=>{var n;return this.removePlaceholder(t)($(K({},e),{dispatch:()=>{}})),null!=(n=null==s?void 0:s(e))&&n}))}))}get name(){return"decorations"}onCreate(){this.store.setExtensionStore("createPlaceholderCommand",this.createPlaceholderCommand)}createPlugin(){return{state:{init:()=>{},apply:e=>{var t,n,r,o,s,i;const{added:a,clearTrackers:l,removed:c,updated:d}=this.getMeta(e);if(l){this.placeholders=f.zF.empty;for(const[,e]of this.placeholderWidgets)null==(n=(t=e.spec).onDestroy)||n.call(t,this.store.view,e.spec.element);this.placeholderWidgets.clear()}else{this.placeholders=this.placeholders.map(e.mapping,e.doc,{onRemove:e=>{var t,n;const r=this.placeholderWidgets.get(e.id);r&&(null==(n=(t=r.spec).onDestroy)||n.call(t,this.store.view,r.spec.element))}});for(const[,e]of this.placeholderWidgets)null==(o=(r=e.spec).onUpdate)||o.call(r,this.store.view,e.from,e.spec.element,e.spec.data);for(const t of a)"inline"!==t.type?"node"!==t.type?"widget"!==t.type||this.addWidgetPlaceholder(t,e):this.addNodePlaceholder(t,e):this.addInlinePlaceholder(t,e);for(const{id:t,data:n}of d){const r=this.placeholderWidgets.get(t);if(!r)continue;const o=f.NZ.widget(r.from,r.spec.element,$(K({},r.spec),{data:n}));this.placeholders=this.placeholders.remove([r]).add(e.doc,[o]),this.placeholderWidgets.set(t,o)}for(const e of c){const t=this.placeholders.find(void 0,void 0,(t=>t.id===e&&t.__type===Mt)),n=this.placeholderWidgets.get(e);n&&(null==(i=(s=n.spec).onDestroy)||i.call(s,this.store.view,n.spec.element)),this.placeholders=this.placeholders.remove(t),this.placeholderWidgets.delete(e)}}}},props:{decorations:e=>{let t=this.options.decorations(e);t=t.add(e.doc,this.placeholders.find());for(const n of this.store.extensions){if(!n.createDecorations)continue;const r=n.createDecorations(e).find();t=t.add(e.doc,r)}return t},handleDOMEvents:{blur:e=>(this.options.persistentSelectionClass&&e.dispatch(e.state.tr.setMeta(Nt,!1)),!1),focus:e=>(this.options.persistentSelectionClass&&e.dispatch(e.state.tr.setMeta(Nt,!0)),!1)}}}}updateDecorations(){return e=>{let{tr:t,dispatch:n}=e;return null==n||n(t),!0}}addPlaceholder(e,t,n){return r=>{let{dispatch:o,tr:s}=r;return!!this.addPlaceholderTransaction(e,t,s,!o)&&(null==o||o(n?s.deleteSelection():s),!0)}}updatePlaceholder(e,t){return n=>{let{dispatch:r,tr:o}=n;return!!this.updatePlaceholderTransaction({id:e,data:t,tr:o,checkOnly:!r})&&(null==r||r(o),!0)}}removePlaceholder(e){return t=>{let{dispatch:n,tr:r}=t;return!!this.removePlaceholderTransaction({id:e,tr:r,checkOnly:!n})&&(null==n||n(r),!0)}}clearPlaceholders(){return e=>{let{tr:t,dispatch:n}=e;return!!this.clearPlaceholdersTransaction({tr:t,checkOnly:!n})&&(null==n||n(t),!0)}}findPlaceholder(e){return this.findAllPlaceholders().get(e)}findAllPlaceholders(){const e=new Map,t=this.placeholders.find(void 0,void 0,(e=>e.__type===Mt));for(const n of t)e.set(n.spec.id,{from:n.from,to:n.to});return e}createDecorations(e){var t,n,o;const{persistentSelectionClass:s}=this.options;return!s||(null==(t=this.store.view)?void 0:t.hasFocus())||(null==(o=(n=this.store.helpers).isInteracting)?void 0:o.call(n))?f.zF.empty:function(e,t,n){const{selection:r,doc:o}=e;if(r.empty)return t;const{from:s,to:a}=r,l=(0,i.BQ)(r)?f.NZ.node(s,a,n):f.NZ.inline(s,a,n);return t.add(o,[l])}(e,f.zF.empty,{class:(0,r.Kg)(s)?s:"selection"})}onApplyState(){}addWidgetPlaceholder(e,t){var n;const{pos:r,createElement:o,onDestroy:s,onUpdate:i,className:a,nodeName:l,id:c,type:d}=e,h=null!=(n=null==o?void 0:o(this.store.view,r))?n:document.createElement(l);h.classList.add(a);const u=f.NZ.widget(r,h,{id:c,__type:Mt,type:d,element:h,onDestroy:s,onUpdate:i});this.placeholderWidgets.set(c,u),this.placeholders=this.placeholders.add(t.doc,[u])}addInlinePlaceholder(e,t){const{from:n=t.selection.from,to:r=t.selection.to,className:o,nodeName:s,id:i,type:a}=e;let l;if(n===r){const e=document.createElement(s);e.classList.add(o),l=f.NZ.widget(n,e,{id:i,type:a,__type:Mt,widget:e})}else l=f.NZ.inline(n,r,{nodeName:s,class:o},{id:i,__type:Mt});this.placeholders=this.placeholders.add(t.doc,[l])}addNodePlaceholder(e,t){const{pos:n,className:o,nodeName:s,id:a}=e,l=(0,r.Et)(n)?t.doc.resolve(n):t.selection.$from,c=(0,r.Et)(n)?l.nodeAfter?{pos:n,end:l.nodeAfter.nodeSize}:void 0:(0,i.YT)(l);if(!c)return;const d=f.NZ.node(c.pos,c.end,{nodeName:s,class:o},{id:a,__type:Mt});this.placeholders=this.placeholders.add(t.doc,[d])}withRequiredBase(e,t){const{placeholderNodeName:n,placeholderClassName:r}=this.options,o=t,{nodeName:s=n,className:i}=o,a=H(o,["nodeName","className"]),l=(i?[r,i]:[r]).join(" ");return $(K({nodeName:s,className:l},a),{id:e})}getMeta(e){var t;const n=null!=(t=e.getMeta(this.pluginKey))?t:{};return K(K({},Ct),n)}setMeta(e,t){const n=this.getMeta(e);e.setMeta(this.pluginKey,K(K({},n),t))}addPlaceholderTransaction(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.findPlaceholder(e))return!1;if(r)return!0;const{added:o}=this.getMeta(n);return this.setMeta(n,{added:[...o,this.withRequiredBase(e,t)]}),!0}updatePlaceholderTransaction(e){const{id:t,tr:n,checkOnly:o=!1,data:s}=e;if(!this.findPlaceholder(t))return!1;if(o)return!0;const{updated:i}=this.getMeta(n);return this.setMeta(n,{updated:(0,r.jw)([...i,{id:t,data:s}])}),!0}removePlaceholderTransaction(e){const{id:t,tr:n,checkOnly:o=!1}=e;if(!this.findPlaceholder(t))return!1;if(o)return!0;const{removed:s}=this.getMeta(n);return this.setMeta(n,{removed:(0,r.jw)([...s,t])}),!0}clearPlaceholdersTransaction(e){const{tr:t,checkOnly:n=!1}=e;return this.getPluginState()!==f.zF.empty&&(n||this.setMeta(t,{clearTrackers:!0}),!0)}};Y(bt=U(yt),1,"updateDecorations",gt,St),Y(bt,1,"addPlaceholder",mt,St),Y(bt,1,"updatePlaceholder",ft,St),Y(bt,1,"removePlaceholder",pt,St),Y(bt,1,"clearPlaceholders",ut,St),Y(bt,1,"findPlaceholder",ht,St),Y(bt,1,"findAllPlaceholders",dt,St),St=Y(bt,0,"DecorationsExtension",vt,St),X(bt,1,St);var Ot,kt,Et,Ct={added:[],updated:[],clearTrackers:!1,removed:[]},Mt="placeholderDecoration",Nt="persistentSelectionFocus";Ot=[Se({handlerKeys:["docChanged"],handlerKeyOptions:{docChanged:{earlyReturnValue:!1}},defaultPriority:o.OR.Lowest})];var Tt,At,It,Rt,_t,Pt,Dt,Lt,zt,jt,Ft,Bt=class extends(Et=fe){get name(){return"docChanged"}onStateUpdate(e){const{firstUpdate:t,transactions:n,tr:r}=e;t||(null!=n?n:[r]).some((e=>null==e?void 0:e.docChanged))&&this.options.docChanged(e)}};kt=U(Et),Bt=Y(kt,0,"DocChangedExtension",Ot,Bt),X(kt,1,Bt),jt=[Se({})];var Vt,Kt,$t,Wt=class extends(zt=fe,Lt=[ke()],Dt=[ke()],Pt=[ke()],_t=[ke()],Rt=[Ee()],It=[ke()],At=[ke()],Tt=[ke()],zt){constructor(){super(...arguments),X(Ft,5,this)}get name(){return"helpers"}onCreate(){var e,t,n;this.store.setStringHandler("text",this.textToProsemirrorNode.bind(this)),this.store.setStringHandler("html",i.FZ);const s=(0,r.Ik)(),a=(0,r.Ik)(),l=(0,r.Ik)(),c=new Set;for(const d of this.store.extensions){we(d)&&(a[d.name]=e=>(0,i.rU)({state:this.store.getState(),type:d.type,attrs:e}),l[d.name]=e=>{var t;return null==(t=(0,i.xA)({state:this.store.getState(),type:d.type,attrs:e}))?void 0:t.node.attrs}),xe(d)&&(a[d.name]=e=>(0,i._V)({trState:this.store.getState(),type:d.type,attrs:e}),l[d.name]=e=>{const t=(0,i.ve)(this.store.getState().selection.$from,d.type);return t&&e?(0,i.PV)(t.mark,e)?t.mark.attrs:void 0:null==t?void 0:t.mark.attrs});const h=null!=(t=null==(e=d.createHelpers)?void 0:e.call(d))?t:{};for(const e of Object.keys(null!=(n=d.decoratedHelpers)?n:{}))h[e]=d[e].bind(d);if(!(0,r.RI)(h))for(const[e,t]of(0,r.jO)(h))le({name:e,set:c,code:o.bh.DUPLICATE_HELPER_NAMES}),s[e]=t}this.store.setStoreKey("attrs",l),this.store.setStoreKey("active",a),this.store.setStoreKey("helpers",s),this.store.setExtensionStore("attrs",l),this.store.setExtensionStore("active",a),this.store.setExtensionStore("helpers",s)}isSelectionEmpty(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState();return(0,i.CD)(e)}isViewEditable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState();var t,n,r;return null!=(r=null==(n=(t=this.store.view.props).editable)?void 0:n.call(t,e))&&r}getStateJSON(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState()).toJSON()}getJSON(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState()).doc.toJSON()}insertHtml(e,t){return n=>{const{state:r}=n,o=(0,i.FZ)({content:e,schema:r.schema,fragment:!0});return this.store.commands.insertNode.original(o,t)(n)}}getText(){let{lineBreakDivider:e="\n\n",state:t=this.store.getState()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.doc.textBetween(0,t.doc.content.size,e,o.yE)}getTextBetween(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.store.getState().doc).textBetween(e,t,"\n\n",o.yE)}getHTML(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState();return(0,i.tZ)(e.doc,this.store.document)}textToProsemirrorNode(e){const t="<pre>".concat(e.content,"</pre>");return this.store.stringHandlers.html($(K({},e),{content:t}))}};Y(Ft=U(zt),1,"isSelectionEmpty",Lt,Wt),Y(Ft,1,"isViewEditable",Dt,Wt),Y(Ft,1,"getStateJSON",Pt,Wt),Y(Ft,1,"getJSON",_t,Wt),Y(Ft,1,"insertHtml",Rt,Wt),Y(Ft,1,"getText",It,Wt),Y(Ft,1,"getTextBetween",At,Wt),Y(Ft,1,"getHTML",Tt,Wt),Wt=Y(Ft,0,"HelpersExtension",jt,Wt),X(Ft,1,Wt),Vt=[Se({defaultPriority:o.OR.Default,handlerKeys:["shouldSkipInputRule"],handlerKeyOptions:{shouldSkipInputRule:{earlyReturnValue:!0}}})];var Ht,Ut,Gt,Jt,qt,Xt,Yt,Zt=class extends($t=fe){get name(){return"inputRules"}onCreate(){this.store.setExtensionStore("rebuildInputRules",this.rebuildInputRules.bind(this))}createExternalPlugins(){return[this.generateInputRulesPlugin()]}generateInputRulesPlugin(){var e,t;const n=[],r=this.store.markTags[o.Wz.ExcludeInputRules];for(const o of this.store.extensions)if(!(null==(e=this.store.managerSettings.exclude)?void 0:e.inputRules)&&o.createInputRules&&!(null==(t=o.options.exclude)?void 0:t.inputRules))for(const e of o.createInputRules())e.shouldSkip=this.options.shouldSkipInputRule,e.invalidMarks=r,n.push(e);return(0,m.sM)({rules:n})}rebuildInputRules(){this.store.updateExtensionPlugins(this)}};Kt=U($t),Zt=Y(Kt,0,"InputRulesExtension",Vt,Zt),X(Kt,1,Zt),Xt=[Se({defaultPriority:o.OR.Low,defaultOptions:{shortcuts:"default",undoInputRuleOnBackspace:!0,selectParentNodeOnEscape:!1,excludeBaseKeymap:!1,exitMarksOnArrowPress:!0},customHandlerKeys:["keymap"]})];var Qt=class extends(qt=fe,Jt=[Ce({shortcut:"ArrowRight",isActive:e=>e.exitMarksOnArrowPress})],Gt=[Ce({shortcut:"ArrowLeft",isActive:e=>e.exitMarksOnArrowPress})],Ut=[Ce({shortcut:"Backspace",isActive:e=>e.exitMarksOnArrowPress})],Ht=[ke()],qt){constructor(){super(...arguments),X(Yt,5,this),Z(this,"extraKeyBindings",[]),Z(this,"backwardMarkExitTracker",new Map),Z(this,"keydownHandler",null),Z(this,"onAddCustomHandler",(e=>{let{keymap:t}=e;var n,r;if(t)return this.extraKeyBindings=[...this.extraKeyBindings,t],null==(r=(n=this.store).rebuildKeymap)||r.call(n),()=>{var e,n;this.extraKeyBindings=this.extraKeyBindings.filter((e=>e!==t)),null==(n=(e=this.store).rebuildKeymap)||n.call(e)}})),Z(this,"rebuildKeymap",(()=>{this.setupKeydownHandler()}))}get name(){return"keymap"}get shortcutMap(){const{shortcuts:e}=this.options;return(0,r.Kg)(e)?ln[e]:e}onCreate(){this.store.setExtensionStore("rebuildKeymap",this.rebuildKeymap)}createExternalPlugins(){var e;return(null==(e=this.store.managerSettings.exclude)?void 0:e.keymap)?[]:(this.setupKeydownHandler(),[new h.k_({props:{handleKeyDown:(e,t)=>{var n;return null==(n=this.keydownHandler)?void 0:n.call(this,e,t)}}})])}setupKeydownHandler(){const e=this.generateKeymapBindings();this.keydownHandler=(0,g.K)(e)}generateKeymapBindings(){var e,t,n;const s=[],a=this.shortcutMap,l=this.store.getExtension(ct),c=e=>t=>en({shortcut:t,map:a,store:this.store,options:e.options});for(const i of this.store.extensions){const d=null!=(e=i.decoratedKeybindings)?e:{};if(!(null==(t=i.options.exclude)?void 0:t.keymap)){i.createKeymap&&s.push(nn(i.createKeymap(c(i)),a));for(const[e,t]of(0,r.jO)(d)){if(t.isActive&&!t.isActive(i.options,this.store))continue;const c=i[e].bind(i),d=en({shortcut:t.shortcut,map:a,options:i.options,store:this.store}),h=(0,r.Tn)(t.priority)?t.priority(i.options,this.store):null!=(n=t.priority)?n:o.OR.Low,u=(0,r.Ik)();for(const e of d)u[e]=c;s.push([h,u]),t.command&&l.updateDecorated(t.command,{shortcut:d})}}}const d=this.sortKeymaps([...this.extraKeyBindings,...s]);return(0,i._1)(d)}arrowRightShortcut(e){const t=this.store.markTags[o.Wz.PreventExits],n=this.store.nodeTags[o.Wz.PreventExits];return this.exitMarkForwards(t,n)(e)}arrowLeftShortcut(e){const t=this.store.markTags[o.Wz.PreventExits],n=this.store.nodeTags[o.Wz.PreventExits];return(0,i.mQ)(this.exitNodeBackwards(n),this.exitMarkBackwards(t,n))(e)}backspace(e){const t=this.store.markTags[o.Wz.PreventExits],n=this.store.nodeTags[o.Wz.PreventExits];return(0,i.mQ)(this.exitNodeBackwards(n,!0),this.exitMarkBackwards(t,n,!0))(e)}createKeymap(){const{selectParentNodeOnEscape:e,undoInputRuleOnBackspace:t,excludeBaseKeymap:n}=this.options,s=(0,r.Ik)();if(!n)for(const[o,i]of(0,r.jO)(p.RV))s[o]=(0,u.lm)(i);return t&&p.RV.Backspace&&(s.Backspace=(0,u.lm)((0,p.st)(m.dv,p.RV.Backspace))),e&&(s.Escape=(0,u.lm)(p.hy)),[o.OR.Low,s]}getNamedShortcut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.startsWith("_|")?en({shortcut:e,map:this.shortcutMap,store:this.store,options:t}):[e]}onSetOptions(e){var t,n;const{changes:r}=e;(r.excludeBaseKeymap.changed||r.selectParentNodeOnEscape.changed||r.undoInputRuleOnBackspace.changed)&&(null==(n=(t=this.store).rebuildKeymap)||n.call(t))}sortKeymaps(e){return(0,r.di)(e.map((e=>(0,r.cy)(e)?e:[o.OR.Default,e])),((e,t)=>t[0]-e[0])).map((e=>e[1]))}exitMarkForwards(e,t){return n=>{const{tr:o,dispatch:s}=n;if(!(0,i.bT)(o.selection))return!1;if((0,i.tt)({selection:o.selection,types:t}))return!1;const a=o.selection.$from.marks().filter((t=>!e.includes(t.type.name)));if((0,r.VP)(a))return!1;if(!s)return!0;for(const e of a)o.removeStoredMark(e);return s(o.insertText(" ",o.selection.from)),!0}}exitNodeBackwards(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{const{tr:r}=n;if(!(t?i.i6:i.UI)(r.selection))return!1;const o=r.selection.$anchor.node();return!(!(0,i.dT)(o)||(0,i.XG)(o)||e.includes(o.type.name))&&this.store.commands.toggleBlockNodeItem.original({type:o.type})(n)}}exitMarkBackwards(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return o=>{var s;const{tr:a,dispatch:l}=o;if(!(n?i.i6:i.UI)(a.selection)||this.backwardMarkExitTracker.has(a.selection.anchor))return this.backwardMarkExitTracker.clear(),!1;if((0,i.tt)({selection:a.selection,types:t}))return!1;const c=[...null!=(s=a.storedMarks)?s:[],...a.selection.$from.marks()].filter((t=>!e.includes(t.type.name)));if((0,r.VP)(c))return!1;if(!l)return!0;for(const e of c)a.removeStoredMark(e);return this.backwardMarkExitTracker.set(a.selection.anchor,!0),l(a),!0}}};function en(e){let{shortcut:t,map:n,options:o,store:s}=e;return(0,r.Kg)(t)?[tn(t,n)]:(0,r.cy)(t)?t.map((e=>tn(e,n))):(t=t(o,s),en({shortcut:t,map:n,options:o,store:s}))}function tn(e,t){return function(e){return(0,r.mK)((0,r.zu)(o.s9),e)}(e)?t[e]:e}function nn(e,t){const n={};let o,s;(0,r.cy)(e)?[s,o]=e:o=e;for(const[i,a]of(0,r.jO)(o))n[tn(i,t)]=a;return(0,r.b0)(s)?n:[s,n]}Y(Yt=U(qt),1,"arrowRightShortcut",Jt,Qt),Y(Yt,1,"arrowLeftShortcut",Gt,Qt),Y(Yt,1,"backspace",Ut,Qt),Y(Yt,1,"getNamedShortcut",Ht,Qt),Qt=Y(Yt,0,"KeymapExtension",Xt,Qt),X(Yt,1,Qt);var rn,on,sn,an={[o.s9.Copy]:"Mod-c",[o.s9.Cut]:"Mod-x",[o.s9.Paste]:"Mod-v",[o.s9.PastePlain]:"Mod-Shift-v",[o.s9.SelectAll]:"Mod-a",[o.s9.Undo]:"Mod-z",[o.s9.Redo]:i.cA.isMac?"Shift-Mod-z":"Mod-y",[o.s9.Bold]:"Mod-b",[o.s9.Italic]:"Mod-i",[o.s9.Underline]:"Mod-u",[o.s9.Strike]:"Mod-d",[o.s9.Code]:"Mod-`",[o.s9.Paragraph]:"Mod-Shift-0",[o.s9.H1]:"Mod-Shift-1",[o.s9.H2]:"Mod-Shift-2",[o.s9.H3]:"Mod-Shift-3",[o.s9.H4]:"Mod-Shift-4",[o.s9.H5]:"Mod-Shift-5",[o.s9.H6]:"Mod-Shift-6",[o.s9.TaskList]:"Mod-Shift-7",[o.s9.BulletList]:"Mod-Shift-8",[o.s9.OrderedList]:"Mod-Shift-9",[o.s9.Quote]:"Mod->",[o.s9.Divider]:"Mod-Shift-|",[o.s9.Codeblock]:"Mod-Shift-~",[o.s9.ClearFormatting]:"Mod-Shift-C",[o.s9.Superscript]:"Mod-.",[o.s9.Subscript]:"Mod-,",[o.s9.LeftAlignment]:"Mod-Shift-L",[o.s9.CenterAlignment]:"Mod-Shift-E",[o.s9.RightAlignment]:"Mod-Shift-R",[o.s9.JustifyAlignment]:"Mod-Shift-J",[o.s9.InsertLink]:"Mod-k",[o.s9.Find]:"Mod-f",[o.s9.FindBackwards]:"Mod-Shift-f",[o.s9.FindReplace]:"Mod-Shift-H",[o.s9.AddFootnote]:"Mod-Alt-f",[o.s9.AddComment]:"Mod-Alt-m",[o.s9.ContextMenu]:"Mod-Shift-\\",[o.s9.IncreaseFontSize]:"Mod-Shift-.",[o.s9.DecreaseFontSize]:"Mod-Shift-,",[o.s9.IncreaseIndent]:"Tab",[o.s9.DecreaseIndent]:"Shift-Tab",[o.s9.Shortcuts]:"Mod-/",[o.s9.Format]:i.cA.isMac?"Alt-Shift-f":"Shift-Ctrl-f"},ln={default:an,googleDoc:$(K({},an),{[o.s9.Strike]:"Mod-Shift-S",[o.s9.Code]:"Mod-Shift-M",[o.s9.Paragraph]:"Mod-Alt-0",[o.s9.H1]:"Mod-Alt-1",[o.s9.H2]:"Mod-Alt-2",[o.s9.H3]:"Mod-Alt-3",[o.s9.H4]:"Mod-Alt-4",[o.s9.H5]:"Mod-Alt-5",[o.s9.H6]:"Mod-Alt-6",[o.s9.OrderedList]:"Mod-Alt-7",[o.s9.BulletList]:"Mod-Alt-8",[o.s9.Quote]:"Mod-Alt-9",[o.s9.ClearFormatting]:"Mod-\\",[o.s9.IncreaseIndent]:"Mod-[",[o.s9.DecreaseIndent]:"Mod-]"})},cn=class extends fe{get name(){return"nodeViews"}createPlugin(){var e;const t=[],n=(0,r.Ik)();for(const o of this.store.extensions){if(!o.createNodeViews)continue;const e=o.createNodeViews();t.unshift((0,r.Tn)(e)?{[o.name]:e}:e)}t.unshift(null!=(e=this.store.managerSettings.nodeViews)?e:{});for(const r of t)Object.assign(n,r);return{props:{nodeViews:n}}}},dn=class extends fe{get name(){return"pasteRules"}createExternalPlugins(){return[this.generatePasteRulesPlugin()]}generatePasteRulesPlugin(){var e,t;const n=[];for(const o of this.store.extensions){if((null==(e=this.store.managerSettings.exclude)?void 0:e.pasteRules)||!o.createPasteRules||(null==(t=o.options.exclude)?void 0:t.pasteRules))continue;const s=o.createPasteRules(),i=(0,r.cy)(s)?s:[s];n.push(...i)}return y(n)}};rn=[Se({defaultPriority:o.OR.Highest,handlerKeys:["applyState","appendTransaction"]})];var hn,un,pn,fn=class extends(sn=fe){constructor(){super(...arguments),Z(this,"plugins",[]),Z(this,"managerPlugins",[]),Z(this,"applyStateHandlers",[]),Z(this,"initStateHandlers",[]),Z(this,"appendTransactionHandlers",[]),Z(this,"pluginKeys",(0,r.Ik)()),Z(this,"stateGetters",new Map),Z(this,"getPluginStateCreator",(e=>t=>e.getState(null!=t?t:this.store.getState()))),Z(this,"getStateByName",(e=>{const t=this.stateGetters.get(e);return(0,r.V1)(t,{message:"No plugin exists for the requested extension name."}),t()}))}get name(){return"plugins"}onCreate(){const{setStoreKey:e,setExtensionStore:t,managerSettings:n,extensions:r}=this.store;this.updateExtensionStore();const{plugins:o=[]}=n;this.updatePlugins(o,this.managerPlugins);for(const s of r)s.onApplyState&&this.applyStateHandlers.push(s.onApplyState.bind(s)),s.onInitState&&this.initStateHandlers.push(s.onInitState.bind(s)),s.onAppendTransaction&&this.appendTransactionHandlers.push(s.onAppendTransaction.bind(s)),this.extractExtensionPlugins(s);this.managerPlugins=o,this.store.setStoreKey("plugins",this.plugins),e("pluginKeys",this.pluginKeys),e("getPluginState",this.getStateByName),t("getPluginState",this.getStateByName)}createPlugin(){return{appendTransaction:(e,t,n)=>{const r=n.tr,o={previousState:t,tr:r,transactions:e,state:n};for(const s of this.appendTransactionHandlers)s(o);return this.options.appendTransaction(o),r.docChanged||r.steps.length>0||r.selectionSet||r.storedMarksSet?r:void 0},state:{init:(e,t)=>{for(const n of this.initStateHandlers)n(t)},apply:(e,t,n,r)=>{const o={previousState:n,state:r,tr:e};for(const s of this.applyStateHandlers)s(o);this.options.applyState(o)}}}}extractExtensionPlugins(e){var t,n;if(!(!e.createPlugin&&!e.createExternalPlugins||(null==(t=this.store.managerSettings.exclude)?void 0:t.plugins)||(null==(n=e.options.exclude)?void 0:n.plugins))){if(e.createPlugin){const t=new h.hs(e.name);this.pluginKeys[e.name]=t;const n=this.getPluginStateCreator(t);e.pluginKey=t,e.getPluginState=n,this.stateGetters.set(e.name,n),this.stateGetters.set(e.constructor,n);const r=$(K({},e.createPlugin()),{key:t}),o=new h.k_(r);this.updatePlugins([o],e.plugin?[e.plugin]:void 0),e.plugin=o}if(e.createExternalPlugins){const t=e.createExternalPlugins();this.updatePlugins(t,e.externalPlugins),e.externalPlugins=t}}}updatePlugins(e,t){if(!t||(0,r.VP)(t))return void(this.plugins=[...this.plugins,...e]);if(e.length!==t.length)return void(this.plugins=[...this.plugins.filter((e=>!t.includes(e))),...e]);const n=new Map;for(const[o,s]of e.entries())n.set((0,r.ZY)(t,o),s);this.plugins=this.plugins.map((e=>t.includes(e)?n.get(e):e))}updateExtensionStore(){const{setExtensionStore:e}=this.store;e("updatePlugins",this.updatePlugins.bind(this)),e("dispatchPluginUpdate",this.dispatchPluginUpdate.bind(this)),e("updateExtensionPlugins",this.updateExtensionPlugins.bind(this))}updateExtensionPlugins(e){const t=ve(e)?e:function(e){return(0,i.nw)(e)&&(0,i.fW)(e,[o.OW.PlainExtensionConstructor,o.OW.MarkExtensionConstructor,o.OW.NodeExtensionConstructor])}(e)?this.store.manager.getExtension(e):this.store.extensions.find((t=>t.name===e));(0,r.V1)(t,{code:o.bh.INVALID_MANAGER_EXTENSION,message:"The extension ".concat(e," does not exist within the editor.")}),this.extractExtensionPlugins(t),this.store.setStoreKey("plugins",this.plugins),this.dispatchPluginUpdate()}dispatchPluginUpdate(){(0,r.V1)(this.store.phase>=o.bC.EditorView,{code:o.bh.MANAGER_PHASE_ERROR,message:"`dispatchPluginUpdate` should only be called after the view has been added to the manager."});const{view:e,updateState:t}=this.store;t(e.state.reconfigure({plugins:this.plugins}))}};on=U(sn),fn=Y(on,0,"PluginsExtension",rn,fn),X(on,1,fn),hn=[Se({defaultPriority:o.OR.Highest})];var mn,gn,yn,vn,bn,wn,xn=class extends(pn=fe){constructor(){super(...arguments),Z(this,"dynamicAttributes",{marks:(0,r.Ik)(),nodes:(0,r.Ik)()})}get name(){return"schema"}onCreate(){var e;const{managerSettings:t,tags:n,markNames:s,nodeNames:i,extensions:a}=this.store,{defaultBlockNode:l,disableExtraAttributes:c,nodeOverride:h,markOverride:u}=t;if(t.schema){const{nodes:e,marks:n}=function(e){const t=(0,r.Ik)(),n=(0,r.Ik)();for(const[r,o]of Object.entries(e.nodes))t[r]=o.spec;for(const[r,o]of Object.entries(e.marks))n[r]=o.spec;return{nodes:t,marks:n}}(t.schema);return void this.addSchema(t.schema,e,n)}const p=(f=l)&&n[o.Wz.Block].includes(f)?{doc:(0,r.Ik)(),[l]:(0,r.Ik)()}:(0,r.Ik)();var f;const m=(0,r.Ik)(),g=function(e){var t,n;const{settings:o,gatheredSchemaAttributes:s,nodeNames:i,markNames:a,tags:l}=e,c=(0,r.Ik)();if(o.disableExtraAttributes)return c;const d=[...s,...null!=(t=o.extraAttributes)?t:[]];for(const r of null!=d?d:[]){const e=Sn({identifiers:r.identifiers,nodeNames:i,markNames:a,tags:l});for(const t of e){const e=null!=(n=c[t])?n:{};c[t]=K(K({},e),r.attributes)}}return c}({settings:t,gatheredSchemaAttributes:this.gatherExtraAttributes(a),nodeNames:i,markNames:s,tags:n});for(const o of a){g[o.name]=K(K({},g[o.name]),o.options.extraAttributes);const t=!0===c||!0===o.options.disableExtraAttributes||!0===o.constructor.disableExtraAttributes;if(we(o)){const{spec:e,dynamic:n}=On({createExtensionSpec:(e,t)=>o.createNodeSpec(e,t),extraAttributes:(0,r.ZY)(g,o.name),override:K(K({},h),o.options.nodeOverride),ignoreExtraAttributes:t,name:o.constructorName,tags:o.tags});o.spec=e,p[o.name]=e,Object.keys(n).length>0&&(this.dynamicAttributes.nodes[o.name]=n)}if(xe(o)){const{spec:n,dynamic:s}=On({createExtensionSpec:(e,t)=>o.createMarkSpec(e,t),extraAttributes:(0,r.ZY)(g,o.name),override:K(K({},u),o.options.markOverride),ignoreExtraAttributes:t,name:o.constructorName,tags:null!=(e=o.tags)?e:[]});o.spec=n,m[o.name]=n,Object.keys(s).length>0&&(this.dynamicAttributes.marks[o.name]=s)}}const y=new d.Sj({nodes:p,marks:m,topNode:"doc"});this.addSchema(y,p,m)}createPlugin(){return{appendTransaction:(e,t,n)=>{const{tr:r}=n;return e.some((e=>e.docChanged))?0===Object.keys(this.dynamicAttributes.nodes).length&&0===Object.keys(this.dynamicAttributes.marks).length?null:(r.doc.descendants(((e,t)=>(this.checkAndUpdateDynamicNodes(e,t,r),this.checkAndUpdateDynamicMarks(e,t,r),!0))),r.steps.length>0?r:null):null}}}addSchema(e,t,n){this.store.setStoreKey("nodes",t),this.store.setStoreKey("marks",n),this.store.setStoreKey("schema",e),this.store.setExtensionStore("schema",e),this.store.setStoreKey("defaultBlockNode",(0,i.xo)(e).name);for(const r of Object.values(e.nodes))if("doc"!==r.name&&(r.isBlock||r.isTextblock))break}checkAndUpdateDynamicNodes(e,t,n){for(const[o,s]of(0,r.jO)(this.dynamicAttributes.nodes))if(e.type.name===o)for(const[i,a]of(0,r.jO)(s)){if(!(0,r.hX)(e.attrs[i]))continue;const o=$(K({},e.attrs),{[i]:a(e)});n.setNodeMarkup(t,void 0,o),(0,N.$n)(n)}}checkAndUpdateDynamicMarks(e,t,n){for(const[o,s]of(0,r.jO)(this.dynamicAttributes.marks)){const a=(0,r.ZY)(this.store.schema.marks,o),l=e.marks.find((e=>e.type.name===o));if(l)for(const[e,o]of(0,r.jO)(s)){if(!(0,r.hX)(l.attrs[e]))continue;const s=(0,i.ve)(n.doc.resolve(t),a);if(!s)continue;const{from:c,to:d}=s,h=a.create($(K({},l.attrs),{[e]:o(l)}));n.removeMark(c,d,a).addMark(c,d,h),(0,N.$n)(n)}}}gatherExtraAttributes(e){const t=[];for(const n of e)n.createSchemaAttributes&&t.push(...n.createSchemaAttributes());return t}};function Sn(e){var t;const{identifiers:n,nodeNames:s,markNames:i,tags:a}=e;if("nodes"===n)return s;if("marks"===n)return i;if("all"===n)return[...s,...i];if((0,r.cy)(n))return n;var l;(0,r.V1)((l=n,(0,r.Qd)(l)&&(0,r.cy)(l.tags)),{code:o.bh.EXTENSION_EXTRA_ATTRIBUTES,message:"Invalid value passed as an identifier when creating `extraAttributes`."});const{tags:c=[],names:d=[],behavior:h="any",excludeNames:u,excludeTags:p,type:f}=n,m=new Set,g="mark"===f?i:"node"===f?s:[...i,...s],y=e=>g.includes(e)&&!(null==u?void 0:u.includes(e));for(const r of d)y(r)&&m.add(r);const v=new Map;for(const r of c)if(!(null==p?void 0:p.includes(r)))for(const e of a[r]){if(!y(e))continue;if("any"===h){m.add(e);continue}const n=null!=(t=v.get(e))?t:new Set;n.add(r),v.set(e,n)}for(const[r,o]of v)o.size===c.length&&m.add(r);return[...m]}function On(e){var t,n;const{createExtensionSpec:s,extraAttributes:a,ignoreExtraAttributes:l,name:c,tags:d,override:h}=e,u=(0,r.Ik)();let p=!1;const f=function(e,t,n,o){return()=>{n();const s=(0,r.Ik)();if(t)return s;for(const[t,n]of(0,r.jO)(e)){let e=kn(n).default;(0,r.Tn)(e)&&(o(t,e),e=null),s[t]=void 0===e?{}:{default:e}}return s}}(a,l,(function(){p=!0}),(function(e,t){u[e]=t})),m=function(e,t){return n=>{var o,s,a;const l=(0,r.Ik)();if(t)return l;for(const[t,c]of(0,r.jO)(e)){const e=kn(c),{parseDOM:d}=e,h=H(e,["parseDOM"]);(0,i.hm)(n)&&((0,r.hX)(d)?l[t]=null!=(o=n.getAttribute(t))?o:h.default:(0,r.Tn)(d)?l[t]=null!=(s=d(n))?s:h.default:l[t]=null!=(a=n.getAttribute(d))?a:h.default)}return l}}(a,l),g=function(e,t){return n=>{const o=(0,r.Ik)();if(t)return o;function s(e,t){if(e)if((0,r.Kg)(e))o[t]=e;else if((0,r.cy)(e)){const[r,s]=e;o[r]=null!=s?s:n.attrs[t]}else for(const[n,s]of(0,r.jO)(e))o[n]=s}for(const[t,i]of(0,r.jO)(e)){const{toDOM:e,parseDOM:a}=kn(i);if((0,r.hX)(e)){const e=(0,r.Kg)(a)?a:t;o[e]=n.attrs[t]}else(0,r.Tn)(e)?s(e(n.attrs,En(n)),t):s(e,t)}return o}}(a,l),y=s({defaults:f,parse:m,dom:g},h);return(0,r.V1)(l||p,{code:o.bh.EXTENSION_SPEC,message:"When creating a node specification you must call the 'defaults', and parse, and 'dom' methods. To avoid this error you can set the static property 'disableExtraAttributes' of '".concat(c,"' to 'true'.")}),y.group=[...null!=(n=null==(t=y.group)?void 0:t.split(" "))?n:[],...d].join(" ")||void 0,{spec:y,dynamic:u}}function kn(e){return(0,r.Kg)(e)||(0,r.Tn)(e)?{default:e}:((0,r.V1)(e,{message:"".concat((0,r.dI)(e)," is not supported"),code:o.bh.EXTENSION_EXTRA_ATTRIBUTES}),e)}function En(e){return(0,i.rQ)(e)?{node:e}:(0,i.wm)(e)?{mark:e}:{}}un=U(pn),xn=Y(un,0,"SchemaExtension",hn,xn),X(un,1,xn),bn=[Se({customHandlerKeys:["suggester"]})];var Cn,Mn,Nn,Tn=class extends(vn=fe,yn=[ke()],gn=[ke()],mn=[ke()],vn){constructor(){super(...arguments),X(wn,5,this),Z(this,"onAddCustomHandler",(e=>{let{suggester:t}=e;var n;if(t&&!(null==(n=this.store.managerSettings.exclude)?void 0:n.suggesters))return(0,N.B4)(this.store.getState(),t)}))}get name(){return"suggest"}onCreate(){this.store.setExtensionStore("addSuggester",(e=>(0,N.B4)(this.store.getState(),e))),this.store.setExtensionStore("removeSuggester",(e=>(0,N.Wx)(this.store.getState(),e)))}createExternalPlugins(){var e,t;const n=[];for(const o of this.store.extensions){if(null==(e=this.store.managerSettings.exclude)?void 0:e.suggesters)break;if(!o.createSuggesters||(null==(t=o.options.exclude)?void 0:t.suggesters))continue;const s=o.createSuggesters(),i=(0,r.cy)(s)?s:[s];n.push(...i)}return[(0,N.ZA)(...n)]}getSuggestState(e){return(0,N.Hr)(null!=e?e:this.store.getState())}getSuggestMethods(){const{addIgnored:e,clearIgnored:t,removeIgnored:n,ignoreNextExit:r,setMarkRemoved:o,findMatchAtPosition:s,findNextTextSelection:i,setLastChangeFromAppend:a}=this.getSuggestState();return{addIgnored:e,clearIgnored:t,removeIgnored:n,ignoreNextExit:r,setMarkRemoved:o,findMatchAtPosition:s,findNextTextSelection:i,setLastChangeFromAppend:a}}isSuggesterActive(e){var t;return(0,r.mK)((0,r.cy)(e)?e:[e],null==(t=this.getSuggestState().match)?void 0:t.suggester.name)}};Y(wn=U(vn),1,"getSuggestState",yn,Tn),Y(wn,1,"getSuggestMethods",gn,Tn),Y(wn,1,"isSuggesterActive",mn,Tn),Tn=Y(wn,0,"SuggestExtension",bn,Tn),X(wn,1,Tn),Cn=[Se({defaultPriority:o.OR.Highest})];var An=class extends(Nn=fe){constructor(){super(...arguments),Z(this,"allTags",(0,r.Ik)()),Z(this,"plainTags",(0,r.Ik)()),Z(this,"markTags",(0,r.Ik)()),Z(this,"nodeTags",(0,r.Ik)())}get name(){return"tags"}onCreate(){this.resetTags();for(const e of this.store.extensions)this.updateTagForExtension(e);this.store.setStoreKey("tags",this.allTags),this.store.setExtensionStore("tags",this.allTags),this.store.setStoreKey("plainTags",this.plainTags),this.store.setExtensionStore("plainTags",this.plainTags),this.store.setStoreKey("markTags",this.markTags),this.store.setExtensionStore("markTags",this.markTags),this.store.setStoreKey("nodeTags",this.nodeTags),this.store.setExtensionStore("nodeTags",this.nodeTags)}resetTags(){const e=(0,r.Ik)(),t=(0,r.Ik)(),n=(0,r.Ik)(),s=(0,r.Ik)();for(const i of(0,r.zu)(o.Wz))e[i]=[],t[i]=[],n[i]=[],s[i]=[];this.allTags=e,this.plainTags=t,this.markTags=n,this.nodeTags=s}updateTagForExtension(e){var t,n,s,i,a,l;const c=new Set([...null!=(t=e.tags)?t:[],...null!=(s=null==(n=e.createTags)?void 0:n.call(e))?s:[],...null!=(i=e.options.extraTags)?i:[],...null!=(l=null==(a=this.store.managerSettings.extraTags)?void 0:a[e.name])?l:[]]);for(const h of c)(0,r.V1)((d=h,(0,r.mK)((0,r.zu)(o.Wz),d)),{code:o.bh.EXTENSION,message:"The tag provided by the extension: ".concat(e.constructorName," is not supported by the editor. To add custom tags you can use the 'mutateTag' method.")}),this.allTags[h].push(e.name),be(e)&&this.plainTags[h].push(e.name),xe(e)&&this.markTags[h].push(e.name),we(e)&&this.nodeTags[h].push(e.name);var d;e.tags=[...c]}};Mn=U(Nn),An=Y(Mn,0,"TagsExtension",Cn,An),X(Mn,1,An);var In=new h.hs("remirrorFilePlaceholderPlugin");function Rn(){const e=new h.k_({key:In,state:{init:()=>({set:f.zF.empty,payloads:new Map}),apply(t,n){let{set:r,payloads:o}=n;r=r.map(t.mapping,t.doc);const s=t.getMeta(e);if(s)if(0===s.type){const e=document.createElement("placeholder"),n=f.NZ.widget(s.pos,e,{id:s.id});r=r.add(t.doc,[n]),o.set(s.id,s.payload)}else 1===s.type&&(r=r.remove(r.find(void 0,void 0,(e=>e.id===s.id))),o.delete(s.id));return{set:r,payloads:o}}},props:{decorations(t){var n,r;return null!=(r=null==(n=e.getState(t))?void 0:n.set)?r:null}}});return e}var _n,Pn,Dn,Ln=class extends fe{get name(){return"upload"}createExternalPlugins(){return[Rn()]}};function zn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={exitMarksOnArrowPress:Qt.defaultOptions.exitMarksOnArrowPress,excludeBaseKeymap:Qt.defaultOptions.excludeBaseKeymap,selectParentNodeOnEscape:Qt.defaultOptions.selectParentNodeOnEscape,undoInputRuleOnBackspace:Qt.defaultOptions.undoInputRuleOnBackspace,persistentSelectionClass:St.defaultOptions.persistentSelectionClass};e=K(K({},t),e);const n=l(e,["excludeBaseKeymap","selectParentNodeOnEscape","undoInputRuleOnBackspace"]),r=l(e,["persistentSelectionClass"]);return[new An,new xn,new Oe,new fn,new Zt,new dn,new cn,new Tn,new ct,new Wt,new Qt(n),new Bt,new Ln,new St(r)]}_n=[Se({defaultOptions:{capture:i.cA.isDevelopment},staticKeys:["capture"],defaultPriority:o.OR.Highest})];var jn,Fn,Bn,Vn,Kn,$n,Wn,Hn=class extends(Dn=fe){get name(){return"meta"}onCreate(){if(this.store.setStoreKey("getCommandMeta",this.getCommandMeta.bind(this)),this.options.capture)for(const e of this.store.extensions)this.captureCommands(e),this.captureKeybindings(e)}createPlugin(){return{}}captureCommands(e){var t,n=this;const r=null!=(t=e.decoratedCommands)?t:{},o=e.createCommands;for(const s of Object.keys(r)){const t=e[s];e[s]=function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return r=>{var i;const a=t(...o)(r);return r.dispatch&&a&&n.setCommandMeta(r.tr,{type:"command",chain:r.dispatch!==(null==(i=r.view)?void 0:i.dispatch),name:s,extension:e.name,decorated:!0}),a}}}o&&(e.createCommands=()=>{const t=o();for(const[r,o]of Object.entries(t))t[r]=function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return t=>{var i;const a=o(...s)(t);return t.dispatch&&a&&n.setCommandMeta(t.tr,{type:"command",chain:t.dispatch!==(null==(i=t.view)?void 0:i.dispatch),name:r,extension:e.name,decorated:!1}),a}};return t})}captureKeybindings(e){}getCommandMeta(e){var t;return null!=(t=e.getMeta(this.pluginKey))?t:[]}setCommandMeta(e,t){const n=this.getCommandMeta(e);e.setMeta(this.pluginKey,[...n,t])}};Hn=Y(Pn=U(Dn),0,"MetaExtension",_n,Hn),X(Pn,1,Hn);var Un,Gn,Jn,qn,Xn,Yn,Zn,Qn,er,tr,nr,rr,or,sr=class{constructor(e){var t=this;ne(this,jn,(0,r.NF)()),ne(this,Fn),ne(this,Bn),Z(this,"previousStateOverride"),ne(this,Vn,!0),ne(this,Kn,(0,T.G)()),ne(this,$n),ne(this,Wn),Z(this,"getState",(()=>{var e;return null!=(e=this.view.state)?e:this.initialEditorState})),Z(this,"getPreviousState",(()=>this.previousState)),Z(this,"dispatchTransaction",(e=>{var t,n,s;(0,r.V1)(!this.manager.destroyed,{code:o.bh.MANAGER_PHASE_ERROR,message:"A transaction was dispatched to a manager that has already been destroyed. Please check your set up, or open an issue."}),e=null!=(s=null==(n=(t=this.props).onDispatchTransaction)?void 0:n.call(t,e,this.getState()))?s:e;const i=this.getState(),{state:a,transactions:l}=i.applyTransaction(e);re(this,Bn,i),this.updateState({state:a,tr:e,transactions:l});const c=this.manager.store.getForcedUpdates(e);(0,r.VP)(c)||this.updateViewProps(...c)})),Z(this,"onChange",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Ik)();var n,o;const s=t.eventListenerProps(e);te(t,Vn)&&re(t,Vn,!1),null==(o=(n=t.props).onChange)||o.call(n,s)})),Z(this,"onBlur",(e=>{var t,n;const r=this.eventListenerProps();null==(n=(t=this.props).onBlur)||n.call(t,r,e),te(this,Kn).emit("blur",r,e)})),Z(this,"onFocus",(e=>{var t,n;const r=this.eventListenerProps();null==(n=(t=this.props).onFocus)||n.call(t,r,e),te(this,Kn).emit("focus",r,e)})),Z(this,"setContent",(function(e){let{triggerChange:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{doc:r}=t.manager.createState({content:e}),o=t.getState(),{state:s}=t.getState().applyTransaction(o.tr.replaceRangeWith(0,o.doc.nodeSize-2,r));if(n)return t.updateState({state:s,triggerChange:n});t.view.updateState(s)})),Z(this,"clearContent",(function(){let{triggerChange:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.setContent(t.manager.createEmptyDoc(),{triggerChange:e})})),Z(this,"createStateFromContent",((e,t)=>this.manager.createState({content:e,selection:t}))),Z(this,"focus",(e=>{this.manager.store.commands.focus(e)})),Z(this,"blur",(e=>{this.manager.store.commands.blur(e)}));const{getProps:n,initialEditorState:s,element:i}=e;if(re(this,Fn,n),re(this,Wn,s),this.manager.attachFramework(this,this.updateListener.bind(this)),this.manager.view)return;const a=this.createView(s,i);this.manager.addView(a)}get addHandler(){var e;return null!=(e=te(this,$n))?e:re(this,$n,te(this,Kn).on.bind(te(this,Kn)))}get updatableViewProps(){return{attributes:()=>this.getAttributes(),editable:()=>{var e;return null==(e=this.props.editable)||e}}}get firstRender(){return te(this,Vn)}get props(){return te(this,Fn).call(this)}get previousState(){var e,t;return null!=(t=null!=(e=this.previousStateOverride)?e:te(this,Bn))?t:this.initialEditorState}get manager(){return this.props.manager}get view(){return this.manager.view}get uid(){return te(this,jn)}get initialEditorState(){return te(this,Wn)}updateListener(e){const{state:t,tr:n}=e;return te(this,Kn).emit("updated",this.eventListenerProps({state:t,tr:n}))}update(e){const{getProps:t}=e;return re(this,Fn,t),this}updateViewProps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=l(this.updatableViewProps,t);this.view.setProps(K(K({},this.view.props),r))}getAttributes(e){var t;const{attributes:n,autoFocus:o,classNames:s=[],label:i,editable:a}=this.props,l=null==(t=this.manager.store)?void 0:t.attributes,c=(0,r.Tn)(n)?n(this.eventListenerProps()):n;let d={};(o||(0,r.Et)(o))&&(d=e?{autoFocus:!0}:{autofocus:"true"});const h=(0,r.jw)((0,r.cx)(e&&"Prosemirror","remirror-editor",null==l?void 0:l.class,...s).split(" ")).join(" "),u=$(K($(K($(K({role:"textbox"},d),{"aria-multiline":"true"}),null==a||a?{}:{"aria-readonly":"true"}),{"aria-label":null!=i?i:""}),l),{class:h});return(0,r.Oy)(K(K({},u),c))}addFocusListeners(){this.view.dom.addEventListener("blur",this.onBlur),this.view.dom.addEventListener("focus",this.onFocus)}removeFocusListeners(){this.view.dom.removeEventListener("blur",this.onBlur),this.view.dom.removeEventListener("focus",this.onFocus)}destroy(){te(this,Kn).emit("destroy"),this.view&&this.removeFocusListeners()}eventListenerProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Ik)();const{state:t,tr:n,transactions:o}=e;return{tr:n,transactions:o,internalUpdate:!n,view:this.view,firstRender:te(this,Vn),state:null!=t?t:this.getState(),createStateFromContent:this.createStateFromContent,previousState:this.previousState,helpers:this.manager.store.helpers}}get baseOutput(){return $(K({manager:this.manager},this.manager.store),{addHandler:this.addHandler,focus:this.focus,blur:this.blur,uid:te(this,jn),view:this.view,getState:this.getState,getPreviousState:this.getPreviousState,getExtension:this.manager.getExtension.bind(this.manager),hasExtension:this.manager.hasExtension.bind(this.manager),clearContent:this.clearContent,setContent:this.setContent})}};function ir(e,t){var n;const{gatheredExtensions:s,duplicateMap:i,parentExtensions:a,settings:l}=e,{extension:c,parentExtension:d}=t;let{names:h=[]}=t;(0,r.V1)(ve(c),{code:o.bh.INVALID_MANAGER_EXTENSION,message:"An invalid extension: ".concat(c," was provided to the [[`RemirrorManager`]].")});const u=c.extensions;if(c.setPriority(null==(n=l.priority)?void 0:n[c.name]),s.push(c),function(e){const{duplicateMap:t,extension:n,parentExtension:r}=e,o=n.constructor,s=t.get(o),i=r?[r]:[];t.set(o,s?[...s,...i]:i)}({duplicateMap:i,extension:c,parentExtension:d}),0!==u.length)if(h.includes(c.name))A(!1,"Circular dependency encountered when loading extensions: ".concat(h.join(" > ")," > ").concat(c.name));else{h=[...h,c.name],a.push(c);for(const t of u)ir(e,{names:h,extension:t,parentExtension:c})}}function ar(e){var t;const{extension:n,found:r,missing:o}=e;if(n.requiredExtensions)for(const s of null!=(t=n.requiredExtensions)?t:[])r.has(s)||o.push({Constructor:s,extension:n})}function lr(e){var t,n,r,o;const{extension:s,nodeNames:i,markNames:a,plainNames:l,store:c,handlers:d}=e;s.setStore(c);const h=null==(t=s.onCreate)?void 0:t.bind(s),u=null==(n=s.onView)?void 0:n.bind(s),p=null==(r=s.onStateUpdate)?void 0:r.bind(s),f=null==(o=s.onDestroy)?void 0:o.bind(s);h&&d.create.push(h),u&&d.view.push(u),p&&d.update.push(p),f&&d.destroy.push(f),xe(s)&&a.push(s.name),we(s)&&"doc"!==s.name&&i.push(s.name),be(s)&&l.push(s.name)}jn=new WeakMap,Fn=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,Kn=new WeakMap,$n=new WeakMap,Wn=new WeakMap;var cr=class e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ne(this,Un),ne(this,Gn,(0,r.Ik)()),ne(this,Jn,(0,r.Ik)()),ne(this,qn),ne(this,Xn),ne(this,Yn,o.bC.None),ne(this,Zn),ne(this,Qn,!0),ne(this,er,{create:[],view:[],update:[],destroy:[]}),ne(this,tr,[]),ne(this,nr,(0,T.G)()),ne(this,rr),ne(this,or),Z(this,"getState",(()=>{var e;return te(this,Yn)>=o.bC.EditorView?this.view.state:((0,r.V1)(te(this,rr),{code:o.bh.MANAGER_PHASE_ERROR,message:"`getState` can only be called after the `Framework` or the `EditorView` has been added to the manager`. Check your plugins to make sure that the decorations callback uses the state argument."}),null==(e=te(this,rr))?void 0:e.initialEditorState)})),Z(this,"updateState",(e=>{const t=this.getState();this.view.updateState(e),this.onStateUpdate({previousState:t,state:e})}));const{extensions:n,extensionMap:s}=function(e,t){const n=[],s=new WeakMap,i=new WeakMap;let a=[];const l={duplicateMap:i,parentExtensions:[],gatheredExtensions:a,settings:t};for(const r of e)ir(l,{extension:r});a=(0,r.di)(a,((e,t)=>t.priority-e.priority));const c=new WeakSet,d=new Set;for(const u of a){const e=u.constructor,t=u.name,a=i.get(e);(0,r.V1)(a,{message:"No entries were found for the ExtensionConstructor ".concat(u.name),code:o.bh.INTERNAL}),c.has(e)||d.has(t)||(c.add(e),d.add(t),n.push(u),s.set(e,u),a.forEach((t=>null==t?void 0:t.replaceChildExtension(e,u))))}const h=[];for(const r of n)ar({extension:r,found:c,missing:h});return(0,r.V1)((0,r.VP)(h),{code:o.bh.MISSING_REQUIRED_EXTENSION,message:h.map((e=>{let{Constructor:t,extension:n}=e;return"The extension '".concat(n.name,"' requires '").concat(t.name," in order to run correctly.")})).join("\n")}),{extensions:n,extensionMap:s}}(e,t);re(this,Zn,t),re(this,qn,(0,r.CN)(n)),re(this,Xn,s),re(this,Un,this.createExtensionStore()),re(this,Yn,o.bC.Create),this.setupLifecycleHandlers();for(const r of te(this,er).create){const e=r();e&&te(this,tr).push(e)}}static create(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e([...(0,r.Y)(t),...zn(n.builtin)],n)}get[o.VX](){return o.OW.Manager}get destroyed(){return te(this,Yn)===o.bC.Destroy}get mounted(){return te(this,Yn)>=o.bC.EditorView&&te(this,Yn)<o.bC.Destroy}get output(){var e;return null==(e=te(this,rr))?void 0:e.frameworkOutput}get frameworkAttached(){return!!te(this,rr)}get extensions(){return te(this,qn)}get stringHandlers(){return te(this,Gn)}get store(){return(0,r.CN)(te(this,Jn))}get extensionStore(){return(0,r.CN)(te(this,Un))}get tr(){return this.getExtension(ct).transaction}get nodes(){return te(this,Jn).nodes}get marks(){return te(this,Jn).marks}get schema(){return te(this,Jn).schema}get extensionTags(){return te(this,Jn).tags}get view(){return te(this,Jn).view}get settings(){return te(this,Zn)}get document(){var e;return null!=(e=te(this,Zn).document)?e:(0,i.YE)()}setupLifecycleHandlers(){const e=te(this,Un),t=te(this,er),n=[],r=[],o=[];e.nodeNames=n,e.markNames=r,e.plainNames=o;for(const s of te(this,qn))lr({extension:s,nodeNames:n,markNames:r,plainNames:o,handlers:t,store:e})}setStringHandler(e,t){te(this,Gn)[e]=t}setStoreKey(e,t){te(this,Jn)[e]=t}getStoreKey(e){const t=te(this,Jn)[e];return(0,r.V1)(!(0,r.hX)(t),{code:o.bh.MANAGER_PHASE_ERROR,message:"`getStoreKey` should not be called before the values are available."}),t}setExtensionStore(e,t){(0,r.V1)(te(this,Yn)<=o.bC.EditorView,{code:o.bh.MANAGER_PHASE_ERROR,message:"`setExtensionStore` should only be called during the `onCreate` lifecycle hook. Make sure to only call it within the returned methods."}),te(this,Un)[e]=t}createExtensionStore(){const e=(0,r.Ik)(),t=!0;let n,o;return Object.defineProperties(e,{extensions:{get:()=>te(this,qn),enumerable:t},phase:{get:()=>te(this,Yn),enumerable:t},view:{get:()=>this.view,enumerable:t},managerSettings:{get:()=>(0,r.CN)(te(this,Zn)),enumerable:t},getState:{value:this.getState,enumerable:t},updateState:{value:this.updateState,enumerable:t},isMounted:{value:()=>this.mounted,enumerable:t},getExtension:{value:this.getExtension.bind(this),enumerable:t},manager:{get:()=>this,enumerable:t},document:{get:()=>this.document,enumerable:t},stringHandlers:{get:()=>te(this,Gn),enumerable:t},currentState:{get:()=>null!=n?n:n=this.getState(),set:e=>{n=e},enumerable:t},previousState:{get:()=>o,set:e=>{o=e},enumerable:t}}),e.getStoreKey=this.getStoreKey.bind(this),e.setStoreKey=this.setStoreKey.bind(this),e.setExtensionStore=this.setExtensionStore.bind(this),e.setStringHandler=this.setStringHandler.bind(this),e}addView(e){if(te(this,Yn)>=o.bC.EditorView)return this;re(this,Qn,!0),re(this,Yn,o.bC.EditorView),te(this,Jn).view=e;for(const t of te(this,er).view){const n=t(e);n&&te(this,tr).push(n)}return this}attachFramework(e,t){var n;te(this,rr)!==e&&(te(this,rr)&&(te(this,rr).destroy(),null==(n=te(this,or))||n.call(this)),re(this,rr,e),re(this,or,this.addHandler("stateUpdate",t)))}createEmptyDoc(){var e;const t=null==(e=this.schema.nodes.doc)?void 0:e.createAndFill();return(0,r.V1)(t,{code:o.bh.INVALID_CONTENT,message:"An empty node could not be created due to an invalid schema."}),t}createState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onError:t,defaultSelection:n="end"}=this.settings,{content:o=this.createEmptyDoc(),selection:s=n,stringHandler:a=this.settings.stringHandler}=e,{schema:l,plugins:c}=this.store,d=(0,i.cX)({stringHandler:(0,r.Kg)(a)?this.stringHandlers[a]:a,document:this.document,content:o,onError:t,schema:l,selection:s});return h.$t.create({schema:l,doc:d,plugins:c,selection:(0,i.IC)(s,d)})}addHandler(e,t){return te(this,nr).on(e,t)}onStateUpdate(e){const t=te(this,Qn);te(this,Un).currentState=e.state,te(this,Un).previousState=e.previousState,t&&(re(this,Yn,o.bC.Runtime),re(this,Qn,!1));const n=$(K({},e),{firstUpdate:t});for(const r of te(this,er).update)r(n);te(this,nr).emit("stateUpdate",n)}getExtension(e){const t=te(this,Xn).get(e);return(0,r.V1)(t,{code:o.bh.INVALID_MANAGER_EXTENSION,message:"'".concat(e.name,"' doesn't exist within this manager. Make sure it is properly added before attempting to use it.")}),t}hasExtension(e){return!!te(this,Xn).get(e)}clone(){const t=te(this,qn).map((e=>e.clone(e.options))),n=e.create((()=>t),te(this,Zn));return te(this,nr).emit("clone",n),n}recreate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=te(this,qn).map((e=>e.clone(e.initialOptions))),o=e.create((()=>[...r,...t]),n);return te(this,nr).emit("recreate",o),o}destroy(){var e,t,n,r,s,i,a;re(this,Yn,o.bC.Destroy);for(const o of null!=(t=null==(e=this.view)?void 0:e.state.plugins)?t:[])null==(r=null==(n=o.getState(this.view.state))?void 0:n.destroy)||r.call(n);null==(s=te(this,rr))||s.destroy(),null==(i=te(this,or))||i.call(this);for(const o of te(this,tr))o();for(const o of te(this,er).destroy)o();null==(a=this.view)||a.destroy(),te(this,nr).emit("destroy")}includes(e){const t=[],n=[];for(const r of te(this,qn))t.push(r.name,r.constructorName),n.push(r.constructor);return e.every((e=>(0,r.Kg)(e)?(0,r.mK)(t,e):(0,r.mK)(n,e)))}};Un=new WeakMap,Gn=new WeakMap,Jn=new WeakMap,qn=new WeakMap,Xn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,Qn=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,rr=new WeakMap,or=new WeakMap;var dr=cr;function hr(e,t){return!(!(0,i.nw)(e)||!(0,i.fW)(e,o.OW.Manager))&&(!t||e.includes(t))}},73908:(e,t,n)=>{"use strict";n.d(t,{l:()=>j});var r,o,s,i,a,l,c,d=n(37643),h=n(14736),u=n(28736),p=n(69811),f=n(54518),m=Object.create,g=Object.defineProperty,y=Object.defineProperties,v=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable,O=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),k=e=>{throw TypeError(e)},E=(e,t,n)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>g(e,"name",{value:t,configurable:!0}),M=["class","method","getter","setter","accessor","field","value","get","set"],N=e=>void 0!==e&&"function"!==typeof e?k("Function expected"):e,T=(e,t,n,r,o)=>({kind:M[e],name:t,metadata:r,addInitializer:e=>n._?k("Already initialized"):o.push(N(e||null))}),A=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},I=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=M[h+5],y=h>3&&(e[f-1]=[]),b=e[f]||(e[f]=[]),w=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&v(h<4?o:{get[n](){return P(this,s)},set[n](e){return D(this,s,e)}},n));h?p&&h<4&&C(s,(h>2?"set ":h>1?"get ":"")+n):C(o,n);for(var x=r.length-1;x>=0;x--)c=T(h,n,l={},e[3],b),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>_(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?P:L)(e,o,4^h?s:w.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>D(e,o,t,4^h?s:w.set):(e,t)=>e[n]=t)),a=(0,r[x])(h?h<4?p?s:w[m]:h>4?void 0:{get:w.get,set:w.set}:o,c),l._=1,4^h||void 0===a?N(a)&&(h>4?y.unshift(a):h?p?s=a:w[m]=a:o=a):"object"!==typeof a||null===a?k("Object expected"):(N(i=a.get)&&(w.get=i),N(i=a.set)&&(w.set=i),N(i=a.init)&&y.unshift(i));return h||((e,t)=>{E(t,O("metadata"),e[3])})(e,o),w&&g(o,n,w),p?4^h?s:w:o},R=(e,t,n)=>t.has(e)||k("Cannot "+n),_=(e,t)=>Object(t)!==t?k('Cannot use the "in" operator on this value'):e.has(t),P=(e,t,n)=>(R(e,t,"read from private field"),n?n.call(e):t.get(e)),D=(e,t,n,r)=>(R(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),L=(e,t,n)=>(R(e,t,"access private method"),n),z={icon:"bold",label:e=>{let{t:t}=e;return t(f.NO.LABEL)},description:e=>{let{t:t}=e;return t(f.NO.DESCRIPTION)}};l=[(0,d.ckn)({defaultOptions:{weight:void 0},staticKeys:["weight"]})];var j=class extends(a=d.z1i,i=[(0,d.G5h)(z)],s=[(0,d.G5h)()],o=[(0,d.G5h)()],r=[(0,d.pi3)({shortcut:h.s9.Bold,command:"toggleBold"})],a){constructor(){super(...arguments),A(c,5,this)}get name(){return"bold"}createTags(){return[h.Wz.FormattingMark,h.Wz.FontStyle]}createMarkSpec(e,t){var n,r,o;return r=((e,t)=>{for(var n in t||(t={}))x.call(t,n)&&E(e,n,t[n]);if(w)for(var n of w(t))S.call(t,n)&&E(e,n,t[n]);return e})({},t),o={attrs:e.defaults(),parseDOM:[{tag:"strong",getAttrs:e.parse},{tag:"b",getAttrs:t=>!(!(0,u.hm)(t)||"normal"===t.style.fontWeight)&&e.parse(t)},{style:"font-weight",getAttrs:e=>!(!(0,p.Kg)(e)||!/^(bold(er)?|[5-9]\d{2,})$/.test(e))&&null},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const{weight:n}=this.options;return n?["strong",{"font-weight":n.toString()},0]:["strong",e.dom(t),0]}},y(r,b(o))}createInputRules(){return[(0,u.OX)({regexp:/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,type:this.type,ignoreWhitespace:!0})]}toggleBold(e){return(0,d.wh)({type:this.type,selection:e})}setBold(e){return t=>{let{tr:n,dispatch:r}=t;const{from:o,to:s}=(0,u.IC)(null!=e?e:n.selection,n.doc);return null==r||r(n.addMark(o,s,this.type.create())),!0}}removeBold(e){return t=>{let{tr:n,dispatch:r}=t;const{from:o,to:s}=(0,u.IC)(null!=e?e:n.selection,n.doc);return!!n.doc.rangeHasMark(o,s,this.type)&&(null==r||r(n.removeMark(o,s,this.type)),!0)}}shortcut(e){return this.toggleBold()(e)}};I(c=(e=>{var t;return[,,,m(null!=(t=null==e?void 0:e[O("metadata")])?t:null)]})(a),1,"toggleBold",i,j),I(c,1,"setBold",s,j),I(c,1,"removeBold",o,j),I(c,1,"shortcut",r,j),j=I(c,0,"BoldExtension",l,j),A(c,1,j)},87716:(e,t,n)=>{"use strict";n.d(t,{v:()=>z});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(28736),h=n(69811),u=Object.create,p=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),x=e=>{throw TypeError(e)},S=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&S(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&S(e,n,t[n]);return e},k=(e,t)=>f(e,g(t)),E=(e,t)=>p(e,"name",{value:t,configurable:!0}),C=["class","method","getter","setter","accessor","field","value","get","set"],M=e=>void 0!==e&&"function"!==typeof e?x("Function expected"):e,N=(e,t,n,r,o)=>({kind:C[e],name:t,metadata:r,addInitializer:e=>n._?x("Already initialized"):o.push(M(e||null))}),T=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},A=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),f=!!(16&t),g=h>3?e.length+1:h?u?1:2:0,y=C[h+5],v=h>3&&(e[g-1]=[]),b=e[g]||(e[g]=[]),O=h&&(!f&&!u&&(o=o.prototype),h<5&&(h>3||!f)&&m(h<4?o:{get[n](){return _(this,s)},set[n](e){return P(this,s,e)}},n));h?f&&h<4&&E(s,(h>2?"set ":h>1?"get ":"")+n):E(o,n);for(var k=r.length-1;k>=0;k--)c=N(h,n,l={},e[3],b),h&&(c.static=u,c.private=f,d=c.access={has:f?e=>R(o,e):e=>n in e},3^h&&(d.get=f?e=>(1^h?_:D)(e,o,4^h?s:O.get):e=>e[n]),h>2&&(d.set=f?(e,t)=>P(e,o,t,4^h?s:O.set):(e,t)=>e[n]=t)),a=(0,r[k])(h?h<4?f?s:O[y]:h>4?void 0:{get:O.get,set:O.set}:o,c),l._=1,4^h||void 0===a?M(a)&&(h>4?v.unshift(a):h?f?s=a:O[y]=a:o=a):"object"!==typeof a||null===a?x("Object expected"):(M(i=a.get)&&(O.get=i),M(i=a.set)&&(O.set=i),M(i=a.init)&&v.unshift(i));return h||((e,t)=>{S(t,w("metadata"),e[3])})(e,o),O&&p(o,n,O),f?4^h?s:O:o},I=(e,t,n)=>t.has(e)||x("Cannot "+n),R=(e,t)=>Object(t)!==t?x('Cannot use the "in" operator on this value'):e.has(t),_=(e,t,n)=>(I(e,t,"read from private field"),n?n.call(e):t.get(e)),P=(e,t,n,r)=>(I(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),D=(e,t,n)=>(I(e,t,"access private method"),n),L="data-font-family";i=[(0,l.ckn)({})];var z=class extends(s=l.z1i,o=[(0,l.G5h)()],r=[(0,l.G5h)()],s){constructor(){super(...arguments),T(a,5,this)}get name(){return"fontFamily"}createTags(){return[c.Wz.FontStyle,c.Wz.FormattingMark]}createMarkSpec(e,t){var n;return k(O({},t),{attrs:k(O({},e.defaults()),{fontFamily:{default:null}}),parseDOM:[{tag:"span[".concat(L,"]"),getAttrs:t=>{if(!(0,d.hm)(t))return!1;const n=t.getAttribute(L);return!!n&&k(O({},e.parse(t)),{fontFamily:n})}},{style:"font-family",priority:c.OR.Low,getAttrs:e=>!!(0,h.Kg)(e)&&{fontFamily:e?e.replace(/["']/g,""):""}},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const{fontFamily:n}=(0,d.dV)(t.attrs,e),r=e.dom(t);let o=r.style;return o=(0,d.h$)({fontFamily:n},o),["span",k(O({},r),{style:o,[L]:n}),0]}})}setFontFamily(e){return this.store.commands.applyMark.original(this.type,{fontFamily:e})}toggleFontFamily(e){return this.store.commands.toggleMark.original({type:this.type,attrs:{fontFamily:e}})}};A(a=(e=>{var t;return[,,,u(null!=(t=null==e?void 0:e[w("metadata")])?t:null)]})(s),1,"setFontFamily",o,z),A(a,1,"toggleFontFamily",r,z),z=A(a,0,"FontFamilyExtension",i,z),T(a,1,z)},69396:(e,t,n)=>{"use strict";n.d(t,{y:()=>J});var r,o,s,i,a,l,c,d,h,u,p,f=n(76964),m=n(37643),g=n(14736),y=n(28736),v=n(69811),b=n(54518),w=Object.create,x=Object.defineProperty,S=Object.defineProperties,O=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,N=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),T=e=>{throw TypeError(e)},A=(e,t,n)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))C.call(t,n)&&A(e,n,t[n]);if(E)for(var n of E(t))M.call(t,n)&&A(e,n,t[n]);return e},R=(e,t)=>S(e,k(t)),_=(e,t)=>x(e,"name",{value:t,configurable:!0}),P=["class","method","getter","setter","accessor","field","value","get","set"],D=e=>void 0!==e&&"function"!==typeof e?T("Function expected"):e,L=(e,t,n,r,o)=>({kind:P[e],name:t,metadata:r,addInitializer:e=>n._?T("Already initialized"):o.push(D(e||null))}),z=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},j=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=P[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&O(h<4?o:{get[n](){return V(this,s)},set[n](e){return K(this,s,e)}},n));h?p&&h<4&&_(s,(h>2?"set ":h>1?"get ":"")+n):_(o,n);for(var b=r.length-1;b>=0;b--)c=L(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>B(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?V:$)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>K(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?D(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?T("Object expected"):(D(i=a.get)&&(v.get=i),D(i=a.set)&&(v.set=i),D(i=a.init)&&g.unshift(i));return h||((e,t)=>{A(t,N("metadata"),e[3])})(e,o),v&&x(o,n,v),p?4^h?s:v:o},F=(e,t,n)=>t.has(e)||T("Cannot "+n),B=(e,t)=>Object(t)!==t?T('Cannot use the "in" operator on this value'):e.has(t),V=(e,t,n)=>(F(e,t,"read from private field"),n?n.call(e):t.get(e)),K=(e,t,n,r)=>(F(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),$=(e,t,n)=>(F(e,t,"access private method"),n),W={icon:"fontSize",description:e=>{let{t:t}=e;return t(b.QK.SET_DESCRIPTION)},label:e=>{let{t:t}=e;return t(b.QK.SET_LABEL)}},H={icon:"addLine",description:e=>{let{t:t}=e;return t(b.QK.INCREASE_DESCRIPTION)},label:e=>{let{t:t}=e;return t(b.QK.INCREASE_LABEL)}},U={icon:"subtractLine",description:e=>{let{t:t}=e;return t(b.QK.DECREASE_DESCRIPTION)},label:e=>{let{t:t}=e;return t(b.QK.DECREASE_LABEL)}},G="data-font-size-mark";u=[(0,m.ckn)({defaultOptions:{defaultSize:"",unit:"pt",increment:1,max:100,min:1,roundingMultiple:.5},staticKeys:["defaultSize"]})];var J=class extends(h=m.z1i,d=[(0,m.G5h)(W)],c=[(0,m.G5h)(H)],l=[(0,m.G5h)(U)],a=[(0,m.G5h)()],i=[(0,m.pi3)({shortcut:g.s9.IncreaseFontSize,command:"increaseFontSize"})],s=[(0,m.pi3)({shortcut:g.s9.IncreaseFontSize,command:"decreaseFontSize"})],o=[(0,m.dwU)()],r=[(0,m.dwU)()],h){constructor(){super(...arguments),z(p,5,this)}get name(){return"fontSize"}createTags(){return[g.Wz.FormattingMark,g.Wz.FontStyle]}createMarkSpec(e,t){var n;return R(I({},t),{attrs:R(I({},e.defaults()),{size:{default:this.options.defaultSize}}),parseDOM:[{tag:"span[".concat(G,"]"),getAttrs:t=>{if(!(0,y.hm)(t))return null;let n=t.getAttribute(G);return n?(n="".concat((0,y.E4)(n,this.options.unit,t)).concat(this.options.unit),R(I({},e.parse(t)),{size:n})):null}},{style:"font-size",priority:g.OR.Low,getAttrs:e=>(0,v.Kg)(e)?{size:e=this.getFontSize(e)}:null},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const n=(0,y.dV)(t.attrs,e),{size:r}=n,o=((e,t)=>{var n={};for(var r in e)C.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&E)for(var r of E(e))t.indexOf(r)<0&&M.call(e,r)&&(n[r]=e[r]);return n})(n,["size"]),s=e.dom(t);let i=s.style;return r&&(i=(0,y.h$)({fontSize:this.getFontSize(r)},i)),["span",R(I(I({},o),s),{style:i,[G]:undefined}),0]}})}getFontSize(e){var t;const{unit:n,roundingMultiple:r,max:o,min:s,defaultSize:i}=this.options,a=(0,y.E4)(e,n,null==(t=this.store.view)?void 0:t.dom);if(Number.isNaN(a))return i||"1rem";const l=(0,v.qE)({value:f(a,r),max:o,min:s});return"".concat(l).concat(n)}setFontSize(e,t){return this.store.commands.applyMark.original(this.type,{size:String(e)},null==t?void 0:t.selection)}increaseFontSize(e){const{increment:t}=this.options;return n=>{const[r]=this.getFontSizeForSelection(null==e?void 0:e.selection);let[o]=r;return o+=(0,v.Tn)(t)?t(r,1):t,this.setFontSize(o,e)(n)}}decreaseFontSize(e){const{increment:t}=this.options;return n=>{const[r]=this.getFontSizeForSelection(null==e?void 0:e.selection);let[o]=r;return o-=(0,v.Tn)(t)?t(r,-1):t,this.setFontSize(o,e)(n)}}removeFontSize(e){return this.store.commands.removeMark.original(I({type:this.type,expand:!1},e))}increaseFontSizeShortcut(e){return this.increaseFontSize()(e)}decreaseFontSizeShortcut(e){return this.decreaseFontSize()(e)}getFontSizeForSelection(e){const t=this.store.getState(),n=(0,y.IC)(null!=e?e:t.selection,t.doc),[r,...o]=(0,y.U9)(n,this.type);if(r)return[(0,y.TC)(r.mark.attrs.size),...o.map((e=>(0,y.TC)(e.mark.attrs.size)))];const{defaultSize:s,unit:i}=this.options;return[[(0,y.E4)(s,i),i]]}getFontSizeFromDom(e){const t=this.store.getState(),n=(0,y.IC)(null!=e?e:t.selection,t.doc),r=this.store.view.domAtPos(n.from),o=(0,y.hm)(r.node)?r.node:this.store.view.dom;return(0,y.TC)((0,y.ny)(o))}};j(p=(e=>{var t;return[,,,w(null!=(t=null==e?void 0:e[N("metadata")])?t:null)]})(h),1,"setFontSize",d,J),j(p,1,"increaseFontSize",c,J),j(p,1,"decreaseFontSize",l,J),j(p,1,"removeFontSize",a,J),j(p,1,"increaseFontSizeShortcut",i,J),j(p,1,"decreaseFontSizeShortcut",s,J),j(p,1,"getFontSizeForSelection",o,J),j(p,1,"getFontSizeFromDom",r,J),J=j(p,0,"FontSizeExtension",u,J),z(p,1,J)},58654:(e,t,n)=>{"use strict";n.d(t,{A:()=>D});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(28736),h=n(54518),u=Object.create,p=Object.defineProperty,f=Object.defineProperties,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),x=e=>{throw TypeError(e)},S=(e,t,n)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>p(e,"name",{value:t,configurable:!0}),k=["class","method","getter","setter","accessor","field","value","get","set"],E=e=>void 0!==e&&"function"!==typeof e?x("Function expected"):e,C=(e,t,n,r,o)=>({kind:k[e],name:t,metadata:r,addInitializer:e=>n._?x("Already initialized"):o.push(E(e||null))}),M=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},N=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),f=!!(16&t),g=h>3?e.length+1:h?u?1:2:0,y=k[h+5],v=h>3&&(e[g-1]=[]),b=e[g]||(e[g]=[]),M=h&&(!f&&!u&&(o=o.prototype),h<5&&(h>3||!f)&&m(h<4?o:{get[n](){return I(this,s)},set[n](e){return R(this,s,e)}},n));h?f&&h<4&&O(s,(h>2?"set ":h>1?"get ":"")+n):O(o,n);for(var N=r.length-1;N>=0;N--)c=C(h,n,l={},e[3],b),h&&(c.static=u,c.private=f,d=c.access={has:f?e=>A(o,e):e=>n in e},3^h&&(d.get=f?e=>(1^h?I:_)(e,o,4^h?s:M.get):e=>e[n]),h>2&&(d.set=f?(e,t)=>R(e,o,t,4^h?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?f?s:M[y]:h>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^h||void 0===a?E(a)&&(h>4?v.unshift(a):h?f?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?x("Object expected"):(E(i=a.get)&&(M.get=i),E(i=a.set)&&(M.set=i),E(i=a.init)&&v.unshift(i));return h||((e,t)=>{S(t,w("metadata"),e[3])})(e,o),M&&p(o,n,M),f?4^h?s:M:o},T=(e,t,n)=>t.has(e)||x("Cannot "+n),A=(e,t)=>Object(t)!==t?x('Cannot use the "in" operator on this value'):e.has(t),I=(e,t,n)=>(T(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n,r)=>(T(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_=(e,t,n)=>(T(e,t,"access private method"),n),P={icon:"italic",label:e=>{let{t:t}=e;return t(h.OP.LABEL)},description:e=>{let{t:t}=e;return t(h.OP.DESCRIPTION)}};i=[(0,l.ckn)({})];var D=class extends(s=l.z1i,o=[(0,l.G5h)(P)],r=[(0,l.pi3)({shortcut:c.s9.Italic,command:"toggleItalic"})],s){constructor(){super(...arguments),M(a,5,this)}get name(){return"italic"}createTags(){return[c.Wz.FontStyle,c.Wz.FormattingMark]}createMarkSpec(e,t){var n,r,o;return r=((e,t)=>{for(var n in t||(t={}))v.call(t,n)&&S(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&S(e,n,t[n]);return e})({},t),o={attrs:e.defaults(),parseDOM:[{tag:"i",getAttrs:e.parse},{tag:"em",getAttrs:e.parse},{style:"font-style=italic"},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["em",e.dom(t),0]},f(r,g(o))}createKeymap(){return{"Mod-i":(0,l.wh)({type:this.type})}}createInputRules(){return[(0,d.OX)({regexp:/(?:^|[^*])\*([^*]+)\*$/,type:this.type,ignoreWhitespace:!0,updateCaptured:e=>{let{fullMatch:t,start:n}=e;return t.startsWith("*")?{}:{fullMatch:t.slice(1),start:n+1}}}),(0,d.OX)({regexp:/(?:^|\W)_([^_]+)_$/,type:this.type,ignoreWhitespace:!0,updateCaptured:e=>{let{fullMatch:t,start:n}=e;return t.startsWith("_")?{}:{fullMatch:t.slice(1),start:n+1}}})]}createPasteRules(){return[{type:"mark",markType:this.type,regexp:/(?:^|\W)_([^_]+)_/g},{type:"mark",markType:this.type,regexp:/\*([^*]+)\*/g}]}toggleItalic(e){return(0,l.wh)({type:this.type,selection:e})}shortcut(e){return this.toggleItalic()(e)}};N(a=(e=>{var t;return[,,,u(null!=(t=null==e?void 0:e[w("metadata")])?t:null)]})(s),1,"toggleItalic",o,D),N(a,1,"shortcut",r,D),D=N(a,0,"ItalicExtension",i,D),M(a,1,D)},9475:(e,t,n)=>{"use strict";n.d(t,{IQ:()=>Oe,XS:()=>Me});var r=n(37643),o=n(14736),s=n(69811),i=n(54518),a=n(52350),l=n(27908),c=n(34220),d=n(26244),h=n(28736),u=n(17293),p=n(94644),f=n(82711);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return!!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=!1,s=t,i=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=i.resolve(t.start-2);s=new p.u$(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new p.u$(t.$from,i.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=(0,f.oM)(s,n,r,t);if(!a)return!1;e&&function(e,t,n,r,o){let s=p.FK.empty;for(let d=n.length-1;d>=0;d--)s=p.FK.from(n[d].type.create(n[d].attrs,s));e.step(new f.Wg(t.start-(r?2:0),t.end,t.start,t.end,new p.Ji(s,0,0),n.length,!0));let i=0;for(let d=0;d<n.length;d++)n[d].type==o&&(i=d+1);let a=n.length-i,l=t.start+n.length-(r?2:0),c=t.parent;for(let d=t.startIndex,h=t.endIndex,u=!0;d<h;d++,u=!1)!u&&(0,f.zy)(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(d).nodeSize}(e,t,a,o,n);return!0}(a,i,e,t)&&(r&&r(a.scrollIntoView()),!0)}}function g(e){return function(t,n){let{$from:r,$to:o}=t.selection,s=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!s&&(!n||(r.node(s.depth-1).type==e?function(e,t,n,r){let o=e.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new f.Wg(s-1,i,s,i,new p.Ji(p.FK.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new p.u$(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=(0,f.jP)(r);if(null==a)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;(0,f.n9)(o.doc,l)&&o.join(l);return t(o.scrollIntoView()),!0}(t,n,e,s):function(e,t,n){let r=e.tr,o=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=o.child(f).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==o.childCount,c=s.node(-1),d=s.index(-1);if(!c.canReplace(d+(a?0:1),d+1,i.content.append(l?p.FK.empty:p.FK.from(o))))return!1;let h=s.pos,u=h+i.nodeSize;return r.step(new f.Wg(h-(a?1:0),u+(l?1:0),h+1,u-1,new p.Ji((a?p.FK.empty:p.FK.from(o.copy(p.FK.empty))).append(l?p.FK.empty:p.FK.from(o.copy(p.FK.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,s)))}}var y=Object.create,v=Object.defineProperty,b=Object.defineProperties,w=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,E=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),C=e=>{throw TypeError(e)},M=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&M(e,n,t[n]);if(S)for(var n of S(t))k.call(t,n)&&M(e,n,t[n]);return e},T=(e,t)=>b(e,x(t)),A=(e,t)=>v(e,"name",{value:t,configurable:!0}),I=e=>{var t;return[,,,y(null!=(t=null==e?void 0:e[E("metadata")])?t:null)]},R=["class","method","getter","setter","accessor","field","value","get","set"],_=e=>void 0!==e&&"function"!==typeof e?C("Function expected"):e,P=(e,t,n,r,o)=>({kind:R[e],name:t,metadata:r,addInitializer:e=>n._?C("Already initialized"):o.push(_(e||null))}),D=(e,t)=>M(t,E("metadata"),e[3]),L=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},z=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=R[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),b=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&w(h<4?o:{get[n](){return B(this,s)},set[n](e){return V(this,s,e)}},n));h?p&&h<4&&A(s,(h>2?"set ":h>1?"get ":"")+n):A(o,n);for(var x=r.length-1;x>=0;x--)c=P(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>F(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?B:K)(e,o,4^h?s:b.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>V(e,o,t,4^h?s:b.set):(e,t)=>e[n]=t)),a=(0,r[x])(h?h<4?p?s:b[m]:h>4?void 0:{get:b.get,set:b.set}:o,c),l._=1,4^h||void 0===a?_(a)&&(h>4?g.unshift(a):h?p?s=a:b[m]=a:o=a):"object"!==typeof a||null===a?C("Object expected"):(_(i=a.get)&&(b.get=i),_(i=a.set)&&(b.set=i),_(i=a.init)&&g.unshift(i));return h||D(e,o),b&&v(o,n,b),p?4^h?s:b:o},j=(e,t,n)=>t.has(e)||C("Cannot "+n),F=(e,t)=>Object(t)!==t?C('Cannot use the "in" operator on this value'):e.has(t),B=(e,t,n)=>(j(e,t,"read from private field"),n?n.call(e):t.get(e)),V=(e,t,n,r)=>(j(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),K=(e,t,n)=>(j(e,t,"access private method"),n);function $(e){var t;return!!(null==(t=e.spec.group)?void 0:t.includes(o.Wz.ListContainerNode))}function W(e){return $(e.type)}function H(e){return function(e){var t;return!!(null==(t=e.spec.group)?void 0:t.includes(o.Wz.ListItemNode))}(e.type)}function U(e,t){return n=>{const{dispatch:r,tr:o}=n,s=(0,d.ey)(o,n.state),{$from:i,$to:a}=o.selection,l=i.blockRange(a);if(!l)return!1;const c=(0,h.KP)({predicate:e=>$(e.type),selection:o.selection});if(c&&l.depth-c.depth<=1&&0===l.startIndex){if(c.node.type===e)return X(t)(n);if($(c.node.type))return e.validContent(c.node.content)?(null==r||r(o.setNodeMarkup(c.pos,e)),!0):!!function(e,t,n,r){const o=t.node,s=e.doc.resolve(t.start),i=s.node(-1),a=s.index(-1);if(!i)return!1;if(!i.canReplace(a,a+1,p.FK.from(n.create())))return!1;const l=[];for(let p=0;p<o.childCount;p++){const e=o.child(p);if(!r.validContent(e.content))return!1;const t=r.createChecked(null,e.content);l.push(t)}const c=n.createChecked(null,l),d=t.pos,h=d+o.nodeSize,u=e.selection.from;return e.replaceRangeWith(d,h,c),e.setSelection(e.selection.constructor.near(e.doc.resolve(u))),!0}(o,c,e,t)&&(null==r||r(o.scrollIntoView()),!0)}return m(e)(s,r)}}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["checked"];return function(n){let{tr:r,dispatch:o,state:s}=n;var i,a;const c=(0,h.Pg)(e,s.schema),{$from:d,$to:u}=r.selection;if((0,h.BQ)(r.selection)&&r.selection.node.isBlock||d.depth<2||!d.sameParent(u))return!1;const m=d.node(-1);if(m.type!==c)return!1;if(0===d.parent.content.size&&d.node(-1).childCount===d.indexAfter(-1)){if(2===d.depth||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){const e=d.index(-1)>0;let t=p.FK.empty;for(let r=d.depth-(e?1:2);r>=d.depth-3;r--)t=p.FK.from(d.node(r).copy(t));const n=(null==(i=c.contentMatch.defaultType)?void 0:i.createAndFill())||void 0;t=t.append(p.FK.from(c.createAndFill(null,n)||void 0));const s=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3;r.replace(d.before(e?void 0:-1),d.after(-s),new p.Ji(t,e?3:2,2)),r.setSelection(r.selection.constructor.near(r.doc.resolve(d.pos+(e?3:2)))),o(r.scrollIntoView())}return!0}if(m.attrs.closed&&d.sameParent(u)&&u.pos===u.end()){if(o){const e=d.after(-1),t=(null==(a=c.contentMatch.defaultType)?void 0:a.createAndFill())||void 0,n=c.createAndFill(null,t);n&&(r.insert(e,n),r.setSelection(l.U3.near(r.doc.resolve(e+1)))),r.delete(d.pos,u.pos),o(r.scrollIntoView())}return!0}const g=Object.fromEntries(Object.entries(m.attrs).filter((e=>{let[n]=e;return!t.includes(n)}))),y=u.pos===d.end()?m.contentMatchAt(0).defaultType:null,v=N({},d.node().attrs);r.delete(d.pos,u.pos);const b=y?[{type:c,attrs:g},{type:y,attrs:v}]:[{type:c,attrs:g}];return!!(0,f.zy)(r.doc,d.pos,2)&&(o&&o(r.split(d.pos,2,b).scrollIntoView()),!0)}}function J(e){let{listType:t,itemType:n,tr:r}=e;const o=Y(r.selection);if(!o)return!1;const s=0===o.startIndex,{from:i,to:a}=r.selection;return!!function(e){let{listType:t,itemType:n,tr:r,range:o}=e;var s;const i=o.parent,a=r.doc.slice(o.start,o.end);if(i.type===t&&(null==(s=a.content.firstChild)?void 0:s.type)===n)return!1;const l=[];for(let d=0;d<a.content.childCount;d++){const e=a.content.child(d);if(!n.validContent(e.content))return!1;const t=n.createChecked(null,e.content);l.push(t)}const c=t.createChecked(null,l);return r.replaceRange(o.start,o.end,new p.Ji(p.FK.from(c),0,0)),!0}({listType:t,itemType:n,tr:r,range:o})&&(r.setSelection(l.U3.between(r.doc.resolve(s?i:i+2),r.doc.resolve(s?a:a+2))),r.scrollIntoView(),!0)}function q(e,t){const n=t||e.selection.$from;let r,o,s,i,a=[];for(let c=n.depth;c>=0;c--){if(o=n.node(c),r=n.index(c),s=o.maybeChild(r-1),i=o.maybeChild(r),s&&i&&s.type.name===i.type.name&&W(s)){const e=n.before(c+1);a.push(e)}if(r=n.indexAfter(c),s=o.maybeChild(r-1),i=o.maybeChild(r),s&&i&&s.type.name===i.type.name&&W(s)){const e=n.after(c+1);a.push(e)}}a=[...new Set(a)].sort(((e,t)=>t-e));let l=!1;for(const c of a)(0,f.n9)(e.doc,c)&&(e.join(c),l=!0);return l}function X(e){return t=>{const{dispatch:n,tr:r}=t,o=(0,d.ey)(r,t.state),s=function(e,t){const{$from:n,$to:r}=t,o=n.blockRange(r,(t=>{var n;return(null==(n=t.firstChild)?void 0:n.type)===e}));return o}(e,r.selection);return!!s&&(!n||(function(e,t,n){const r=e.tr,o=n.parent,s=r.mapping.maps.length;for(let p=n.end,f=n.endIndex-1,g=n.startIndex;f>g;f--)p-=o.child(f).nodeSize,r.delete(p-1,p+1);const i=r.doc.resolve(n.start),a=i.nodeAfter;if(!a)return!1;if(r.mapping.slice(s).map(n.end)!==n.start+a.nodeSize)return!1;const l=0===n.startIndex,c=n.endIndex===o.childCount,d=i.node(-1),h=i.index(-1);if(!d.canReplace(h+(l?0:1),h+1,a.content.append(c?p.FK.empty:p.FK.from(o))))return!1;const u=i.pos,m=u+a.nodeSize;r.step(new f.Wg(u-(l?1:0),m+(c?1:0),u+1,m-1,new p.Ji((l?p.FK.empty:p.FK.from(o.copy(p.FK.empty))).append(c?p.FK.empty:p.FK.from(o.copy(p.FK.empty))),l?0:1,c?0:1),l?0:1)),t(r.scrollIntoView())}(o,n,s),!0))}}function Y(e){const{$from:t,$to:n}=e;return t.blockRange(n,W)}function Z(e){let{view:t}=e;if(!t)return!1;{const e=t.state.selection.$cursor;if(!e||e.parentOffset>0)return!1;const n=e.blockRange();if(!n||!H(n.parent)||0!==n.startIndex)return!1}{const e=t.state.tr;(function(e){const t=e.selection.$from,n=t.blockRange();if(!n||!H(n.parent)||0!==n.startIndex)return!1;const r=t.node(n.depth-2),o=t.index(n.depth),s=t.index(n.depth-1),i=t.index(n.depth-2),a=r.maybeChild(i-1),l=null==a?void 0:a.lastChild;if(0!==o||0!==s)return!1;if(a&&W(a)&&l&&H(l))return J({listType:a.type,itemType:l.type,tr:e});if(H(r)){const o=r,s=t.node(n.depth-3);if(W(s))return J({listType:s.type,itemType:o.type,tr:e})}return!1})(e)&&t.dispatch(e)}{const e=t.state.selection.$cursor;if(!e||e.parentOffset>0)return!1;const n=e.blockRange();if(!n||!H(n.parent)||0!==n.startIndex)return!1;const r=e.index(n.depth),o=e.index(n.depth-1),s=e.index(n.depth-2),i=n.depth-2>=1&&H(e.node(n.depth-2));0===r&&0===o&&s<=1&&i&&g(n.parent.type)(t.state,t.dispatch)}return(0,u.Qv)(t.state,t.dispatch,t),!0}function Q(e){let{node:t,mark:n,updateDOM:r,updateMark:o}=e;const s=document.createElement("label");s.contentEditable="false",s.classList.add(c.$u.LIST_ITEM_MARKER_CONTAINER),s.append(n);const i=document.createElement("div"),a=document.createElement("li");a.classList.add(c.$u.LIST_ITEM_WITH_CUSTOM_MARKER),a.append(s),a.append(i);const l=e=>e.type===t.type&&(t=e,r(t,a),o(t,n),!0);return l(t),{dom:a,contentDOM:i,update:l}}function ee(e){let t=Y(e.selection);if(!t)return!1;const n=function(e,t){const n=e.node(t.depth-1),r=e.node(t.depth-2);return!(!H(n)||!W(r))&&{parentItem:n,parentList:r}}(e.selection.$from,t);if(!n)return!1;const{parentItem:r,parentList:o}=n;t=function(e,t){const n=t.parent,r=t.parent.child(t.endIndex-1),o=t.end,s=t.$to.end(t.depth);return o<s?(e.step(new f.Wg(o-1,s,o,s,new p.Ji(p.FK.from(r.type.create(null,n.copy())),1,0),1,!0)),new p.u$(e.doc.resolve(t.$from.pos),e.doc.resolve(s),t.depth)):t}(e,t),t=function(e,t){const n=t.parent,r=t.parent.child(t.endIndex-1),o=t.end,s=t.$to.end(t.depth-1);return o+1<s?(e.step(new f.Wg(o-1,s,o+1,s,new p.Ji(p.FK.from(n.type.create(null,r.type.create(null))),2,0),0,!0)),new p.u$(e.selection.$from,e.selection.$to,t.depth)):t}(e,t),t=function(e,t,n,r){return J({listType:n.type,itemType:r.type,tr:e})?new p.u$(e.selection.$from,e.selection.$to,t.depth):t}(e,t,o,r);const s=(0,f.jP)(t);return"number"!==typeof s||(e.lift(t,s),t=Y(e.selection),t&&q(e,e.doc.resolve(t.end-2))),!0}var te=e=>{let{tr:t,dispatch:n}=e;return!!ee(t)&&(null==n||n(t.scrollIntoView()),!0)};function ne(e){const{$from:t,$to:n}=e.selection,r=Y(e.selection);if(!r)return!1;const o=e.doc.resolve(r.start).node();if(!W(o))return!1;const s=function(e,t,n){let r,o,s,i;const a=t.doc;if(n.startIndex>=1){r=e.child(n.startIndex-1),o=e,i=a.resolve(n.start).start(n.depth),s=i+1;for(let e=0;e<n.startIndex-1;e++)s+=o.child(e).nodeSize}else{const e=t.index(n.depth-1);if(!(e>=1))return!1;{const a=t.node(n.depth-1),l=t.start(n.depth-1);if(o=a.child(e-1),!W(o))return!1;i=l+1;for(let t=0;t<e-1;t++)i+=a.child(t).nodeSize;if(r=o.child(o.childCount-1),s=i+o.nodeSize-r.nodeSize-1,!H(r))return!1}}return{previousItem:r,previousList:o,previousItemStart:s,previousListStart:i}}(o,t,r);if(!s)return!1;const{previousItem:i,previousList:a,previousItemStart:c}=s,{selectedSlice:d,unselectedSlice:h}=function(e,t,n){let r,o;const s=n.start,i=t.depth>=n.depth+2?t.end(n.depth+2):n.end-1,a=n.end;return i+1>=a?(r=e.slice(s,a),o=null):(r=e.slice(s,i),o=e.slice(i+1,a-1)),{selectedSlice:r,unselectedSlice:o}}(e.doc,n,r),u=i.content.append(p.FK.fromArray([o.copy(d.content)])).append(h?h.content:p.FK.empty);e.deleteRange(r.start,r.end);const f=c+i.nodeSize-2,m=i.copy(u);return m.check(),e.replaceRangeWith(c-1,f+1,m),e.setSelection(a===o?l.U3.between(e.doc.resolve(t.pos),e.doc.resolve(n.pos)):l.U3.between(e.doc.resolve(t.pos-2),e.doc.resolve(n.pos-2))),!0}var re,oe,se,ie,ae,le=e=>{let{tr:t,dispatch:n}=e;return!!ne(t)&&(null==n||n(t.scrollIntoView()),!0)},ce=class extends r.UBi{get name(){return"listItemShared"}createKeymap(){const e={Tab:le,"Shift-Tab":te,Backspace:Z,"Mod-Backspace":Z};if(h.cA.isMac){const t={"Ctrl-h":e.Backspace,"Alt-Backspace":e["Mod-Backspace"]};return N(N({},e),t)}return e}createPlugin(){return{appendTransaction:(e,t,n)=>{const r=n.tr;return q(r)?r:null}}}};ie=[(0,r.ckn)({defaultOptions:{enableCollapsible:!1},staticKeys:["enableCollapsible"]})];var de,he,ue,pe,fe,me=class extends(se=r.udg,oe=[(0,r.G5h)()],re=[(0,r.G5h)()],se){constructor(){super(...arguments),L(ae,5,this)}get name(){return"listItem"}createTags(){return[o.Wz.ListItemNode]}createNodeSpec(e,t){var n;return T(N({content:"paragraph block*",defining:!0,draggable:!1},t),{attrs:T(N({},e.defaults()),{closed:{default:!1},nested:{default:!1}}),parseDOM:[{tag:"li",getAttrs:e.parse,priority:o.OR.Lowest},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["li",e.dom(t),0]})}createNodeViews(){return this.options.enableCollapsible?(e,t,n)=>{const r=document.createElement("div");return r.classList.add(c.$u.COLLAPSIBLE_LIST_ITEM_BUTTON),r.contentEditable="false",r.addEventListener("click",(()=>{if(r.classList.contains("disabled"))return;const e=n(),o=l.nh.create(t.state.doc,e);return t.dispatch(t.state.tr.setSelection(o)),this.store.commands.toggleListItemClosed(),!0})),Q({mark:r,node:e,updateDOM:ge,updateMark:ye})}:{}}createKeymap(){return{Enter:G(this.type)}}createExtensions(){return[new ce]}toggleListItemClosed(e){return t=>{let{state:{tr:n,selection:r},dispatch:o}=t;if(!(0,h.BQ)(r)||r.node.type.name!==this.name)return!1;const{node:i,from:a}=r;return e=(0,s.Lm)(e)?e:!i.attrs.closed,null==o||o(n.setNodeMarkup(a,void 0,T(N({},i.attrs),{closed:e}))),!0}}liftListItemOutOfList(e){return X(null!=e?e:this.type)}};function ge(e,t){e.attrs.closed?t.classList.add(c.$u.COLLAPSIBLE_LIST_ITEM_CLOSED):t.classList.remove(c.$u.COLLAPSIBLE_LIST_ITEM_CLOSED)}function ye(e,t){e.childCount<=1?t.classList.add("disabled"):t.classList.remove("disabled")}z(ae=I(se),1,"toggleListItemClosed",oe,me),z(ae,1,"liftListItemOutOfList",re,me),me=z(ae,0,"ListItemExtension",ie,me),L(ae,1,me),pe=[(0,r.ckn)({defaultOptions:{enableSpine:!1},staticKeys:["enableSpine"]})];var ve,be,we,xe,Se,Oe=class extends(ue=r.udg,he=[(0,r.G5h)({icon:"listUnordered",label:e=>{let{t:t}=e;return t(i.kQ.BULLET_LIST_LABEL)}})],de=[(0,r.pi3)({shortcut:o.s9.BulletList,command:"toggleBulletList"})],ue){constructor(){super(...arguments),L(fe,5,this)}get name(){return"bulletList"}createTags(){return[o.Wz.Block,o.Wz.ListContainerNode]}createNodeSpec(e,t){var n;return T(N({content:"listItem+"},t),{attrs:e.defaults(),parseDOM:[{tag:"ul",getAttrs:e.parse},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["ul",e.dom(t),0]})}createNodeViews(){return this.options.enableSpine?(e,t,n)=>{var r;const o=document.createElement("div");o.style.position="relative";const s=n(),i=t.state.doc.resolve(s+1),a=i.node(i.depth-1);if(!("listItem"!==(null==(r=null==a?void 0:a.type)?void 0:r.name))){const e=document.createElement("div");e.contentEditable="false",e.classList.add(c.$u.LIST_SPINE),e.addEventListener("click",(e=>{const r=n(),o=t.state.doc.resolve(r+1),s=o.start(o.depth-1),i=l.nh.create(t.state.doc,s-1);t.dispatch(t.state.tr.setSelection(i)),this.store.commands.toggleListItemClosed(),e.preventDefault(),e.stopPropagation()})),o.append(e)}const d=document.createElement("ul");return d.classList.add(c.$u.UL_LIST_CONTENT),o.append(d),{dom:o,contentDOM:d}}:{}}createExtensions(){return[new me({priority:o.OR.Low,enableCollapsible:this.options.enableSpine})]}toggleBulletList(){return U(this.type,(0,s.ZY)(this.store.schema.nodes,"listItem"))}listShortcut(e){return this.toggleBulletList()(e)}createInputRules(){const e=/^\s*([*+-])\s$/;return[(0,a.tG)(e,this.type),new a.fV(e,((e,t,n,r)=>{const o=e.tr;o.deleteRange(n,r);return J({listType:this.type,itemType:(0,s.ZY)(this.store.schema.nodes,"listItem"),tr:o})?o:null}))]}};z(fe=I(ue),1,"toggleBulletList",he,Oe),z(fe,1,"listShortcut",de,Oe),Oe=z(fe,0,"BulletListExtension",pe,Oe),L(fe,1,Oe),xe=[(0,r.ckn)({})];var ke,Ee,Ce,Me=class extends(we=r.udg,be=[(0,r.G5h)({icon:"listOrdered",label:e=>{let{t:t}=e;return t(i.kQ.ORDERED_LIST_LABEL)}})],ve=[(0,r.pi3)({shortcut:o.s9.OrderedList,command:"toggleOrderedList"})],we){constructor(){super(...arguments),L(Se,5,this)}get name(){return"orderedList"}createTags(){return[o.Wz.Block,o.Wz.ListContainerNode]}createNodeSpec(e,t){var n;return T(N({content:"listItem+"},t),{attrs:T(N({},e.defaults()),{order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:t=>{var n;return(0,h.hm)(t)?T(N({},e.parse(t)),{order:+(null!=(n=t.getAttribute("start"))?n:1)}):{}}},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const n=e.dom(t);return 1===t.attrs.order?["ol",n,0]:["ol",T(N({},n),{start:t.attrs.order}),0]}})}createExtensions(){return[new me({priority:o.OR.Low})]}toggleOrderedList(){return U(this.type,(0,s.ZY)(this.store.schema.nodes,"listItem"))}listShortcut(e){return this.toggleOrderedList()(e)}createInputRules(){const e=/^(\d+)\.\s$/;return[(0,a.tG)(e,this.type,(e=>({order:+(0,s.ZY)(e,1)})),((e,t)=>t.childCount+t.attrs.order===+(0,s.ZY)(e,1))),new a.fV(e,((e,t,n,r)=>{const o=e.tr;o.deleteRange(n,r);if(!J({listType:this.type,itemType:(0,s.ZY)(this.store.schema.nodes,"listItem"),tr:o}))return null;const i=+(0,s.ZY)(t,1);if(1!==i){const e=(0,h.tt)({selection:o.selection,types:this.type});e&&o.setNodeMarkup(e.pos,void 0,{order:i})}return o}))]}};z(Se=I(we),1,"toggleOrderedList",be,Me),z(Se,1,"listShortcut",ve,Me),Me=z(Se,0,"OrderedListExtension",xe,Me),L(Se,1,Me);var Ne,Te,Ae,Ie,Re=class extends(Ee=r.udg,ke=[(0,r.G5h)()],Ee){constructor(){super(...arguments),L(Ce,5,this)}get name(){return"taskListItem"}createTags(){return[o.Wz.ListItemNode]}createNodeSpec(e,t){var n;return T(N({content:"paragraph block*",defining:!0,draggable:!1},t),{attrs:T(N({},e.defaults()),{checked:{default:!1}}),parseDOM:[{tag:"li[data-task-list-item]",getAttrs:t=>{let n=!1;return(0,h.hm)(t)&&null!==t.getAttribute("data-checked")&&(n=!0),N({checked:n},e.parse(t))},priority:o.OR.Medium},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["li",T(N({},e.dom(t)),{"data-task-list-item":"","data-checked":t.attrs.checked?"":void 0}),0]})}createNodeViews(){return(e,t,n)=>{const r=document.createElement("input");return r.type="checkbox",r.classList.add(c.$u.LIST_ITEM_CHECKBOX),r.contentEditable="false",r.addEventListener("click",(e=>{t.editable||e.preventDefault()})),r.addEventListener("change",(()=>{const e=n(),r=t.state.doc.resolve(e+1);this.store.commands.toggleCheckboxChecked({$pos:r})})),r.checked=e.attrs.checked,Q({node:e,mark:r,updateDOM:_e,updateMark:Pe})}}createKeymap(){return{Enter:G(this.type)}}createExtensions(){return[new ce]}toggleCheckboxChecked(e){let t,n;return"boolean"===typeof e?t=e:e&&(t=e.checked,n=e.$pos),e=>{let{tr:r,dispatch:o}=e;const s=(0,h.tt)({selection:null!=n?n:r.selection.$from,types:this.type});if(!s)return!1;const{node:i,pos:a}=s,l=T(N({},i.attrs),{checked:null!=t?t:!i.attrs.checked});return null==o||o(r.setNodeMarkup(a,void 0,l)),!0}}createInputRules(){const e=/^\s*(\[( ?|x|X)]\s)$/;return[(0,a.tG)(e,this.type,(e=>({checked:["x","X"].includes((0,h.r3)(e,2))}))),new a.fV(e,((e,t,n,r)=>{const o=e.tr;o.deleteRange(n,r);if(!J({listType:(0,s.ZY)(this.store.schema.nodes,"taskList"),itemType:this.type,tr:o}))return null;const i=["x","X"].includes((0,h.r3)(t,2));if(i){const e=(0,h.tt)({selection:o.selection,types:this.type});e&&o.setNodeMarkup(e.pos,void 0,{checked:i})}return o}))]}};function _e(e,t){e.attrs.checked?t.setAttribute("data-checked",""):t.removeAttribute("data-checked"),t.setAttribute("data-task-list-item","")}function Pe(e,t){t.checked=!!e.attrs.checked}z(Ce=I(Ee),1,"toggleCheckboxChecked",ke,Re),D(Ce,Re);var De=class extends(Ae=r.udg,Te=[(0,r.G5h)({icon:"checkboxMultipleLine",label:e=>{let{t:t}=e;return t(i.kQ.TASK_LIST_LABEL)}})],Ne=[(0,r.pi3)({shortcut:o.s9.TaskList,command:"toggleTaskList"})],Ae){constructor(){super(...arguments),L(Ie,5,this)}get name(){return"taskList"}createTags(){return[o.Wz.Block,o.Wz.ListContainerNode]}createNodeSpec(e,t){var n;return T(N({content:"taskListItem+"},t),{attrs:e.defaults(),parseDOM:[{tag:"ul[data-task-list]",getAttrs:e.parse,priority:o.OR.Medium},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["ul",T(N({},e.dom(t)),{"data-task-list":""}),0]})}createExtensions(){return[new Re({})]}toggleTaskList(){return U(this.type,(0,s.ZY)(this.store.schema.nodes,"taskListItem"))}listShortcut(e){return this.toggleTaskList()(e)}};z(Ie=I(Ae),1,"toggleTaskList",Te,De),z(Ie,1,"listShortcut",Ne,De),D(Ie,De)},43412:(e,t,n)=>{"use strict";n.d(t,{p:()=>le});var r=n(37643),o=n(14736),s=n(28736),i=n(69811),a=n(54518),l=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),m=e=>{throw TypeError(e)},g=(e,t,n)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,y=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&g(e,n,t[n]);if(h)for(var n of h(t))p.call(t,n)&&g(e,n,t[n]);return e},v=(e,t)=>c(e,"name",{value:t,configurable:!0}),b=["class","method","getter","setter","accessor","field","value","get","set"],w=e=>void 0!==e&&"function"!==typeof e?m("Function expected"):e,x=(e,t,n,r,o)=>({kind:b[e],name:t,metadata:r,addInitializer:e=>n._?m("Already initialized"):o.push(w(e||null))}),S=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},O=(e,t,n,r,o,s)=>{var i,a,l,h,u,p=7&t,y=!!(8&t),S=!!(16&t),O=p>3?e.length+1:p?y?1:2:0,k=b[p+5],T=p>3&&(e[O-1]=[]),A=e[O]||(e[O]=[]),I=p&&(!S&&!y&&(o=o.prototype),p<5&&(p>3||!S)&&d(p<4?o:{get[n](){return C(this,s)},set[n](e){return M(this,s,e)}},n));p?S&&p<4&&v(s,(p>2?"set ":p>1?"get ":"")+n):v(o,n);for(var R=r.length-1;R>=0;R--)h=x(p,n,l={},e[3],A),p&&(h.static=y,h.private=S,u=h.access={has:S?e=>E(o,e):e=>n in e},3^p&&(u.get=S?e=>(1^p?C:N)(e,o,4^p?s:I.get):e=>e[n]),p>2&&(u.set=S?(e,t)=>M(e,o,t,4^p?s:I.set):(e,t)=>e[n]=t)),a=(0,r[R])(p?p<4?S?s:I[k]:p>4?void 0:{get:I.get,set:I.set}:o,h),l._=1,4^p||void 0===a?w(a)&&(p>4?T.unshift(a):p?S?s=a:I[k]=a:o=a):"object"!==typeof a||null===a?m("Object expected"):(w(i=a.get)&&(I.get=i),w(i=a.set)&&(I.set=i),w(i=a.init)&&T.unshift(i));return p||((e,t)=>{g(t,f("metadata"),e[3])})(e,o),I&&c(o,n,I),S?4^p?s:I:o},k=(e,t,n)=>t.has(e)||m("Cannot "+n),E=(e,t)=>Object(t)!==t?m('Cannot use the "in" operator on this value'):e.has(t),C=(e,t,n)=>(k(e,t,"read from private field"),n?n.call(e):t.get(e)),M=(e,t,n,r)=>(k(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),N=(e,t,n)=>(k(e,t,"access private method"),n),T={label:e=>{let{t:t}=e;return t(a.Z6.INCREASE_INDENT_LABEL)},icon:"indentIncrease"},A={label:e=>{let{t:t}=e;return t(a.Z6.DECREASE_INDENT_LABEL)},icon:"indentDecrease"},I={label:e=>{let{t:t}=e;return t(a.Z6.CENTER_ALIGN_LABEL)},icon:"alignCenter",active:D((e=>{let{node:t}=e;return"center"===t.attrs.nodeTextAlignment}))},R={label:e=>{let{t:t}=e;return t(a.Z6.JUSTIFY_ALIGN_LABEL)},icon:"alignJustify",active:D((e=>{let{node:t}=e;return"justify"===t.attrs.nodeTextAlignment}))},_={label:e=>{let{t:t}=e;return t(a.Z6.RIGHT_ALIGN_LABEL)},icon:"alignRight",active:D((e=>{let{node:t}=e;return"right"===t.attrs.nodeTextAlignment}))},P={label:e=>{let{t:t}=e;return t(a.Z6.LEFT_ALIGN_LABEL)},icon:"alignLeft",active:D((e=>{let{node:t}=e;const{nodeTextAlignment:n}=t.attrs;return"left"===n||""===n}))};function D(e){return(t,n)=>{let{excludeNodes:r}=t;const{getState:o,nodeTags:s}=n;return z(o(),s.formattingNode,r).some(e)}}function L(e,t,n){return!n.includes(e.name)&&t.includes(e.name)}function z(e,t,n){const r=[],{$from:o,$to:s}=e.selection,i=o.blockRange(s);if(!i)return[];const{parent:a,start:l,end:c}=i;return a.nodeSize-2===c-l&&L(a.type,t,n)?[{node:a,pos:l-1}]:(e.doc.nodesBetween(l,c,((e,o)=>{if(!(o<l||o>c))return L(e.type,t,n)?(r.push({node:e,pos:o}),!1):void 0})),r)}var j="data-node-indent",F="data-node-text-align",B="data-line-height-align";var V,K,$,W,H,U,G,J,q,X,Y,Z,Q,ee,te,ne,re,oe,se=/^\d+(?:\.\d+)?$/,ie=/^(\d+(?:\.\d+)?)%$/;function ae(e){if((0,i.Et)(e))return e;if(!e)return null;const t=e.trim(),n=t.match(ie);if(n)return Number.parseFloat(n[1])/100;const r=t.match(se);return r?Number.parseFloat(r[0]):null}re=[(0,r.ckn)({defaultOptions:{indents:["0","20px","40px","60px","80px","100px","120px","140px","160px","180px","200px"],excludeNodes:[]},staticKeys:["indents"]})];var le=class extends(ne=r.UBi,te=[(0,r.G5h)()],ee=[(0,r.G5h)()],Q=[(0,r.G5h)()],Z=[(0,r.G5h)(I)],Y=[(0,r.G5h)(R)],X=[(0,r.G5h)(P)],q=[(0,r.G5h)(_)],J=[(0,r.G5h)(T)],G=[(0,r.G5h)(A)],U=[(0,r.pi3)({shortcut:o.s9.CenterAlignment,command:"centerAlign"})],H=[(0,r.pi3)({shortcut:o.s9.JustifyAlignment,command:"justifyAlign"})],W=[(0,r.pi3)({shortcut:o.s9.LeftAlignment,command:"leftAlign"})],$=[(0,r.pi3)({shortcut:o.s9.RightAlignment,command:"rightAlign"})],K=[(0,r.pi3)({shortcut:o.s9.IncreaseIndent,command:"increaseIndent",priority:o.OR.Low})],V=[(0,r.pi3)({shortcut:o.s9.DecreaseIndent,command:"decreaseIndent",priority:o.OR.Medium})],ne){constructor(){super(...arguments),S(oe,5,this)}get name(){return"nodeFormatting"}createSchemaAttributes(){return[{identifiers:{type:"node",tags:[o.Wz.FormattingNode],excludeNames:this.options.excludeNodes},attributes:{nodeIndent:this.nodeIndent(),nodeTextAlignment:this.nodeTextAlignment(),nodeLineHeight:this.nodeLineHeight(),style:{default:"",parseDOM:()=>"",toDOM:e=>{let{nodeIndent:t,nodeTextAlignment:n,nodeLineHeight:r,style:o}=e;const i=t?this.options.indents[t]:void 0,a=n&&"none"!==n?n:void 0,l=r||void 0;return{style:(0,s.h$)({marginLeft:i,textAlign:a,lineHeight:l},o)}}}}}]}setLineHeight(e){return this.setNodeAttribute((t=>{let{node:n}=t;if(e!==n.attrs.nodeLineHeight)return{nodeLineHeight:e}}))}setTextAlignment(e){return this.setNodeAttribute((t=>{let{node:n}=t;if(e!==n.attrs.nodeTextAlignment)return{nodeTextAlignment:e}}))}setIndent(e){return this.setNodeAttribute((t=>{let{node:n}=t;var r;const o=null!=(r=n.attrs.nodeIndent)?r:0,s="-1"===e?o-1:"+1"===e?o+1:e,a=(0,i.qE)({min:0,max:this.options.indents.length-1,value:s});if(a!==o)return{nodeIndent:a}}))}centerAlign(){return this.setTextAlignment("center")}justifyAlign(){return this.setTextAlignment("justify")}leftAlign(){return this.setTextAlignment("left")}rightAlign(){return this.setTextAlignment("right")}increaseIndent(){return e=>this.setIndent("+1")(e)}decreaseIndent(){return e=>this.setIndent("-1")(e)}centerAlignShortcut(e){return this.centerAlign()(e)}justifyAlignShortcut(e){return this.justifyAlign()(e)}leftAlignShortcut(e){return this.leftAlign()(e)}rightAlignShortcut(e){return this.rightAlign()(e)}increaseIndentShortcut(e){return this.increaseIndent()(e)}decreaseIndentShortcut(e){return this.decreaseIndent()(e)}nodeIndent(){return{default:null,parseDOM:e=>{var t;return null!=(t=e.getAttribute(j))?t:function(e,t){var n;const r=(0,s.$g)((0,i.HV)(e)),o=(0,s.$g)(null!=t?t:"0"),a=null!=(n=e.length)?n:1,l=r/a;return(0,i.qE)({max:a,min:0,value:Math.floor(o/l)})}(this.options.indents,e.style.marginLeft)},toDOM:e=>{if(!e.nodeIndent)return;const t="".concat(e.nodeIndent);return this.options.indents[e.nodeIndent]?{[j]:t}:void 0}}}nodeTextAlignment(){return{default:null,parseDOM:e=>{var t;return null!=(t=e.getAttribute(F))?t:e.style.textAlign},toDOM:e=>{const t=e.nodeTextAlignment;if(t&&"none"!==t)return{[F]:t}}}}nodeLineHeight(){return{default:null,parseDOM:e=>{var t;return null!=(t=ae(e.getAttribute(B)))?t:ae(e.style.lineHeight)},toDOM:e=>{const t=e.nodeLineHeight;if(t)return{[B]:t.toString()}}}}setNodeAttribute(e){return t=>{const{tr:n,dispatch:r}=t,o=z(n,this.store.nodeTags.formattingNode,this.options.excludeNodes);if((0,i.VP)(o))return!1;if(!r)return!0;const s=[];for(const i of o){const{node:t,pos:n}=i,r=e(i);r&&s.push([n,y(y({},t.attrs),r)])}if((0,i.VP)(s))return!1;if(!r)return!0;for(const[e,i]of s)n.setNodeMarkup(e,void 0,i);return r(n),!0}}};O(oe=(e=>{var t;return[,,,l(null!=(t=null==e?void 0:e[f("metadata")])?t:null)]})(ne),1,"setLineHeight",te,le),O(oe,1,"setTextAlignment",ee,le),O(oe,1,"setIndent",Q,le),O(oe,1,"centerAlign",Z,le),O(oe,1,"justifyAlign",Y,le),O(oe,1,"leftAlign",X,le),O(oe,1,"rightAlign",q,le),O(oe,1,"increaseIndent",J,le),O(oe,1,"decreaseIndent",G,le),O(oe,1,"centerAlignShortcut",U,le),O(oe,1,"justifyAlignShortcut",H,le),O(oe,1,"leftAlignShortcut",W,le),O(oe,1,"rightAlignShortcut",$,le),O(oe,1,"increaseIndentShortcut",K,le),O(oe,1,"decreaseIndentShortcut",V,le),le=O(oe,0,"NodeFormattingExtension",re,le),S(oe,1,le)},48628:(e,t,n)=>{"use strict";n.d(t,{Wt:()=>J,hZ:()=>q,sR:()=>ee});var r,o=n(36934),s=n(69811),i=n(17588),a=n(70377),l=n(37643),c=n(14736),d=n(83207),h=n(28736),u=n(94644),p=n(27908),f=Object.create,m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),x=e=>{throw TypeError(e)},S=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&S(e,n,t[n]);if(y)for(var n of y(t))b.call(t,n)&&S(e,n,t[n]);return e},k=(e,t)=>m(e,"name",{value:t,configurable:!0}),E=["class","method","getter","setter","accessor","field","value","get","set"],C=e=>void 0!==e&&"function"!==typeof e?x("Function expected"):e,M=(e,t,n,r,o)=>({kind:E[e],name:t,metadata:r,addInitializer:e=>n._?x("Already initialized"):o.push(C(e||null))}),N=(e,t,n)=>S(e,"symbol"!==typeof t?t+"":t,n),T=(e,t,n)=>t.has(e)||x("Cannot "+n),A=(e,t)=>Object(t)!==t?x('Cannot use the "in" operator on this value'):e.has(t),I=(e,t,n)=>(T(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n)=>t.has(e)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),_=(e,t,n,r)=>(T(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),P=(e,t,n)=>(T(e,t,"access private method"),n),D=class{constructor(){N(this,"portals",new Map),R(this,r,(0,o.G)()),N(this,"on",(e=>I(this,r).on("update",e))),N(this,"once",(e=>{const t=I(this,r).on("update",(n=>{t(),e(n)}));return t}))}update(){I(this,r).emit("update",this.portals)}render(e){let{Component:t,container:n}=e;var r;const o=this.portals.get(n);this.portals.set(n,{Component:t,key:null!=(r=null==o?void 0:o.key)?r:(0,s.NF)()}),this.update()}forceUpdate(){for(const[e,{Component:t}]of this.portals)this.portals.set(e,{Component:t,key:(0,s.NF)()})}remove(e){this.portals.delete(e),this.update()}};r=new WeakMap;var L,z,j,F,B,V,K,$,W,H,U,G,J=e=>{const{portals:t}=e;return i.createElement(i.Fragment,null,t.map((e=>{let[t,{Component:n,key:r}]=e;return(0,a.createPortal)(i.createElement(n,null),t,r)})))};function q(e){const[t,n]=(0,i.useState)((()=>Array.from(e.portals.entries())));return(0,i.useEffect)((()=>e.on((e=>{n(Array.from(e.entries()))}))),[e]),(0,i.useMemo)((()=>t),[t])}L=new WeakMap,z=new WeakMap,j=new WeakMap,F=new WeakMap,B=new WeakMap,V=new WeakMap,K=new WeakMap,$=new WeakMap,W=new WeakMap,H=new WeakMap,U=new WeakMap,G=new WeakMap;var X,Y,Z,Q=class e{constructor(e){let{getPosition:t,node:n,portalContainer:r,view:o,ReactComponent:a,options:l}=e;var h;R(this,L),R(this,z,[]),R(this,j),R(this,F),R(this,B),R(this,V),R(this,K),R(this,$,!1),R(this,W),R(this,H),R(this,U),R(this,G,(e=>{e&&((0,s.V1)(I(this,H),{code:c.bh.REACT_NODE_VIEW,message:"You have applied a ref to a node view provided for '".concat(I(this,L).type.name,"' which doesn't support content.")}),e.append(I(this,H)))})),N(this,"Component",(()=>{const e=I(this,B);return(0,s.V1)(e,{code:c.bh.REACT_NODE_VIEW,message:"The custom react node view provided for ".concat(I(this,L).type.name," doesn't have a valid ReactComponent")}),i.createElement(e,{updateAttributes:this.updateAttributes,selected:this.selected,view:I(this,j),getPosition:I(this,V),node:I(this,L),forwardRef:I(this,G),decorations:I(this,z)})})),N(this,"updateAttributes",(e=>{if(!I(this,j).editable)return;const t=I(this,V).call(this);if(null==t)return;const n=I(this,j).state.tr.setNodeMarkup(t,void 0,O(O({},I(this,L).attrs),e));I(this,j).dispatch(n)})),(0,s.V1)((0,s.Tn)(t),{message:"You are attempting to use a node view for a mark type. This is not supported yet. Please check your configuration."}),_(this,L,n),_(this,j,o),_(this,F,r),_(this,B,a),_(this,V,t),_(this,K,l),_(this,U,this.createDom());const{contentDOM:u,wrapper:p}=null!=(h=this.createContentDom())?h:{};_(this,W,null!=u?u:void 0),_(this,H,p),I(this,H)&&I(this,U).append(I(this,H)),this.setDomAttributes(I(this,L),I(this,U)),this.Component.displayName=(0,d.fL)("".concat(I(this,L).type.name,"NodeView")),this.renderComponent()}static create(t){const{portalContainer:n,ReactComponent:r,options:o}=t;return(t,s,i)=>new e({options:o,node:t,view:s,getPosition:i,portalContainer:n,ReactComponent:r})}get selected(){return I(this,$)}get contentDOM(){return I(this,W)}get dom(){return I(this,U)}renderComponent(){I(this,F).render({Component:this.Component,container:I(this,U)})}createDom(){const{defaultBlockNode:e,defaultInlineNode:t}=I(this,K),n=I(this,L).isInline?document.createElement(t):document.createElement(e);return n.classList.add("".concat((0,d.kW)(I(this,L).type.name),"-node-view-wrapper")),n}createContentDom(){var e,t;if(I(this,L).isLeaf)return;const n=null==(t=(e=I(this,L).type.spec).toDOM)?void 0:t.call(e,I(this,L));if(!n)return;const{contentDOM:r,dom:o}=u.ZF.renderSpec(document,n);let s;return(0,h.hm)(o)?(s=o,o===r&&(s=document.createElement("span"),s.classList.add("".concat((0,d.kW)(I(this,L).type.name),"-node-view-content-wrapper")),s.append(r)),(0,h.hm)(r),{wrapper:s,contentDOM:r}):void 0}update(e,t){return!!(0,h.WS)({types:I(this,L).type,node:e})&&(I(this,L)===e&&I(this,z)===t||(I(this,L).sameMarkup(e)||this.setDomAttributes(e,I(this,U)),_(this,L,e),_(this,z,t),this.renderComponent()),!0)}setDomAttributes(e,t){const{toDOM:n}=I(this,L).type.spec;let r=e.attrs;if(n){const t=n(e);if((0,s.Kg)(t)||(o=t,(0,h.xh)(o)||(0,s.Qd)(o)&&(0,h.xh)(o.dom)))return;(0,s.Qd)(t[1])&&(r=t[1])}var o;for(const[i,a]of(0,s.jO)(r))t.setAttribute(i,a)}selectNode(){_(this,$,!0),I(this,U)&&I(this,U).classList.add(c._S),this.renderComponent()}deselectNode(){_(this,$,!1),I(this,U)&&I(this,U).classList.remove(c._S),this.renderComponent()}destroy(){I(this,F).remove(I(this,U))}ignoreMutation(e){return"selection"===e.type?!I(this,L).type.spec.selectable:!I(this,H)||!I(this,H).contains(e.target)}stopEvent(e){var t;if(!I(this,U))return!1;if((0,s.Tn)(I(this,K).stopEvent))return I(this,K).stopEvent({event:e});const n=e.target;if(!(I(this,U).contains(n)&&!(null==(t=this.contentDOM)?void 0:t.contains(n))))return!1;const r="drop"===e.type;if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(n.tagName)||n.isContentEditable)&&!r)return!0;const o=!!I(this,L).type.spec.draggable,i=p.nh.isSelectable(I(this,L)),a="copy"===e.type,l="paste"===e.type,c="cut"===e.type,d="mousedown"===e.type,h=e.type.startsWith("drag");return!o&&i&&h&&e.preventDefault(),!(h||r||a||l||c||d&&i)}};X=[(0,l.ckn)({defaultOptions:{defaultBlockNode:"div",defaultInlineNode:"span",defaultContentNode:"span",defaultEnvironment:"both",nodeViewComponents:{},stopEvent:null},staticKeys:["defaultBlockNode","defaultInlineNode","defaultContentNode","defaultEnvironment"]})];var ee=class extends(Z=l.UBi){constructor(){super(...arguments),N(this,"portalContainer",new D)}get name(){return"reactComponent"}onCreate(){this.store.setStoreKey("portalContainer",this.portalContainer)}createNodeViews(){var e;const t=(0,s.Ik)(),n=null!=(e=this.store.managerSettings.nodeViewComponents)?e:{};for(const o of this.store.extensions)o.ReactComponent&&(0,l.I2T)(o)&&"ssr"!==o.reactComponentEnvironment&&(t[o.name]=Q.create({options:this.options,ReactComponent:o.ReactComponent,portalContainer:this.portalContainer}));const r=(0,s.jO)(O(O({},this.options.nodeViewComponents),n));for(const[o,s]of r)t[o]=Q.create({options:this.options,ReactComponent:s,portalContainer:this.portalContainer});return t}};((e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r)})(Y=(e=>{var t;return[,,,f(null!=(t=null==e?void 0:e[w("metadata")])?t:null)]})(Z),1,ee=((e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,y=E[h+5],v=h>3&&(e[f-1]=[]),b=e[f]||(e[f]=[]),O=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&g(h<4?o:{get[n](){return I(this,s)},set[n](e){return _(this,s,e)}},n));h?p&&h<4&&k(s,(h>2?"set ":h>1?"get ":"")+n):k(o,n);for(var N=r.length-1;N>=0;N--)c=M(h,n,l={},e[3],b),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>A(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?I:P)(e,o,4^h?s:O.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>_(e,o,t,4^h?s:O.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?p?s:O[y]:h>4?void 0:{get:O.get,set:O.set}:o,c),l._=1,4^h||void 0===a?C(a)&&(h>4?v.unshift(a):h?p?s=a:O[y]=a:o=a):"object"!==typeof a||null===a?x("Object expected"):(C(i=a.get)&&(O.get=i),C(i=a.set)&&(O.set=i),C(i=a.init)&&v.unshift(i));return h||((e,t)=>{S(t,w("metadata"),e[3])})(e,o),O&&m(o,n,O),p?4^h?s:O:o})(Y,0,"ReactComponentExtension",X,ee))},82260:(e,t,n)=>{"use strict";n.d(t,{E:()=>P});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(54518),h=Object.create,u=Object.defineProperty,p=Object.defineProperties,f=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),w=e=>{throw TypeError(e)},x=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>u(e,"name",{value:t,configurable:!0}),O=["class","method","getter","setter","accessor","field","value","get","set"],k=e=>void 0!==e&&"function"!==typeof e?w("Function expected"):e,E=(e,t,n,r,o)=>({kind:O[e],name:t,metadata:r,addInitializer:e=>n._?w("Already initialized"):o.push(k(e||null))}),C=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},M=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,p=!!(8&t),m=!!(16&t),g=h>3?e.length+1:h?p?1:2:0,y=O[h+5],v=h>3&&(e[g-1]=[]),C=e[g]||(e[g]=[]),M=h&&(!m&&!p&&(o=o.prototype),h<5&&(h>3||!m)&&f(h<4?o:{get[n](){return A(this,s)},set[n](e){return I(this,s,e)}},n));h?m&&h<4&&S(s,(h>2?"set ":h>1?"get ":"")+n):S(o,n);for(var N=r.length-1;N>=0;N--)c=E(h,n,l={},e[3],C),h&&(c.static=p,c.private=m,d=c.access={has:m?e=>T(o,e):e=>n in e},3^h&&(d.get=m?e=>(1^h?A:R)(e,o,4^h?s:M.get):e=>e[n]),h>2&&(d.set=m?(e,t)=>I(e,o,t,4^h?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?m?s:M[y]:h>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^h||void 0===a?k(a)&&(h>4?v.unshift(a):h?m?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?w("Object expected"):(k(i=a.get)&&(M.get=i),k(i=a.set)&&(M.set=i),k(i=a.init)&&v.unshift(i));return h||((e,t)=>{x(t,b("metadata"),e[3])})(e,o),M&&u(o,n,M),m?4^h?s:M:o},N=(e,t,n)=>t.has(e)||w("Cannot "+n),T=(e,t)=>Object(t)!==t?w('Cannot use the "in" operator on this value'):e.has(t),A=(e,t,n)=>(N(e,t,"read from private field"),n?n.call(e):t.get(e)),I=(e,t,n,r)=>(N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),R=(e,t,n)=>(N(e,t,"access private method"),n),_={icon:"subscript",label:e=>{let{t:t}=e;return t(d.E9.LABEL)}};i=[(0,l.ckn)({})];var P=class extends(s=l.z1i,o=[(0,l.G5h)(_)],r=[(0,l.pi3)({shortcut:c.s9.Subscript,command:"toggleSubscript"})],s){constructor(){super(...arguments),C(a,5,this)}get name(){return"sub"}createTags(){return[c.Wz.FormattingMark,c.Wz.FontStyle]}createMarkSpec(e,t){var n,r,o;return r=((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&x(e,n,t[n]);if(g)for(var n of g(t))v.call(t,n)&&x(e,n,t[n]);return e})({},t),o={attrs:e.defaults(),parseDOM:[{tag:"sub",getAttrs:e.parse},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["sub",e.dom(t),0]},p(r,m(o))}toggleSubscript(){return(0,l.wh)({type:this.type})}shortcut(e){return this.toggleSubscript()(e)}};M(a=(e=>{var t;return[,,,h(null!=(t=null==e?void 0:e[b("metadata")])?t:null)]})(s),1,"toggleSubscript",o,P),M(a,1,"shortcut",r,P),P=M(a,0,"SubExtension",i,P),C(a,1,P)},59292:(e,t,n)=>{"use strict";n.d(t,{u:()=>P});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(54518),h=Object.create,u=Object.defineProperty,p=Object.defineProperties,f=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),w=e=>{throw TypeError(e)},x=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>u(e,"name",{value:t,configurable:!0}),O=["class","method","getter","setter","accessor","field","value","get","set"],k=e=>void 0!==e&&"function"!==typeof e?w("Function expected"):e,E=(e,t,n,r,o)=>({kind:O[e],name:t,metadata:r,addInitializer:e=>n._?w("Already initialized"):o.push(k(e||null))}),C=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},M=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,p=!!(8&t),m=!!(16&t),g=h>3?e.length+1:h?p?1:2:0,y=O[h+5],v=h>3&&(e[g-1]=[]),C=e[g]||(e[g]=[]),M=h&&(!m&&!p&&(o=o.prototype),h<5&&(h>3||!m)&&f(h<4?o:{get[n](){return A(this,s)},set[n](e){return I(this,s,e)}},n));h?m&&h<4&&S(s,(h>2?"set ":h>1?"get ":"")+n):S(o,n);for(var N=r.length-1;N>=0;N--)c=E(h,n,l={},e[3],C),h&&(c.static=p,c.private=m,d=c.access={has:m?e=>T(o,e):e=>n in e},3^h&&(d.get=m?e=>(1^h?A:R)(e,o,4^h?s:M.get):e=>e[n]),h>2&&(d.set=m?(e,t)=>I(e,o,t,4^h?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?m?s:M[y]:h>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^h||void 0===a?k(a)&&(h>4?v.unshift(a):h?m?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?w("Object expected"):(k(i=a.get)&&(M.get=i),k(i=a.set)&&(M.set=i),k(i=a.init)&&v.unshift(i));return h||((e,t)=>{x(t,b("metadata"),e[3])})(e,o),M&&u(o,n,M),m?4^h?s:M:o},N=(e,t,n)=>t.has(e)||w("Cannot "+n),T=(e,t)=>Object(t)!==t?w('Cannot use the "in" operator on this value'):e.has(t),A=(e,t,n)=>(N(e,t,"read from private field"),n?n.call(e):t.get(e)),I=(e,t,n,r)=>(N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),R=(e,t,n)=>(N(e,t,"access private method"),n),_={icon:"superscript",label:e=>{let{t:t}=e;return t(d.cs.LABEL)}};i=[(0,l.ckn)({})];var P=class extends(s=l.z1i,o=[(0,l.G5h)(_)],r=[(0,l.pi3)({shortcut:c.s9.Superscript,command:"toggleSuperscript"})],s){constructor(){super(...arguments),C(a,5,this)}get name(){return"sup"}createTags(){return[c.Wz.FormattingMark,c.Wz.FontStyle]}createMarkSpec(e,t){var n,r,o;return r=((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&x(e,n,t[n]);if(g)for(var n of g(t))v.call(t,n)&&x(e,n,t[n]);return e})({},t),o={attrs:e.defaults(),parseDOM:[{tag:"sup",getAttrs:e.parse},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["sup",e.dom(t),0]},p(r,m(o))}toggleSuperscript(){return(0,l.wh)({type:this.type})}shortcut(e){return this.toggleSuperscript()(e)}};M(a=(e=>{var t;return[,,,h(null!=(t=null==e?void 0:e[b("metadata")])?t:null)]})(s),1,"toggleSuperscript",o,P),M(a,1,"shortcut",r,P),P=M(a,0,"SupExtension",i,P),C(a,1,P)},7540:(e,t,n)=>{"use strict";n.d(t,{p:()=>V});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(28736),h=n(69811),u=n(54518),p=Object.create,f=Object.defineProperty,m=Object.defineProperties,g=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,x=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),S=e=>{throw TypeError(e)},O=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&O(e,n,t[n]);if(v)for(var n of v(t))w.call(t,n)&&O(e,n,t[n]);return e},E=(e,t)=>m(e,y(t)),C=(e,t)=>f(e,"name",{value:t,configurable:!0}),M=["class","method","getter","setter","accessor","field","value","get","set"],N=e=>void 0!==e&&"function"!==typeof e?S("Function expected"):e,T=(e,t,n,r,o)=>({kind:M[e],name:t,metadata:r,addInitializer:e=>n._?S("Already initialized"):o.push(N(e||null))}),A=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},I=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),m=h>3?e.length+1:h?u?1:2:0,y=M[h+5],v=h>3&&(e[m-1]=[]),b=e[m]||(e[m]=[]),w=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&g(h<4?o:{get[n](){return P(this,s)},set[n](e){return D(this,s,e)}},n));h?p&&h<4&&C(s,(h>2?"set ":h>1?"get ":"")+n):C(o,n);for(var k=r.length-1;k>=0;k--)c=T(h,n,l={},e[3],b),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>_(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?P:L)(e,o,4^h?s:w.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>D(e,o,t,4^h?s:w.set):(e,t)=>e[n]=t)),a=(0,r[k])(h?h<4?p?s:w[y]:h>4?void 0:{get:w.get,set:w.set}:o,c),l._=1,4^h||void 0===a?N(a)&&(h>4?v.unshift(a):h?p?s=a:w[y]=a:o=a):"object"!==typeof a||null===a?S("Object expected"):(N(i=a.get)&&(w.get=i),N(i=a.set)&&(w.set=i),N(i=a.init)&&v.unshift(i));return h||((e,t)=>{O(t,x("metadata"),e[3])})(e,o),w&&f(o,n,w),p?4^h?s:w:o},R=(e,t,n)=>t.has(e)||S("Cannot "+n),_=(e,t)=>Object(t)!==t?S('Cannot use the "in" operator on this value'):e.has(t),P=(e,t,n)=>(R(e,t,"read from private field"),n?n.call(e):t.get(e)),D=(e,t,n,r)=>(R(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),L=(e,t,n)=>(R(e,t,"access private method"),n),z={icon:"fontSize2",label:e=>{let{t:t}=e;return t(u.h8.TOGGLE_LABEL)}},j="data-text-case",F=["uppercase","lowercase","capitalize","small-caps"];function B(e){return(0,h.mK)(F,e)}i=[(0,l.ckn)({defaultOptions:{defaultCasing:"none"},staticKeys:["defaultCasing"]})];var V=class extends(s=l.z1i,o=[(0,l.G5h)(z)],r=[(0,l.G5h)()],s){constructor(){super(...arguments),A(a,5,this)}get name(){return"textCase"}createTags(){return[c.Wz.FontStyle,c.Wz.FormattingMark]}createMarkSpec(e,t){var n;return E(k({},t),{attrs:E(k({},e.defaults()),{casing:{default:this.options.defaultCasing}}),parseDOM:[{tag:"span[".concat(j,"]"),getAttrs:t=>{if(!(0,d.hm)(t))return!1;const n=t.getAttribute(j);return!(!n||"none"===n)&&E(k({},e.parse(t)),{casing:n})}},{style:"text-transform",priority:c.OR.Low,getAttrs:e=>!!B(e)&&{casing:e}},{style:"font-variant",priority:c.OR.Low,getAttrs:e=>!!B(e)&&{casing:e}},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{let{casing:n}=(0,d.dV)(t.attrs,e);const r=e.dom(t);let o=r.style;B(n)||(n="none");const s="small-caps"===n?"fontVariant":"textTransform";return o=(0,d.h$)({[s]:n},o),["span",E(k({},r),{style:o,[j]:n}),0]}})}toggleTextCase(){return this.store.commands.toggleMark.original({type:this.type,attrs:{casing:this.options.defaultCasing}})}setTextCase(e,t){const n="string"===typeof e?{casing:e}:e;return this.store.commands.applyMark.original(this.type,n,t)}};I(a=(e=>{var t;return[,,,p(null!=(t=null==e?void 0:e[x("metadata")])?t:null)]})(s),1,"toggleTextCase",o,V),I(a,1,"setTextCase",r,V),V=I(a,0,"TextCaseExtension",i,V),A(a,1,V)},50260:(e,t,n)=>{"use strict";n.d(t,{MF:()=>z,uj:()=>U});var r=n(36065),o=n(37643),s=n(14736),i=n(28736),a=n(69811),l=n(54518),c=n(34220),d=Object.create,h=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,v=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),b=e=>{throw TypeError(e)},w=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x=(e,t)=>{for(var n in t||(t={}))g.call(t,n)&&w(e,n,t[n]);if(m)for(var n of m(t))y.call(t,n)&&w(e,n,t[n]);return e},S=(e,t)=>u(e,f(t)),O=(e,t)=>h(e,"name",{value:t,configurable:!0}),k=["class","method","getter","setter","accessor","field","value","get","set"],E=e=>void 0!==e&&"function"!==typeof e?b("Function expected"):e,C=(e,t,n,r,o)=>({kind:k[e],name:t,metadata:r,addInitializer:e=>n._?b("Already initialized"):o.push(E(e||null))}),M=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},N=(e,t,n,r,o,s)=>{var i,a,l,c,d,u=7&t,f=!!(8&t),m=!!(16&t),g=u>3?e.length+1:u?f?1:2:0,y=k[u+5],x=u>3&&(e[g-1]=[]),S=e[g]||(e[g]=[]),M=u&&(!m&&!f&&(o=o.prototype),u<5&&(u>3||!m)&&p(u<4?o:{get[n](){return I(this,s)},set[n](e){return R(this,s,e)}},n));u?m&&u<4&&O(s,(u>2?"set ":u>1?"get ":"")+n):O(o,n);for(var N=r.length-1;N>=0;N--)c=C(u,n,l={},e[3],S),u&&(c.static=f,c.private=m,d=c.access={has:m?e=>A(o,e):e=>n in e},3^u&&(d.get=m?e=>(1^u?I:_)(e,o,4^u?s:M.get):e=>e[n]),u>2&&(d.set=m?(e,t)=>R(e,o,t,4^u?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(u?u<4?m?s:M[y]:u>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^u||void 0===a?E(a)&&(u>4?x.unshift(a):u?m?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?b("Object expected"):(E(i=a.get)&&(M.get=i),E(i=a.set)&&(M.set=i),E(i=a.init)&&x.unshift(i));return u||((e,t)=>{w(t,v("metadata"),e[3])})(e,o),M&&h(o,n,M),m?4^u?s:M:o},T=(e,t,n)=>t.has(e)||b("Cannot "+n),A=(e,t)=>Object(t)!==t?b('Cannot use the "in" operator on this value'):e.has(t),I=(e,t,n)=>(T(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n,r)=>(T(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),_=(e,t,n)=>(T(e,t,"access private method"),n),P={icon:"fontColor",description:e=>{let{t:t}=e;return t(l.kP.SET_COLOR_DESCRIPTION)},label:e=>{let{t:t}=e;return t(l.kP.SET_COLOR_LABEL)}},D=(0,a.y1)([10]);function L(e){const{t:t,name:n,labelDescriptor:r,hueDescriptor:o}=e;return{label:t(r),hues:D.map((e=>({label:t(o,{hue:e}),color:(0,c.Lz)("hue",n,e)})))}}function z(e){const t={label:e(l.kP.BLACK),color:"#000"},n={label:e(l.kP.WHITE),color:"#fff"},r={label:e(l.kP.TRANSPARENT),color:"transparent"};return{black:t,hues:{gray:L({t:e,name:"gray",labelDescriptor:l.kP.GRAY,hueDescriptor:l.kP.GRAY_HUE}),blue:L({t:e,name:"blue",labelDescriptor:l.kP.BLUE,hueDescriptor:l.kP.BLUE_HUE}),cyan:L({t:e,name:"cyan",labelDescriptor:l.kP.CYAN,hueDescriptor:l.kP.CYAN_HUE}),grape:L({t:e,name:"grape",labelDescriptor:l.kP.GRAPE,hueDescriptor:l.kP.GRAPE_HUE}),green:L({t:e,name:"green",labelDescriptor:l.kP.GREEN,hueDescriptor:l.kP.GREEN_HUE}),indigo:L({t:e,name:"indigo",labelDescriptor:l.kP.INDIGO,hueDescriptor:l.kP.INDIGO_HUE}),lime:L({t:e,name:"lime",labelDescriptor:l.kP.LIME,hueDescriptor:l.kP.LIME_HUE}),orange:L({t:e,name:"orange",labelDescriptor:l.kP.ORANGE,hueDescriptor:l.kP.ORANGE_HUE}),pink:L({t:e,name:"pink",labelDescriptor:l.kP.PINK,hueDescriptor:l.kP.PINK_HUE}),red:L({t:e,name:"red",labelDescriptor:l.kP.RED,hueDescriptor:l.kP.RED_HUE}),teal:L({t:e,name:"teal",labelDescriptor:l.kP.TEAL,hueDescriptor:l.kP.TEAL_HUE}),violet:L({t:e,name:"violet",labelDescriptor:l.kP.VIOLET,hueDescriptor:l.kP.VIOLET_HUE}),yellow:L({t:e,name:"yellow",labelDescriptor:l.kP.YELLOW,hueDescriptor:l.kP.YELLOW_HUE})},transparent:r,white:n}}var j,F,B,V,K,$,W=/^var\((--[A-Za-z-]+)\);?/,H="data-text-color-mark";K=[(0,o.ckn)({defaultOptions:{defaultColor:"",palette:z},staticKeys:["defaultColor"]})];var U=class extends(V=o.z1i,B=[(0,o.G5h)(P)],F=[(0,o.G5h)()],j=[(0,o.dwU)()],V){constructor(){super(...arguments),M($,5,this)}get name(){return"textColor"}createTags(){return[s.Wz.FormattingMark,s.Wz.FontStyle]}createMarkSpec(e,t){var n;return S(x({},t),{attrs:S(x({},e.defaults()),{color:{default:this.options.defaultColor}}),parseDOM:[{tag:"span[".concat(H,"]"),getAttrs:t=>{if(!(0,i.hm)(t))return null;const n=t.getAttribute(H);return n?S(x({},e.parse(t)),{color:n}):null}},{style:"color",priority:s.OR.Low,getAttrs:e=>(0,a.Kg)(e)?{color:e}:null},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const n=(0,i.dV)(t.attrs,e),{color:r}=n,o=((e,t)=>{var n={};for(var r in e)g.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&m)for(var r of m(e))t.indexOf(r)<0&&y.call(e,r)&&(n[r]=e[r]);return n})(n,["color"]),s=e.dom(t);let a=s.style;return r&&(a=(0,i.h$)({color:r},a)),["span",S(x(x({},o),s),{style:a,[H]:r}),0]}})}setTextColor(e,t){return this.store.commands.applyMark.original(this.type,{color:e},null==t?void 0:t.selection)}removeTextColor(e){return this.store.commands.removeMark.original(S(x({type:this.type},e),{expand:!0}))}getHexColor(e){const t=e.match(W),n=null==t?void 0:t[1];return n&&(e=getComputedStyle(this.store.view.dom).getPropertyValue(n)),(0,r.nj)(e)}};N($=(e=>{var t;return[,,,d(null!=(t=null==e?void 0:e[v("metadata")])?t:null)]})(V),1,"setTextColor",B,U),N($,1,"removeTextColor",F,U),N($,1,"getHexColor",j,U),U=N($,0,"TextColorExtension",K,U),M($,1,U)},93542:(e,t,n)=>{"use strict";n.d(t,{f:()=>B});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(28736),h=n(69811),u=n(50260),p=n(54518),f=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.getOwnPropertyDescriptor,v=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,S=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),O=e=>{throw TypeError(e)},k=(e,t,n)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E=(e,t)=>{for(var n in t||(t={}))w.call(t,n)&&k(e,n,t[n]);if(b)for(var n of b(t))x.call(t,n)&&k(e,n,t[n]);return e},C=(e,t)=>g(e,v(t)),M=(e,t)=>m(e,"name",{value:t,configurable:!0}),N=["class","method","getter","setter","accessor","field","value","get","set"],T=e=>void 0!==e&&"function"!==typeof e?O("Function expected"):e,A=(e,t,n,r,o)=>({kind:N[e],name:t,metadata:r,addInitializer:e=>n._?O("Already initialized"):o.push(T(e||null))}),I=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},R=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,g=N[h+5],v=h>3&&(e[f-1]=[]),b=e[f]||(e[f]=[]),w=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&y(h<4?o:{get[n](){return D(this,s)},set[n](e){return L(this,s,e)}},n));h?p&&h<4&&M(s,(h>2?"set ":h>1?"get ":"")+n):M(o,n);for(var x=r.length-1;x>=0;x--)c=A(h,n,l={},e[3],b),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>P(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?D:z)(e,o,4^h?s:w.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>L(e,o,t,4^h?s:w.set):(e,t)=>e[n]=t)),a=(0,r[x])(h?h<4?p?s:w[g]:h>4?void 0:{get:w.get,set:w.set}:o,c),l._=1,4^h||void 0===a?T(a)&&(h>4?v.unshift(a):h?p?s=a:w[g]=a:o=a):"object"!==typeof a||null===a?O("Object expected"):(T(i=a.get)&&(w.get=i),T(i=a.set)&&(w.set=i),T(i=a.init)&&v.unshift(i));return h||((e,t)=>{k(t,S("metadata"),e[3])})(e,o),w&&m(o,n,w),p?4^h?s:w:o},_=(e,t,n)=>t.has(e)||O("Cannot "+n),P=(e,t)=>Object(t)!==t?O('Cannot use the "in" operator on this value'):e.has(t),D=(e,t,n)=>(_(e,t,"read from private field"),n?n.call(e):t.get(e)),L=(e,t,n,r)=>(_(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),z=(e,t,n)=>(_(e,t,"access private method"),n),j={icon:"markPenLine",description:e=>{let{t:t}=e;return t(p.zy.DESCRIPTION)},label:e=>{let{t:t}=e;return t(p.zy.LABEL)}},F="data-text-highlight-mark";i=[(0,l.ckn)({defaultOptions:{defaultHighlight:"",palette:u.MF},staticKeys:["defaultHighlight"]})];var B=class extends(s=l.z1i,o=[(0,l.G5h)(j)],r=[(0,l.G5h)()],s){constructor(){super(...arguments),I(a,5,this)}get name(){return"textHighlight"}createTags(){return[c.Wz.FormattingMark,c.Wz.FontStyle]}createMarkSpec(e,t){var n;return C(E({},t),{attrs:C(E({},e.defaults()),{highlight:{default:this.options.defaultHighlight}}),parseDOM:[{tag:"span[".concat(F,"]"),getAttrs:t=>{if(!(0,d.hm)(t))return null;const n=t.getAttribute(F);return n?C(E({},e.parse(t)),{highlight:n}):null}},{tag:"span[".concat(F,"]"),getAttrs:t=>{if(!(0,d.hm)(t))return null;const n=t.getAttribute(F);return n?C(E({},e.parse(t)),{highlight:n}):null}},{style:"background-color",priority:c.OR.Low,getAttrs:e=>(0,h.Kg)(e)?{highlight:e}:null},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>{const n=(0,d.dV)(t.attrs,e),{highlight:r}=n,o=((e,t)=>{var n={};for(var r in e)w.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&b)for(var r of b(e))t.indexOf(r)<0&&x.call(e,r)&&(n[r]=e[r]);return n})(n,["highlight"]),s=e.dom(t);let i=s.style;return r&&(i=(0,d.h$)({backgroundColor:r},i)),["mark",C(E(E({},o),s),{style:i,[F]:r}),0]}})}setTextHighlight(e,t){return this.store.commands.applyMark.original(this.type,{highlight:e},null==t?void 0:t.selection)}removeTextHighlight(e){return this.store.commands.removeMark.original(C(E({type:this.type},e),{expand:!0}))}};R(a=(e=>{var t;return[,,,f(null!=(t=null==e?void 0:e[S("metadata")])?t:null)]})(s),1,"setTextHighlight",o,B),R(a,1,"removeTextHighlight",r,B),B=R(a,0,"TextHighlightExtension",i,B),I(a,1,B)},30620:(e,t,n)=>{"use strict";n.d(t,{U:()=>P});var r,o,s,i,a,l=n(37643),c=n(14736),d=n(54518),h=Object.create,u=Object.defineProperty,p=Object.defineProperties,f=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),w=e=>{throw TypeError(e)},x=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>u(e,"name",{value:t,configurable:!0}),O=["class","method","getter","setter","accessor","field","value","get","set"],k=e=>void 0!==e&&"function"!==typeof e?w("Function expected"):e,E=(e,t,n,r,o)=>({kind:O[e],name:t,metadata:r,addInitializer:e=>n._?w("Already initialized"):o.push(k(e||null))}),C=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},M=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,p=!!(8&t),m=!!(16&t),g=h>3?e.length+1:h?p?1:2:0,y=O[h+5],v=h>3&&(e[g-1]=[]),C=e[g]||(e[g]=[]),M=h&&(!m&&!p&&(o=o.prototype),h<5&&(h>3||!m)&&f(h<4?o:{get[n](){return A(this,s)},set[n](e){return I(this,s,e)}},n));h?m&&h<4&&S(s,(h>2?"set ":h>1?"get ":"")+n):S(o,n);for(var N=r.length-1;N>=0;N--)c=E(h,n,l={},e[3],C),h&&(c.static=p,c.private=m,d=c.access={has:m?e=>T(o,e):e=>n in e},3^h&&(d.get=m?e=>(1^h?A:R)(e,o,4^h?s:M.get):e=>e[n]),h>2&&(d.set=m?(e,t)=>I(e,o,t,4^h?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?m?s:M[y]:h>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^h||void 0===a?k(a)&&(h>4?v.unshift(a):h?m?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?w("Object expected"):(k(i=a.get)&&(M.get=i),k(i=a.set)&&(M.set=i),k(i=a.init)&&v.unshift(i));return h||((e,t)=>{x(t,b("metadata"),e[3])})(e,o),M&&u(o,n,M),m?4^h?s:M:o},N=(e,t,n)=>t.has(e)||w("Cannot "+n),T=(e,t)=>Object(t)!==t?w('Cannot use the "in" operator on this value'):e.has(t),A=(e,t,n)=>(N(e,t,"read from private field"),n?n.call(e):t.get(e)),I=(e,t,n,r)=>(N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),R=(e,t,n)=>(N(e,t,"access private method"),n),_={icon:"underline",label:e=>{let{t:t}=e;return t(d.Me.LABEL)},description:e=>{let{t:t}=e;return t(d.Me.DESCRIPTION)}};i=[(0,l.ckn)({})];var P=class extends(s=l.z1i,o=[(0,l.G5h)(_)],r=[(0,l.pi3)({shortcut:c.s9.Underline,command:"toggleUnderline"})],s){constructor(){super(...arguments),C(a,5,this)}get name(){return"underline"}createTags(){return[c.Wz.FontStyle,c.Wz.FormattingMark]}createMarkSpec(e,t){var n,r,o;return r=((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&x(e,n,t[n]);if(g)for(var n of g(t))v.call(t,n)&&x(e,n,t[n]);return e})({},t),o={attrs:e.defaults(),parseDOM:[{tag:"u",getAttrs:e.parse},{style:"text-decoration",getAttrs:e=>"underline"===e&&{}},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["u",e.dom(t),0]},p(r,m(o))}toggleUnderline(e){return(0,l.wh)({type:this.type,selection:e})}shortcut(e){return this.toggleUnderline()(e)}};M(a=(e=>{var t;return[,,,h(null!=(t=null==e?void 0:e[b("metadata")])?t:null)]})(s),1,"toggleUnderline",o,P),M(a,1,"shortcut",r,P),P=M(a,0,"UnderlineExtension",i,P),C(a,1,P)},54518:(e,t,n)=>{"use strict";n.d(t,{E9:()=>h,KV:()=>r,Me:()=>$,NO:()=>o,OP:()=>a,Ox:()=>i,QK:()=>s,Z6:()=>c,cs:()=>u,h8:()=>f,kP:()=>V,kQ:()=>l,ue:()=>d,zy:()=>K});var r=Object.freeze({__proto__:null,COPY_DESCRIPTION:{id:"extension.command.copy.description",comment:"Description for copy command.",message:"Copy the selected text"},COPY_LABEL:{id:"extension.command.copy.label",comment:"Label for copy command.",message:"Copy"},CUT_DESCRIPTION:{id:"extension.command.cut.description",comment:"Description for cut command.",message:"Cut the selected text"},CUT_LABEL:{id:"extension.command.cut.label",comment:"Label for cut command.",message:"Cut"},PASTE_DESCRIPTION:{id:"extension.command.paste.description",comment:"Description for paste command.",message:"Paste content into the editor"},PASTE_LABEL:{id:"extension.command.paste.label",comment:"Label for paste command.",message:"Paste"},SELECT_ALL_DESCRIPTION:{id:"extension.command.select-all.description",comment:"Description for select all command.",message:"Select all content within the editor"},SELECT_ALL_LABEL:{id:"extension.command.select-all.label",comment:"Label for select all command.",message:"Select all"}});var o=Object.freeze({__proto__:null,DESCRIPTION:{id:"extension.command.toggle-bold.description",comment:"Description for bold formatting command.",message:"Add bold formatting to the selected text"},LABEL:{id:"extension.command.toggle-bold.label",comment:"Label for bold formatting command.",message:"Bold"}});var s=Object.freeze({__proto__:null,DECREASE_DESCRIPTION:{id:"extension.command.decrease-font-size.description",comment:"Description for decreasing the font size.",message:"Decrease the font size."},DECREASE_LABEL:{id:"extension.command.decrease-font-size.label",comment:"Label for decreasing the font size.",message:"Decrease"},INCREASE_DESCRIPTION:{id:"extension.command.increase-font-size.description",comment:"Description for increasing the font size.",message:"Increase the font size"},INCREASE_LABEL:{id:"extension.command.increase-font-size.label",comment:"Label for increasing the font size.",message:"Increase"},SET_DESCRIPTION:{id:"extension.command.set-font-size.description",comment:"Description for adding a font size.",message:"Set the font size for the selected text."},SET_LABEL:{id:"extension.command.set-font-size.label",comment:"Label for adding a font size.",message:"Font size"}});var i=Object.freeze({__proto__:null,REDO_DESCRIPTION:{id:"extension.command.redo.description",comment:"Description for redo.",message:"Redo the most recent action"},REDO_LABEL:{id:"extension.command.redo.label",comment:"Label for redo.",message:"Redo"},UNDO_DESCRIPTION:{id:"extension.command.undo.description",comment:"Description for undo.",message:"Undo the most recent action"},UNDO_LABEL:{id:"extension.command.undo.label",comment:"Label for undo.",message:"Undo"}});var a=Object.freeze({__proto__:null,DESCRIPTION:{id:"extension.command.toggle-italic.description",comment:"Description for italic formatting command.",message:"Italicize the selected text"},LABEL:{id:"extension.command.toggle-italic.label",comment:"Label for italic formatting command.",message:"Italic"}});var l=Object.freeze({__proto__:null,BULLET_LIST_LABEL:{id:"extension.command.toggle-bullet-list.description",comment:"Description for inserting a bullet list into the editor.",message:"Bulleted list"},ORDERED_LIST_LABEL:{id:"extension.command.toggle-ordered-list.label",comment:"Label for inserting an ordered list into the editor.",message:"Ordered list"},TASK_LIST_LABEL:{id:"extension.command.toggle-task-list.description",comment:"Description for inserting a task list into the editor.",message:"Tasked list"}});var c=Object.freeze({__proto__:null,CENTER_ALIGN_LABEL:{id:"extension.command.center-align.label",comment:"Center align the text in the current node.",message:"Center align"},DECREASE_INDENT_LABEL:{id:"extension.command.decrease-indent.label",comment:"Label for decreasing the indentation level of the current node block.",message:"Decrease indentation"},INCREASE_INDENT_LABEL:{id:"extension.command.increase-indent.label",comment:"Label for increasing the indentation level.",message:"Increase indentation"},JUSTIFY_ALIGN_LABEL:{id:"extension.command.justify-align.label",comment:"Justify the alignment of the selected nodes.",message:"Justify"},LEFT_ALIGN_LABEL:{id:"extension.command.left-align.label",comment:"Left align the selected nodes.",message:"Left align"},RIGHT_ALIGN_LABEL:{id:"extension.command.right-align.label",comment:"Right align the selected nodes.",message:"Right align"}});var d=Object.freeze({__proto__:null,CONVERT_DESCRIPTION:{id:"extension.command.convert-paragraph.description",comment:"Description for converting a paragraph.",message:"Convert current block into a paragraph block."},CONVERT_LABEL:{id:"extension.command.convert-paragraph.label",comment:"Label for converting the current node into a paragraph.",message:"Convert Paragraph"},INSERT_DESCRIPTION:{id:"extension.command.insert-paragraph.description",comment:"Description for inserting a paragraph.",message:"Insert a new paragraph"},INSERT_LABEL:{id:"extension.command.insert-paragraph.label",comment:"Label for inserting a paragraph.",message:"Insert Paragraph"}});var h=Object.freeze({__proto__:null,LABEL:{id:"extension.command.toggle-subscript.label",comment:"Label for toggling a subscript.",message:"Subscript"}});var u=Object.freeze({__proto__:null,LABEL:{id:"extension.command.toggle-superscript.label",comment:"Label for toggling a superscript.",message:"Superscript"}});const p={id:"extension.command.toggle-upper-case.label",comment:"Label for toggling between upper and lower case.",message:"{case, select, upper {Uppercase}\n                          lower {Lowercase}\n                          capitalize {Sentence case}\n                          smallCaps {Small caps}\n                          other {Text case}}"};var f=Object.freeze({__proto__:null,SET_LABEL:{id:"extension.command.set-casing.label",comment:"Label for setting the case.",message:"Set text case"},TOGGLE_LABEL:p});const m={id:"ui.text-color.gray",comment:"Gray color.",message:"Gray"},g={id:"ui.text-color.gray.hue",comment:"Gray color hues.",message:"Gray {hue}"},y={id:"ui.text-color.red",comment:"Red color.",message:"Red"},v={id:"ui.text-color.red.hue",comment:"Red color hues.",message:"Red {hue}"},b={id:"ui.text-color.pink",comment:"Pink color.",message:"Pink"},w={id:"ui.text-color.pink.hue",comment:"Pink color hues.",message:"Pink {hue}"},x={id:"ui.text-color.grape",comment:"Grape color.",message:"Grape"},S={id:"ui.text-color.grape.hue",comment:"Grape color hues.",message:"Grape {hue}"},O={id:"ui.text-color.violet",comment:"Violet color.",message:"Violet"},k={id:"ui.text-color.violet.hue",comment:"Violet color hues.",message:"Violet {hue}"},E={id:"ui.text-color.indigo",comment:"Indigo color.",message:"Indigo"},C={id:"ui.text-color.indigo.hue",comment:"Indigo color hues.",message:"Indigo {hue}"},M={id:"ui.text-color.blue",comment:"Blue color.",message:"Blue"},N={id:"ui.text-color.blue.hue",comment:"Blue color hues.",message:"Blue {hue}"},T={id:"ui.text-color.cyan",comment:"Cyan color.",message:"Cyan"},A={id:"ui.text-color.cyan.hue",comment:"Cyan color hues.",message:"Cyan {hue}"},I={id:"ui.text-color.teal",comment:"Teal color.",message:"Teal"},R={id:"ui.text-color.teal.hue",comment:"Teal color hues.",message:"Teal {hue}"},_={id:"ui.text-color.green",comment:"Green color.",message:"Green"},P={id:"ui.text-color.green.hue",comment:"Green color hues.",message:"Green {hue}"},D={id:"ui.text-color.lime",comment:"Lime color.",message:"Lime"},L={id:"ui.text-color.lime.hue",comment:"Lime color hues.",message:"Lime {hue}"},z={id:"ui.text-color.yellow",comment:"Yellow color.",message:"Yellow"},j={id:"ui.text-color.yellow.hue",comment:"Yellow color hues.",message:"Yellow {hue}"},F={id:"ui.text-color.orange",comment:"Orange color.",message:"Orange"},B={id:"ui.text-color.orange.hue",comment:"Orange color hues.",message:"Orange {hue}"};var V=Object.freeze({__proto__:null,BLACK:{id:"ui.text-color.black",comment:"Black color.",message:"Black"},BLUE:M,BLUE_HUE:N,CYAN:T,CYAN_HUE:A,GRAPE:x,GRAPE_HUE:S,GRAY:m,GRAY_HUE:g,GREEN:_,GREEN_HUE:P,INDIGO:E,INDIGO_HUE:C,LIME:D,LIME_HUE:L,ORANGE:F,ORANGE_HUE:B,PINK:b,PINK_HUE:w,RED:y,RED_HUE:v,SET_COLOR_DESCRIPTION:{id:"extension.command.set-text-color.description",comment:"Description for color formatting command.",message:"Set the text color for the selected text."},SET_COLOR_LABEL:{id:"extension.command.set-text-color.label",comment:"Label for color formatting command.",message:"Text color"},TEAL:I,TEAL_HUE:R,TRANSPARENT:{id:"ui.text-color.transparent",comment:"Transparent color label.",message:"Transparent"},VIOLET:O,VIOLET_HUE:k,WHITE:{id:"ui.text-color.white",comment:"White color.",message:"White"},YELLOW:z,YELLOW_HUE:j});var K=Object.freeze({__proto__:null,DESCRIPTION:{id:"extension.command.set-text-highlight.description",comment:"Description for adding a text highlight.",message:"Set the text highlight color for the selected text."},LABEL:{id:"extension.command.set-text-highlight.label",comment:"Label for adding a text highlight.",message:"Text highlight"}});var $=Object.freeze({__proto__:null,DESCRIPTION:{id:"extension.command.toggle-underline.description",comment:"Description for underline formatting command.",message:"Underline the selected text"},LABEL:{id:"extension.command.toggle-underline.label",comment:"Label for underline formatting command.",message:"Underline"}})},26244:(e,t,n)=>{"use strict";n.d(t,{ey:()=>f,lm:()=>m,nl:()=>g});var r=n(14736),o=n(69811),s=Object.defineProperty,i=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))d.call(t,n)&&h(e,n,t[n]);return e},p=(e,t)=>i(e,a(t));function f(e,t){const n=Object.getPrototypeOf(t);let r=e.selection,s=e.doc,i=e.storedMarks;const a=(0,o.Ik)();for(const[o,l]of Object.entries(t))a[o]={value:l};return Object.create(n,p(u({},a),{storedMarks:{get:()=>i},selection:{get:()=>r},doc:{get:()=>s},tr:{get:()=>(r=e.selection,s=e.doc,i=e.storedMarks,e)}}))}function m(e){return t=>{let{state:n,dispatch:r,view:o,tr:s}=t;return e(f(s,n),r,o)}}function g(e){return t=>{var n;return(0,o.V1)(void 0===t.dispatch||t.dispatch===(null==(n=t.view)?void 0:n.dispatch),{code:r.bh.NON_CHAINABLE_COMMAND}),e(t)}}},13262:(e,t,n)=>{"use strict";n.d(t,{tj:()=>Os,_B:()=>ws});var r,o,s,i,a,l=n(17588),c=n(69811),d=n(14736),h=n(37643),u=n(28736),p=Object.create,f=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,b=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),w=e=>{throw TypeError(e)},x=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t)=>f(e,"name",{value:t,configurable:!0}),O=["class","method","getter","setter","accessor","field","value","get","set"],k=e=>void 0!==e&&"function"!==typeof e?w("Function expected"):e,E=(e,t,n,r,o)=>({kind:O[e],name:t,metadata:r,addInitializer:e=>n._?w("Already initialized"):o.push(k(e||null))}),C=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},M=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),g=h>3?e.length+1:h?u?1:2:0,y=O[h+5],v=h>3&&(e[g-1]=[]),C=e[g]||(e[g]=[]),M=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&m(h<4?o:{get[n](){return A(this,s)},set[n](e){return I(this,s,e)}},n));h?p&&h<4&&S(s,(h>2?"set ":h>1?"get ":"")+n):S(o,n);for(var N=r.length-1;N>=0;N--)c=E(h,n,l={},e[3],C),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>T(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?A:R)(e,o,4^h?s:M.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>I(e,o,t,4^h?s:M.set):(e,t)=>e[n]=t)),a=(0,r[N])(h?h<4?p?s:M[y]:h>4?void 0:{get:M.get,set:M.set}:o,c),l._=1,4^h||void 0===a?k(a)&&(h>4?v.unshift(a):h?p?s=a:M[y]=a:o=a):"object"!==typeof a||null===a?w("Object expected"):(k(i=a.get)&&(M.get=i),k(i=a.set)&&(M.set=i),k(i=a.init)&&v.unshift(i));return h||((e,t)=>{x(t,b("metadata"),e[3])})(e,o),M&&f(o,n,M),p?4^h?s:M:o},N=(e,t,n)=>t.has(e)||w("Cannot "+n),T=(e,t)=>Object(t)!==t?w('Cannot use the "in" operator on this value'):e.has(t),A=(e,t,n)=>(N(e,t,"read from private field"),n?n.call(e):t.get(e)),I=(e,t,n,r)=>(N(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),R=(e,t,n)=>(N(e,t,"access private method"),n);i=[(0,h.ckn)({defaultOptions:{content:"block+",docAttributes:[]},defaultPriority:d.OR.Medium,staticKeys:["content","docAttributes"],disableExtraAttributes:!0})];var _=class extends(s=h.udg,o=[(0,h.G5h)()],r=[(0,h.dwU)()],s){constructor(){super(...arguments),C(a,5,this)}get name(){return"doc"}createNodeSpec(e,t){const{docAttributes:n,content:r}=this.options,o=(0,c.Ik)();if((0,c.Qd)(n))for(const[s,i]of(0,c.jO)(n))o[s]={default:i};else for(const s of n)o[s]={default:null};return((e,t)=>{for(var n in t||(t={}))y.call(t,n)&&x(e,n,t[n]);if(g)for(var n of g(t))v.call(t,n)&&x(e,n,t[n]);return e})({attrs:o,content:r},t)}setDocAttributes(e){return t=>{let{tr:n,dispatch:r}=t;if(r){for(const[t,r]of Object.entries(e))n.setDocAttribute(t,r);r(n)}return!0}}isDefaultDocNode(){let{state:e=this.store.getState(),options:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.IB)(e.doc,t)}};M(a=(e=>{var t;return[,,,p(null!=(t=null==e?void 0:e[b("metadata")])?t:null)]})(s),1,"setDocAttributes",o,_),M(a,1,"isDefaultDocNode",r,_),_=M(a,0,"DocExtension",i,_),C(a,1,_);var P,D,L,z,j=Object.create,F=Object.defineProperty,B=Object.defineProperties,V=Object.getOwnPropertyDescriptor,K=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,U=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),G=e=>{throw TypeError(e)},J=(e,t,n)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,q=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&J(e,n,t[n]);if($)for(var n of $(t))H.call(t,n)&&J(e,n,t[n]);return e},X=(e,t)=>B(e,K(t)),Y=(e,t)=>F(e,"name",{value:t,configurable:!0}),Z=["class","method","getter","setter","accessor","field","value","get","set"],Q=e=>void 0!==e&&"function"!==typeof e?G("Function expected"):e,ee=(e,t,n,r,o)=>({kind:Z[e],name:t,metadata:r,addInitializer:e=>n._?G("Already initialized"):o.push(Q(e||null))}),te=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},ne=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=Z[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&V(h<4?o:{get[n](){return ie(this,s)},set[n](e){return ae(this,s,e)}},n));h?p&&h<4&&Y(s,(h>2?"set ":h>1?"get ":"")+n):Y(o,n);for(var b=r.length-1;b>=0;b--)c=ee(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>se(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?ie:le)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>ae(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?Q(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?G("Object expected"):(Q(i=a.get)&&(v.get=i),Q(i=a.set)&&(v.set=i),Q(i=a.init)&&g.unshift(i));return h||((e,t)=>{J(t,U("metadata"),e[3])})(e,o),v&&F(o,n,v),p?4^h?s:v:o},re=(e,t,n)=>J(e,"symbol"!==typeof t?t+"":t,n),oe=(e,t,n)=>t.has(e)||G("Cannot "+n),se=(e,t)=>Object(t)!==t?G('Cannot use the "in" operator on this value'):e.has(t),ie=(e,t,n)=>(oe(e,t,"read from private field"),n?n.call(e):t.get(e)),ae=(e,t,n,r)=>(oe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),le=(e,t,n)=>(oe(e,t,"access private method"),n);L=[(0,h.ckn)({handlerKeys:["blur","focus","mousedown","mouseup","mouseenter","mouseleave","textInput","keypress","keyup","keydown","click","clickMark","doubleClick","doubleClickMark","tripleClick","tripleClickMark","contextmenu","hover","scroll","copy","cut","paste","editable"],handlerKeyOptions:{blur:{earlyReturnValue:!0},focus:{earlyReturnValue:!0},mousedown:{earlyReturnValue:!0},mouseleave:{earlyReturnValue:!0},mouseup:{earlyReturnValue:!0},click:{earlyReturnValue:!0},doubleClick:{earlyReturnValue:!0},tripleClick:{earlyReturnValue:!0},hover:{earlyReturnValue:!0},contextmenu:{earlyReturnValue:!0},scroll:{earlyReturnValue:!0},copy:{earlyReturnValue:!0},cut:{earlyReturnValue:!0},paste:{earlyReturnValue:!0}},defaultPriority:d.OR.High})];var ce=class extends(D=h.UBi,P=[(0,h.dwU)()],D){constructor(){super(...arguments),te(z,5,this),re(this,"mousedown",!1),re(this,"mouseover",!1),re(this,"createMouseEventHandler",(e=>(t,n)=>{var r;const o=n,s=function(e,t){var n;const r=t.target;if(r){const t=function(e,t,n,r){const o=e.docView.posFromDOM(t,n,r);return null===o||o<0?null:o}(e,r,0);if(null!==t){const n=e.state.doc.resolve(t),r=n.node().isLeaf?0:1;return{pos:t,inside:n.start()-r}}}return null!=(n=e.posAtCoords({left:t.clientX,top:t.clientY}))?n:void 0}(t,o);if(!s)return!1;const i=[],a=[],{inside:l,pos:h}=s;if(-1===l)return!1;const p=t.state.doc.resolve(h),f=p.depth+1;for(const e of(0,c.y1)(f,1))i.push({node:e>p.depth&&p.nodeAfter?p.nodeAfter:p.node(e),pos:p.before(e)});for(const{type:e}of null!=(r=p.marksAcross(p))?r:[]){const t=(0,u.ve)(p,e);t&&a.push(t)}return e(o,{view:t,nodes:i,marks:a,getMark:e=>{const n=(0,c.Kg)(e)?t.state.schema.marks[e]:e;return(0,c.V1)(n,{code:d.bh.EXTENSION,message:"The mark ".concat(e," being checked does not exist within the editor schema.")}),a.find((e=>e.mark.type===n))},getNode:e=>{var n;const r=(0,c.Kg)(e)?t.state.schema.nodes[e]:e;(0,c.V1)(r,{code:d.bh.EXTENSION,message:"The node being checked does not exist"});const o=i.find((e=>{let{node:t}=e;return t.type===r}));if(o)return X(q({},o),{isRoot:!!(null==(n=i[0])?void 0:n.node.eq(o.node))})}})}))}get name(){return"events"}onView(){var e,t;if(!(null==(e=this.store.managerSettings.exclude)?void 0:e.clickHandler))for(const n of this.store.extensions){if(!n.createEventHandlers||(null==(t=n.options.exclude)?void 0:t.clickHandler))continue;const e=n.createEventHandlers();for(const[t,n]of(0,c.jO)(e))this.addHandler(t,n)}}createPlugin(){const e=new WeakMap,t=(t,n,r,o,s,i,a,l)=>{const h=this.store.currentState,{schema:p,doc:f}=h,m=f.resolve(o),g=e.has(a),y=function(e){var t;const{handled:n,view:r,$pos:o,state:s}=e,i={getMark:c.lQ,markRanges:[],view:r,state:s};if(n)return i;for(const{type:a}of null!=(t=o.marksAcross(o))?t:[]){const e=(0,u.ve)(o,a);e&&i.markRanges.push(e)}return i.getMark=e=>{const t=(0,c.Kg)(e)?s.schema.marks[e]:e;return(0,c.V1)(t,{code:d.bh.EXTENSION,message:"The mark ".concat(e," being checked does not exist within the editor schema.")}),i.markRanges.find((e=>e.mark.type===t))},i}({$pos:m,handled:g,view:r,state:h});let v=!1;g||(v=t(a,y)||v);const b=X(q({},y),{pos:o,direct:l,nodeWithPosition:{node:s,pos:i},getNode:e=>{const t=(0,c.Kg)(e)?p.nodes[e]:e;return(0,c.V1)(t,{code:d.bh.EXTENSION,message:"The node being checked does not exist"}),t===s.type?{node:s,pos:i}:void 0}});return e.set(a,!0),n(a,b)||v};return{props:{handleKeyPress:(e,t)=>this.options.keypress(t)||!1,handleKeyDown:(e,t)=>this.options.keydown(t)||!1,handleTextInput:(e,t,n,r)=>this.options.textInput({from:t,to:n,text:r})||!1,handleClickOn:(e,n,r,o,s,i)=>t(this.options.clickMark,this.options.click,e,n,r,o,s,i),handleDoubleClickOn:(e,n,r,o,s,i)=>t(this.options.doubleClickMark,this.options.doubleClick,e,n,r,o,s,i),handleTripleClickOn:(e,n,r,o,s,i)=>t(this.options.tripleClickMark,this.options.tripleClick,e,n,r,o,s,i),handleDOMEvents:{focus:(e,t)=>this.options.focus(t)||!1,blur:(e,t)=>this.options.blur(t)||!1,mousedown:(e,t)=>(this.startMouseover(),this.options.mousedown(t)||!1),mouseup:(e,t)=>(this.endMouseover(),this.options.mouseup(t)||!1),mouseleave:(e,t)=>(this.mouseover=!1,this.options.mouseleave(t)||!1),mouseenter:(e,t)=>(this.mouseover=!0,this.options.mouseenter(t)||!1),keyup:(e,t)=>this.options.keyup(t)||!1,mouseout:this.createMouseEventHandler(((e,t)=>{const n=X(q({},t),{hovering:!1});return this.options.hover(e,n)||!1})),mouseover:this.createMouseEventHandler(((e,t)=>{const n=X(q({},t),{hovering:!0});return this.options.hover(e,n)||!1})),contextmenu:this.createMouseEventHandler(((e,t)=>this.options.contextmenu(e,t)||!1)),scroll:(e,t)=>this.options.scroll(t)||!1,copy:(e,t)=>this.options.copy(t)||!1,cut:(e,t)=>this.options.cut(t)||!1,paste:(e,t)=>this.options.paste(t)||!1}},view:e=>{let t=e.editable;const n=this.options;return{update(e){const r=e.editable;r!==t&&(n.editable(r),t=r)}}}}}isInteracting(){return this.mousedown&&this.mouseover}startMouseover(){this.mouseover=!0,this.mousedown||(this.mousedown=!0,this.store.document.documentElement.addEventListener("mouseup",(()=>{this.endMouseover()}),{once:!0}))}endMouseover(){this.mousedown&&(this.mousedown=!1,this.store.commands.emptyUpdate())}};ne(z=(e=>{var t;return[,,,j(null!=(t=null==e?void 0:e[U("metadata")])?t:null)]})(D),1,"isInteracting",P,ce),ce=ne(z,0,"EventsExtension",L,ce),te(z,1,ce);var de=n(6521),he=n(27908),ue=n(94644),pe=n(3904);class fe extends he.LN{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return fe.valid(n)?new fe(n):he.LN.near(n)}content(){return ue.Ji.empty}eq(e){return e instanceof fe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new fe(e.resolve(t.pos))}getBookmark(){return new me(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&fe.valid(e))return e;let r=e.pos,o=null;for(let n=e.depth;;n--){let s=e.node(n);if(t>0?e.indexAfter(n)<s.childCount:e.index(n)>0){o=s.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let i=e.doc.resolve(r);if(fe.valid(i))return i}for(;;){let s=t>0?o.firstChild:o.lastChild;if(!s){if(o.isAtom&&!o.isText&&!he.nh.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=s,r+=t;let i=e.doc.resolve(r);if(fe.valid(i))return i}return null}}}fe.prototype.visible=!1,fe.findFrom=fe.findGapCursorFrom,he.LN.jsonID("gapcursor",fe);class me{constructor(e){this.pos=e}map(e){return new me(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return fe.valid(t)?new fe(t):he.LN.near(t)}}const ge=(0,de.K)({ArrowLeft:ye("horiz",-1),ArrowRight:ye("horiz",1),ArrowUp:ye("vert",-1),ArrowDown:ye("vert",1)});function ye(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let s=e.selection,i=t>0?s.$to:s.$from,a=s.empty;if(s instanceof he.U3){if(!o.endOfTextblock(n)||0==i.depth)return!1;a=!1,i=e.doc.resolve(t>0?i.after():i.before())}let l=fe.findGapCursorFrom(i,t,a);return!!l&&(r&&r(e.tr.setSelection(new fe(l))),!0)}}function ve(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!fe.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&he.nh.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new fe(r))),!0)}function be(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof fe))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=ue.FK.empty;for(let i=r.length-1;i>=0;i--)o=ue.FK.from(r[i].createAndFill(null,o));let s=e.state.tr.replace(n.pos,n.pos,new ue.Ji(o,0,0));return s.setSelection(he.U3.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function we(e){if(!(e.selection instanceof fe))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",pe.zF.create(e.doc,[pe.NZ.widget(e.selection.head,t,{key:"gapcursor"})])}var xe,Se,Oe,ke=Object.create,Ee=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,Me=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Ne=e=>{throw TypeError(e)},Te=(e,t)=>Ee(e,"name",{value:t,configurable:!0}),Ae=["class","method","getter","setter","accessor","field","value","get","set"],Ie=e=>void 0!==e&&"function"!==typeof e?Ne("Function expected"):e,Re=(e,t,n,r,o)=>({kind:Ae[e],name:t,metadata:r,addInitializer:e=>n._?Ne("Already initialized"):o.push(Ie(e||null))}),_e=(e,t)=>{return n=t,r=Me("metadata"),o=e[3],r in n?Ee(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o;var n,r,o},Pe=(e,t,n)=>t.has(e)||Ne("Cannot "+n),De=(e,t)=>Object(t)!==t?Ne('Cannot use the "in" operator on this value'):e.has(t),Le=(e,t,n)=>(Pe(e,t,"read from private field"),n?n.call(e):t.get(e)),ze=(e,t,n,r)=>(Pe(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),je=(e,t,n)=>(Pe(e,t,"access private method"),n);xe=[(0,h.ckn)({})];var Fe=class extends(Oe=h.UBi){get name(){return"gapCursor"}createExternalPlugins(){return[new he.k_({props:{decorations:we,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&fe.valid(n)?new fe(n):null,handleClick:ve,handleKeyDown:ge,handleDOMEvents:{beforeinput:be}}})]}};((e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r)})(Se=(e=>{var t;return[,,,ke(null!=(t=null==e?void 0:e[Me("metadata")])?t:null)]})(Oe),1,Fe=((e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=Ae[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&Ce(h<4?o:{get[n](){return Le(this,s)},set[n](e){return ze(this,s,e)}},n));h?p&&h<4&&Te(s,(h>2?"set ":h>1?"get ":"")+n):Te(o,n);for(var b=r.length-1;b>=0;b--)c=Re(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>De(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?Le:je)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>ze(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?Ie(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?Ne("Object expected"):(Ie(i=a.get)&&(v.get=i),Ie(i=a.set)&&(v.set=i),Ie(i=a.init)&&g.unshift(i));return h||_e(e,o),v&&Ee(o,n,v),p?4^h?s:v:o})(Se,0,"GapCursorExtension",xe,Fe));(0,c.tH)(fe);var Be=n(26244),Ve=n(54518),Ke=200,$e=function(){};$e.prototype.append=function(e){return e.length?(e=$e.from(e),!this.length&&e||e.length<Ke&&this.leafAppend(e)||this.length<Ke&&e.leafPrepend(this)||this.appendInner(e)):this},$e.prototype.prepend=function(e){return e.length?$e.from(e).append(this):this},$e.prototype.appendInner=function(e){return new He(this,e)},$e.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?$e.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},$e.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},$e.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},$e.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},$e.from=function(e){return e instanceof $e?e:e&&e.length?new We(e):$e.empty};var We=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Ke)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Ke)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}($e);$e.empty=new We([]);var He=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}($e);const Ue=$e;var Ge=n(82711);class Je{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let s,i,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new qe(e.map));let t,o=e.step.map(n.slice(r));o&&a.maybeStep(o).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new qe(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(s=n?e.selection.map(n.slice(r)):e.selection,i=new Je(this.items.slice(0,o).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:i,transform:a,selection:s}}addTransform(e,t,n,r){let o=[],s=this.eventCount,i=this.items,a=!r&&i.length?i.get(i.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),d=new qe(e.mapping.maps[c],l,t);(n=a&&a.merge(d))&&(d=n,c?o.pop():i=i.slice(0,i.length-1)),o.push(d),t&&(s++,t=void 0),r||(a=d)}let l=s-n.depth;return l>Ye&&(i=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(i,l),s-=l),new Je(i.append(o),s)}remapping(e,t){let n=new Ge.X9;return this.items.forEach(((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new Je(this.items.append(e.map((e=>new qe(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,s=e.steps.length,i=this.eventCount;this.items.forEach((e=>{e.selection&&i--}),r);let a=t;this.items.forEach((t=>{let r=o.getMirror(--a);if(null==r)return;s=Math.min(s,r);let l=o.maps[r];if(t.step){let s=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(a+1,r));c&&i++,n.push(new qe(l,s,c))}else n.push(new qe(l))}),r);let l=[];for(let h=t;h<s;h++)l.push(new qe(o.maps[h]));let c=this.items.slice(0,r).append(l).append(n),d=new Je(c,i);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(((s,i)=>{if(i>=e)r.push(s),s.selection&&o++;else if(s.step){let e=s.step.map(t.slice(n)),i=e&&e.getMap();if(n--,i&&t.appendMap(i,n),e){let a=s.selection&&s.selection.map(t.slice(n));a&&o++;let l,c=new qe(i.invert(),e,a),d=r.length-1;(l=r.length&&r[d].merge(c))?r[d]=l:r.push(c)}}else s.map&&n--}),this.items.length,0),new Je(Ue.from(r.reverse()),o)}}Je.empty=new Je(Ue.empty,0);class qe{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new qe(t.getMap().invert(),t,this.selection)}}}class Xe{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}const Ye=20;function Ze(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach(((e,n,r,o)=>t.push(r,o)));return t}function Qe(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),s=t.map(e[r+1],-1);o<=s&&n.push(o,s)}return n}let et=!1,tt=null;function nt(e){let t=e.plugins;if(tt!=t){et=!1,tt=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){et=!0;break}}return et}const rt=new he.hs("history"),ot=new he.hs("closeHistory");function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new he.k_({key:rt,state:{init:()=>new Xe(Je.empty,Je.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let o,s=n.getMeta(rt);if(s)return s.historyState;n.getMeta(ot)&&(e=new Xe(e.done,e.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(i&&i.getMeta(rt))return i.getMeta(rt).redo?new Xe(e.done.addTransform(n,void 0,r,nt(t)),e.undone,Ze(n.mapping.maps),e.prevTime,e.prevComposition):new Xe(e.done,e.undone.addTransform(n,void 0,r,nt(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Xe(e.done.rebased(n,o),e.undone.rebased(n,o),Qe(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Xe(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Qe(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),s=0==e.prevTime||!i&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}(n,e.prevRanges)),a=i?Qe(e.prevRanges,n.mapping):Ze(n.mapping.maps);return new Xe(e.done.addTransform(n,s?t.selection.getBookmark():void 0,r,nt(t)),Je.empty,a,n.time,null==o?e.prevComposition:o)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?at:"historyRedo"==n?lt:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function it(e,t){return(n,r)=>{let o=rt.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(r){let s=function(e,t,n){let r=nt(t),o=rt.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,r),l=new Xe(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(rt,{redo:n,historyState:l})}(o,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const at=it(!1,!0),lt=it(!0,!0);it(!1,!1),it(!0,!1);var ct,dt,ht,ut,pt,ft,mt,gt,yt,vt=Object.create,bt=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,xt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),St=e=>{throw TypeError(e)},Ot=(e,t,n)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kt=(e,t)=>bt(e,"name",{value:t,configurable:!0}),Et=["class","method","getter","setter","accessor","field","value","get","set"],Ct=e=>void 0!==e&&"function"!==typeof e?St("Function expected"):e,Mt=(e,t,n,r,o)=>({kind:Et[e],name:t,metadata:r,addInitializer:e=>n._?St("Already initialized"):o.push(Ct(e||null))}),Nt=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},Tt=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=Et[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&wt(h<4?o:{get[n](){return Rt(this,s)},set[n](e){return _t(this,s,e)}},n));h?p&&h<4&&kt(s,(h>2?"set ":h>1?"get ":"")+n):kt(o,n);for(var b=r.length-1;b>=0;b--)c=Mt(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>It(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?Rt:Pt)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>_t(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?Ct(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?St("Object expected"):(Ct(i=a.get)&&(v.get=i),Ct(i=a.set)&&(v.set=i),Ct(i=a.init)&&g.unshift(i));return h||((e,t)=>{Ot(t,xt("metadata"),e[3])})(e,o),v&&bt(o,n,v),p?4^h?s:v:o},At=(e,t,n)=>t.has(e)||St("Cannot "+n),It=(e,t)=>Object(t)!==t?St('Cannot use the "in" operator on this value'):e.has(t),Rt=(e,t,n)=>(At(e,t,"read from private field"),n?n.call(e):t.get(e)),_t=(e,t,n,r)=>(At(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Pt=(e,t,n)=>(At(e,t,"access private method"),n);gt=[(0,h.ckn)({defaultOptions:{depth:100,newGroupDelay:500,getDispatch:void 0,getState:void 0},staticKeys:["depth","newGroupDelay"],handlerKeys:["onUndo","onRedo"]})];var Dt=class extends(mt=h.UBi,ft=[(0,h.pi3)({shortcut:d.s9.Undo,command:"undo"})],pt=[(0,h.pi3)({shortcut:d.s9.Redo,command:"redo"})],ut=[(0,h.G5h)({disableChaining:!0,description:e=>{let{t:t}=e;return t(Ve.Ox.UNDO_DESCRIPTION)},label:e=>{let{t:t}=e;return t(Ve.Ox.UNDO_LABEL)},icon:"arrowGoBackFill"})],ht=[(0,h.G5h)({disableChaining:!0,description:e=>{let{t:t}=e;return t(Ve.Ox.REDO_DESCRIPTION)},label:e=>{let{t:t}=e;return t(Ve.Ox.REDO_LABEL)},icon:"arrowGoForwardFill"})],dt=[(0,h.dwU)()],ct=[(0,h.dwU)()],mt){constructor(){var e;super(...arguments),Nt(yt,5,this),Ot(this,"symbol"!==typeof(e="wrapMethod")?e+"":e,((e,t)=>n=>{let{state:r,dispatch:o,view:s}=n;const{getState:i,getDispatch:a}=this.options,l=(0,c.Tn)(i)?i():r,d=(0,c.Tn)(a)&&o?a():o,h=e(l,d,s);return null==t||t(h),h}))}get name(){return"history"}createKeymap(){return{"Mod-y":u.cA.isMac?()=>!1:this.wrapMethod(lt,this.options.onRedo),"Mod-z":this.wrapMethod(at,this.options.onUndo),"Shift-Mod-z":this.wrapMethod(lt,this.options.onRedo)}}undoShortcut(e){return this.wrapMethod(at,this.options.onUndo)(e)}redoShortcut(e){return this.wrapMethod(lt,this.options.onRedo)(e)}createExternalPlugins(){const{depth:e,newGroupDelay:t}=this.options;return[st({depth:e,newGroupDelay:t})]}undo(){return(0,Be.nl)(this.wrapMethod(at,this.options.onUndo))}redo(){return(0,Be.nl)(this.wrapMethod(lt,this.options.onRedo))}undoDepth(){return function(e){let t=rt.getState(e);return t?t.done.eventCount:0}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState())}redoDepth(){return function(e){let t=rt.getState(e);return t?t.undone.eventCount:0}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.store.getState())}};Tt(yt=(e=>{var t;return[,,,vt(null!=(t=null==e?void 0:e[xt("metadata")])?t:null)]})(mt),1,"undoShortcut",ft,Dt),Tt(yt,1,"redoShortcut",pt,Dt),Tt(yt,1,"undo",ut,Dt),Tt(yt,1,"redo",ht,Dt),Tt(yt,1,"undoDepth",dt,Dt),Tt(yt,1,"redoDepth",ct,Dt),Dt=Tt(yt,0,"HistoryExtension",gt,Dt),Nt(yt,1,Dt);var Lt,zt,jt,Ft,Bt,Vt,Kt=Object.create,$t=Object.defineProperty,Wt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptor,Ut=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,Jt=Object.prototype.hasOwnProperty,qt=Object.prototype.propertyIsEnumerable,Xt=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Yt=e=>{throw TypeError(e)},Zt=(e,t,n)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qt=(e,t)=>{for(var n in t||(t={}))Jt.call(t,n)&&Zt(e,n,t[n]);if(Gt)for(var n of Gt(t))qt.call(t,n)&&Zt(e,n,t[n]);return e},en=(e,t)=>$t(e,"name",{value:t,configurable:!0}),tn=["class","method","getter","setter","accessor","field","value","get","set"],nn=e=>void 0!==e&&"function"!==typeof e?Yt("Function expected"):e,rn=(e,t,n,r,o)=>({kind:tn[e],name:t,metadata:r,addInitializer:e=>n._?Yt("Already initialized"):o.push(nn(e||null))}),on=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},sn=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=tn[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&Ht(h<4?o:{get[n](){return cn(this,s)},set[n](e){return dn(this,s,e)}},n));h?p&&h<4&&en(s,(h>2?"set ":h>1?"get ":"")+n):en(o,n);for(var b=r.length-1;b>=0;b--)c=rn(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>ln(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?cn:hn)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>dn(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?nn(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?Yt("Object expected"):(nn(i=a.get)&&(v.get=i),nn(i=a.set)&&(v.set=i),nn(i=a.init)&&g.unshift(i));return h||((e,t)=>{Zt(t,Xt("metadata"),e[3])})(e,o),v&&$t(o,n,v),p?4^h?s:v:o},an=(e,t,n)=>t.has(e)||Yt("Cannot "+n),ln=(e,t)=>Object(t)!==t?Yt('Cannot use the "in" operator on this value'):e.has(t),cn=(e,t,n)=>(an(e,t,"read from private field"),n?n.call(e):t.get(e)),dn=(e,t,n,r)=>(an(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),hn=(e,t,n)=>(an(e,t,"access private method"),n),un={icon:"paragraph",label:e=>{let{t:t}=e;return t(Ve.ue.INSERT_LABEL)},description:e=>{let{t:t}=e;return t(Ve.ue.INSERT_DESCRIPTION)}},pn={icon:"paragraph",label:e=>{let{t:t}=e;return t(Ve.ue.CONVERT_LABEL)},description:e=>{let{t:t}=e;return t(Ve.ue.CONVERT_DESCRIPTION)}};Bt=[(0,h.ckn)({defaultPriority:d.OR.Medium})];var fn=class extends(Ft=h.udg,jt=[(0,h.G5h)(pn)],zt=[(0,h.G5h)(un)],Lt=[(0,h.pi3)({shortcut:d.s9.Paragraph,command:"convertParagraph"})],Ft){constructor(){super(...arguments),on(Vt,5,this)}get name(){return"paragraph"}createTags(){return[d.Wz.LastNodeCompatible,d.Wz.TextBlock,d.Wz.Block,d.Wz.FormattingNode]}createNodeSpec(e,t){var n,r,o;return r=Qt({content:"inline*",draggable:!1},t),o={attrs:Qt({},e.defaults()),parseDOM:[{tag:"p",getAttrs:t=>Qt({},e.parse(t))},...null!=(n=t.parseDOM)?n:[]],toDOM:t=>["p",e.dom(t),0]},Wt(r,Ut(o))}convertParagraph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{attrs:t,selection:n,preserveAttrs:r}=e;return this.store.commands.setBlockNodeType.original(this.type,t,n,r)}insertParagraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{selection:n,attrs:r}=t;return this.store.commands.insertNode.original(this.type,{content:e,selection:n,attrs:r})}shortcut(e){return this.convertParagraph()(e)}};sn(Vt=(e=>{var t;return[,,,Kt(null!=(t=null==e?void 0:e[Xt("metadata")])?t:null)]})(Ft),1,"convertParagraph",jt,fn),sn(Vt,1,"insertParagraph",zt,fn),sn(Vt,1,"shortcut",Lt,fn),fn=sn(Vt,0,"ParagraphExtension",Bt,fn),on(Vt,1,fn);var mn=n(36934);function gn(e,t,n,r){var o,s=!1,i=0;function a(){o&&clearTimeout(o)}function l(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var h=this,u=Date.now()-i;function p(){i=Date.now(),n.apply(h,c)}s||(r&&!o&&p(),a(),void 0===r&&u>e?p():!0!==t&&(o=setTimeout(r?function(){o=void 0}:p,void 0===r?e-u:e)))}return"boolean"!==typeof t&&(r=n,n=t,t=void 0),l.cancel=function(){a(),s=!0},l}var yn,vn,bn,wn,xn,Sn,On,kn,En,Cn=n(34220),Mn=Object.create,Nn=Object.defineProperty,Tn=Object.defineProperties,An=Object.getOwnPropertyDescriptor,In=Object.getOwnPropertyDescriptors,Rn=Object.getOwnPropertySymbols,_n=Object.prototype.hasOwnProperty,Pn=Object.prototype.propertyIsEnumerable,Dn=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Ln=e=>{throw TypeError(e)},zn=(e,t,n)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jn=(e,t)=>{for(var n in t||(t={}))_n.call(t,n)&&zn(e,n,t[n]);if(Rn)for(var n of Rn(t))Pn.call(t,n)&&zn(e,n,t[n]);return e},Fn=(e,t)=>Tn(e,In(t)),Bn=(e,t)=>Nn(e,"name",{value:t,configurable:!0}),Vn=["class","method","getter","setter","accessor","field","value","get","set"],Kn=e=>void 0!==e&&"function"!==typeof e?Ln("Function expected"):e,$n=(e,t,n,r,o)=>({kind:Vn[e],name:t,metadata:r,addInitializer:e=>n._?Ln("Already initialized"):o.push(Kn(e||null))}),Wn=(e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r);return r},Hn=(e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=Vn[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&An(h<4?o:{get[n](){return qn(this,s)},set[n](e){return Yn(this,s,e)}},n));h?p&&h<4&&Bn(s,(h>2?"set ":h>1?"get ":"")+n):Bn(o,n);for(var b=r.length-1;b>=0;b--)c=$n(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>Jn(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?qn:Zn)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>Yn(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?Kn(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?Ln("Object expected"):(Kn(i=a.get)&&(v.get=i),Kn(i=a.set)&&(v.set=i),Kn(i=a.init)&&g.unshift(i));return h||((e,t)=>{zn(t,Dn("metadata"),e[3])})(e,o),v&&Nn(o,n,v),p?4^h?s:v:o},Un=(e,t,n)=>zn(e,"symbol"!==typeof t?t+"":t,n),Gn=(e,t,n)=>t.has(e)||Ln("Cannot "+n),Jn=(e,t)=>Object(t)!==t?Ln('Cannot use the "in" operator on this value'):e.has(t),qn=(e,t,n)=>(Gn(e,t,"read from private field"),n?n.call(e):t.get(e)),Xn=(e,t,n)=>t.has(e)?Ln("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Yn=(e,t,n,r)=>(Gn(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Zn=(e,t,n)=>(Gn(e,t,"access private method"),n),Qn=class e{constructor(e){var t;Un(this,"events"),Xn(this,yn,(0,mn.G)()),Xn(this,vn,[]),Xn(this,bn,new Map),Xn(this,wn,[]),Xn(this,xn,!1),Un(this,"recentUpdate"),Xn(this,Sn),Xn(this,On),Xn(this,kn),Xn(this,En),Un(this,"hasChanged"),Un(this,"addListener",((e,t)=>qn(this,yn).on(e,t))),Yn(this,Sn,e),Yn(this,On,e.getActive),Yn(this,En,e.getPosition),Yn(this,kn,e.getID),this.hasChanged=e.hasChanged,this.events=null!=(t=e.events)?t:["state","scroll"]}static create(t){return new e(t)}static fromPositioner(t,n){return e.create(jn(jn({},t.basePositioner),n))}get basePositioner(){return{getActive:qn(this,On),getPosition:qn(this,En),hasChanged:this.hasChanged,events:this.events,getID:qn(this,kn)}}onActiveChanged(e){this.recentUpdate=e;const t=qn(this,On).call(this,e);Yn(this,vn,t),Yn(this,bn,new Map),Yn(this,xn,!1),Yn(this,wn,[]);const n=[];for(const[r,o]of t.entries()){const t=this.getID(o,r);qn(this,wn).push(t),n.push({setElement:t=>this.addProps(Fn(jn({},e),{data:o,element:t}),r),id:t,data:o})}qn(this,yn).emit("update",n)}getID(e,t){var n,r;return null!=(r=null==(n=qn(this,kn))?void 0:n.call(this,e,t))?r:t.toString()}addProps(e,t){if(qn(this,xn))return;if(qn(this,bn).set(t,e),qn(this,bn).size<qn(this,vn).length)return;const n=[];for(const r of qn(this,vn).keys()){const e=qn(this,bn).get(r);(0,c.V1)(e,{code:d.bh.INTERNAL,message:"Something went wrong when retrieving the parameters"});const t=qn(this,wn)[r];if(!t)return;n.push({position:qn(this,En).call(this,e),element:e.element,id:t})}qn(this,yn).emit("done",n)}clone(t){return e.create(jn(jn({},qn(this,Sn)),(0,c.Tn)(t)?t(qn(this,Sn)):t))}active(e){const t=(0,c.Tn)(e)?e:()=>e;return this.clone((e=>({getActive:n=>e.getActive(n).filter(t)})))}};yn=new WeakMap,vn=new WeakMap,bn=new WeakMap,wn=new WeakMap,xn=new WeakMap,Sn=new WeakMap,On=new WeakMap,kn=new WeakMap,En=new WeakMap,Un(Qn,"EMPTY",[]);var er=Qn;function tr(e){const{tr:t,state:n,previousState:r}=e;return!r||(!(!t||!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sr;var n;const{key:r}=null!=(n=null==e?void 0:e.getMeta(or))?n:{};return r===t}(t))||(t?(0,u.J9)(t):!n.doc.eq(r.doc)||!n.selection.eq(r.selection)))}function nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.getBoundingClientRect(),{accountForPadding:o=!1}=n;let s=0,i=0,a=0,l=0;if((0,u.hm)(t)&&o){const e=Number.parseFloat((0,u.gd)(t,"padding-left").replace("px","")),n=Number.parseFloat((0,u.gd)(t,"padding-right").replace("px","")),r=Number.parseFloat((0,u.gd)(t,"padding-top").replace("px","")),o=Number.parseFloat((0,u.gd)(t,"padding-bottom").replace("px","")),c=Number.parseFloat((0,u.gd)(t,"border-left").replace("px","")),d=Number.parseFloat((0,u.gd)(t,"border-right").replace("px","")),h=Number.parseFloat((0,u.gd)(t,"border-top").replace("px","")),p=Number.parseFloat((0,u.gd)(t,"border-bottom").replace("px","")),f=t.offsetWidth-t.clientWidth,m=t.offsetHeight-t.clientHeight;s+=e+c+("rtl"===t.dir?f:0),i+=n+d+("rtl"===t.dir?0:f),a+=r+h,l+=o+p+m}const d=new DOMRect(r.left+s,r.top+a,r.width-i,r.height-l);for(const[h,u]of[[e.top,e.left],[e.top,e.right],[e.bottom,e.left],[e.bottom,e.right]])if((0,c.ux)(h,d.top,d.bottom)&&(0,c.ux)(u,d.left,d.right))return!0;return!1}var rr="remirror-positioner-widget",or="positionerUpdate",sr="__all_positioners__",ir={y:-999999,x:-999999,width:0,height:0},ar=Fn(jn({},ir),{left:-999999,top:-999999,bottom:-999999,right:-999999}),lr=Fn(jn({},ir),{rect:Fn(jn({},ar),{toJSON:()=>ar}),visible:!1}),cr=er.create({hasChanged:tr,getActive(e){const{state:t}=e;if(!(0,u.CD)(t)||t.selection.$anchor.depth>2)return er.EMPTY;const n=(0,u.KP)({predicate:e=>e.type.isBlock,selection:t});return n?[n]:er.EMPTY},getPosition(e){const{view:t,data:n}=e,r=t.nodeDOM(n.pos);if(!(0,u.hm)(r))return lr;const o=r.getBoundingClientRect(),s=t.dom.getBoundingClientRect(),i=o.height,a=o.width,l=t.dom.scrollLeft+o.left-s.left;return{y:t.dom.scrollTop+o.top-s.top,x:l,height:i,width:a,rect:o,visible:nr(o,t.dom)}}}),dr=(er.create({hasChanged:tr,getActive:()=>[!0],getPosition(e){const{view:t}=e,n=t.dom.getBoundingClientRect(),r=Math.min(t.dom.clientHeight,n.height),o=Math.min(t.dom.clientWidth,n.width),s=t.dom.scrollLeft;return{y:t.dom.scrollTop,x:s,height:r,width:o,rect:n,visible:!0}}}),cr.clone((e=>{let{getActive:t}=e;return{getActive:e=>{const[n]=t(e);return n&&(0,u.dT)(n.node)&&n.node.type===(0,u.xo)(e.state.schema)?[n]:er.EMPTY}}})));dr.clone((e=>{let{getPosition:t}=e;return{getPosition:e=>Fn(jn({},t(e)),{width:1})}})),dr.clone((e=>{let{getPosition:t}=e;return{getPosition:e=>{const{width:n,x:r,y:o,height:s}=t(e);return Fn(jn({},t(e)),{width:1,x:n+r,rect:new DOMRect(n+r,o,1,s)})}}}));function hr(e){return er.create({hasChanged:tr,getActive:t=>{const{state:n,view:r}=t;if(!e(n)||!(0,u.eE)(n.selection))return er.EMPTY;try{const{head:e,anchor:t}=n.selection;return[{from:r.coordsAtPos(t),to:r.coordsAtPos(e)}]}catch(o){return er.EMPTY}},getPosition(e){var t;const{element:n,data:r,view:o}=e,{from:s,to:i}=r,a=null!=(t=n.offsetParent)?t:o.dom,l=a.getBoundingClientRect(),c=Math.abs(i.bottom-s.top),d=c>s.bottom-s.top,h=Math.min(s.left,i.left),u=Math.min(s.top,i.top),p=a.scrollLeft+(d?i.left-l.left:h-l.left),f=a.scrollTop+u-l.top,m=d?1:Math.abs(s.left-i.right),g=new DOMRect(d?i.left:h,u,m,c);return{rect:g,y:f,x:p,height:c,width:m,visible:nr(g,o.dom)}}})}var ur=hr((e=>!e.selection.empty));hr((e=>e.selection.empty)),hr((()=>!0)),ur.clone((()=>({getActive:e=>{const{state:t,view:n}=e;if(!t.selection.empty)return er.EMPTY;const r=(0,u.Qc)(t);if(!r)return er.EMPTY;try{return[{from:n.coordsAtPos(r.from),to:n.coordsAtPos(r.to)}]}catch(o){return er.EMPTY}}})));var pr,fr,mr,gr,yr;gr=[(0,h.ckn)({defaultOptions:{scrollDebounce:100},customHandlerKeys:["positioner"],staticKeys:["scrollDebounce"]})];var vr=class extends(mr=h.UBi,fr=[(0,h.G5h)()],pr=[(0,h.dwU)()],mr){constructor(){super(...arguments),Wn(yr,5,this),Un(this,"positioners",[]),Un(this,"element"),Un(this,"onAddCustomHandler",(e=>{let{positioner:t}=e;if(t)return this.positioners=[...this.positioners,t],this.store.commands.forceUpdate(),()=>{this.positioners=this.positioners.filter((e=>e!==t))}}))}get name(){return"positioner"}createAttributes(){return{class:Cn.rk.EDITOR}}init(){var e,t,n;this.onScroll=(e=this.options.scrollDebounce,t=this.onScroll.bind(this),void 0===n?gn(e,t,!1):gn(e,n,!1!==t))}createEventHandlers(){return{scroll:()=>(this.onScroll(),!1),hover:(e,t)=>(this.positioner(this.getBaseProps("hover",{hover:t})),!1),contextmenu:(e,t)=>(this.positioner(this.getBaseProps("contextmenu",{contextmenu:t})),!1)}}onStateUpdate(e){this.positioner(Fn(jn({},e),{previousState:e.firstUpdate?void 0:e.previousState,event:"state",helpers:this.store.helpers}))}createDecorations(e){if(null!=this.element||(this.element=this.createElement()),!this.element.hasChildNodes())return pe.zF.empty;const t=pe.NZ.widget(0,this.element,{key:"positioner-widget",side:-1,stopEvent:()=>!0});return pe.zF.create(e.doc,[t])}forceUpdatePositioners(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;return t=>{let{tr:n,dispatch:r}=t;return null==r||r(n.setMeta(or,{key:e})),!0}}getPositionerWidget(){var e;return null!=(e=this.element)?e:this.element=this.createElement()}createElement(){const e=document.createElement("span");return e.dataset.id=rr,e.classList.add(rr),e.setAttribute("role","presentation"),e}triggerPositioner(e,t){e.hasChanged(t)&&e.onActiveChanged(Fn(jn({},t),{view:this.store.view}))}positioner(e){for(const t of this.positioners){!t.events.includes(e.event)||this.triggerPositioner(t,e)}}getBaseProps(e,t){const n=this.store.getState(),r=this.store.previousState;return jn({helpers:this.store.helpers,event:e,firstUpdate:!1,previousState:r,state:n},t)}onScroll(){this.positioner(this.getBaseProps("scroll",{scroll:{scrollTop:this.store.view.dom.scrollTop}}))}};Hn(yr=(e=>{var t;return[,,,Mn(null!=(t=null==e?void 0:e[Dn("metadata")])?t:null)]})(mr),1,"forceUpdatePositioners",fr,vr),Hn(yr,1,"getPositionerWidget",pr,vr),vr=Hn(yr,0,"PositionerExtension",gr,vr),Wn(yr,1,vr);var br,wr,xr,Sr=Object.create,Or=Object.defineProperty,kr=Object.getOwnPropertyDescriptor,Er=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Cr=e=>{throw TypeError(e)},Mr=(e,t)=>Or(e,"name",{value:t,configurable:!0}),Nr=["class","method","getter","setter","accessor","field","value","get","set"],Tr=e=>void 0!==e&&"function"!==typeof e?Cr("Function expected"):e,Ar=(e,t,n,r,o)=>({kind:Nr[e],name:t,metadata:r,addInitializer:e=>n._?Cr("Already initialized"):o.push(Tr(e||null))}),Ir=(e,t)=>{return n=t,r=Er("metadata"),o=e[3],r in n?Or(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o;var n,r,o},Rr=(e,t,n)=>t.has(e)||Cr("Cannot "+n),_r=(e,t)=>Object(t)!==t?Cr('Cannot use the "in" operator on this value'):e.has(t),Pr=(e,t,n)=>(Rr(e,t,"read from private field"),n?n.call(e):t.get(e)),Dr=(e,t,n,r)=>(Rr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Lr=(e,t,n)=>(Rr(e,t,"access private method"),n);br=[(0,h.ckn)({disableExtraAttributes:!0,defaultPriority:d.OR.Medium})];var zr=class extends(xr=h.udg){get name(){return"text"}createTags(){return[d.Wz.InlineNode]}createNodeSpec(){return{}}};((e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r)})(wr=(e=>{var t;return[,,,Sr(null!=(t=null==e?void 0:e[Er("metadata")])?t:null)]})(xr),1,zr=((e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=Nr[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&kr(h<4?o:{get[n](){return Pr(this,s)},set[n](e){return Dr(this,s,e)}},n));h?p&&h<4&&Mr(s,(h>2?"set ":h>1?"get ":"")+n):Mr(o,n);for(var b=r.length-1;b>=0;b--)c=Ar(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>_r(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?Pr:Lr)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>Dr(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?Tr(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?Cr("Object expected"):(Tr(i=a.get)&&(v.get=i),Tr(i=a.set)&&(v.set=i),Tr(i=a.init)&&g.unshift(i));return h||Ir(e,o),v&&Or(o,n,v),p?4^h?s:v:o})(wr,0,"TextExtension",br,zr));var jr,Fr=Object.defineProperty,Br=Object.defineProperties,Vr=Object.getOwnPropertyDescriptors,Kr=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,Wr=Object.prototype.propertyIsEnumerable,Hr=(e,t,n)=>t in e?Fr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ur=(e,t)=>{for(var n in t||(t={}))$r.call(t,n)&&Hr(e,n,t[n]);if(Kr)for(var n of Kr(t))Wr.call(t,n)&&Hr(e,n,t[n]);return e},Gr=(jr=Ur(Ur(Ur({},_.defaultOptions),fn.defaultOptions),Dt.defaultOptions),Br(jr,Vr({excludeExtensions:[]})));function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Ur(Ur({},Gr),e);const{content:t,depth:n,getDispatch:r,getState:o,newGroupDelay:s,excludeExtensions:i}=e,a={};for(const c of null!=i?i:[])a[c]=!0;const l=[];if(!a.history){const e=new Dt({depth:n,getDispatch:r,getState:o,newGroupDelay:s});l.push(e)}return a.doc||l.push(new _({content:t})),a.text||l.push(new zr),a.paragraph||l.push(new fn),a.positioner||l.push(new vr),a.gapCursor||l.push(new Fe),a.events||l.push(new ce),l}var qr,Xr,Yr,Zr=Object.create,Qr=Object.defineProperty,eo=Object.defineProperties,to=Object.getOwnPropertyDescriptor,no=Object.getOwnPropertyDescriptors,ro=Object.getOwnPropertySymbols,oo=Object.prototype.hasOwnProperty,so=Object.prototype.propertyIsEnumerable,io=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),ao=e=>{throw TypeError(e)},lo=(e,t,n)=>t in e?Qr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,co=(e,t)=>{for(var n in t||(t={}))oo.call(t,n)&&lo(e,n,t[n]);if(ro)for(var n of ro(t))so.call(t,n)&&lo(e,n,t[n]);return e},ho=(e,t)=>eo(e,no(t)),uo=(e,t)=>Qr(e,"name",{value:t,configurable:!0}),po=["class","method","getter","setter","accessor","field","value","get","set"],fo=e=>void 0!==e&&"function"!==typeof e?ao("Function expected"):e,mo=(e,t,n,r,o)=>({kind:po[e],name:t,metadata:r,addInitializer:e=>n._?ao("Already initialized"):o.push(fo(e||null))}),go=(e,t,n)=>t.has(e)||ao("Cannot "+n),yo=(e,t)=>Object(t)!==t?ao('Cannot use the "in" operator on this value'):e.has(t),vo=(e,t,n)=>(go(e,t,"read from private field"),n?n.call(e):t.get(e)),bo=(e,t,n,r)=>(go(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),wo=(e,t,n)=>(go(e,t,"access private method"),n);qr=[(0,h.ckn)({defaultOptions:{emptyNodeClass:Cn.iC.IS_EMPTY,placeholder:""}})];var xo=class extends(Yr=h.UBi){get name(){return"placeholder"}createAttributes(){return{"aria-placeholder":this.options.placeholder}}createPlugin(){return{state:{init:(e,t)=>ho(co({},this.options),{empty:(0,u.IB)(t.doc,{ignoreAttributes:!0})}),apply:(e,t,n,r)=>function(e){const{pluginState:t,extension:n,tr:r,state:o}=e;if(!r.docChanged)return t;return ho(co({},n.options),{empty:(0,u.IB)(o.doc)})}({pluginState:t,tr:e,extension:this,state:r})},props:{decorations:e=>function(e){const{extension:t,state:n}=e,{empty:r}=t.pluginKey.getState(n),{emptyNodeClass:o,placeholder:s}=t.options;if(!r)return null;const i=[];return n.doc.descendants(((e,t)=>{const n=pe.NZ.node(t,t+e.nodeSize,{class:o,"data-placeholder":s});i.push(n)})),pe.zF.create(n.doc,i)}({state:e,extension:this})}}}onSetOptions(e){const{changes:t}=e;t.placeholder.changed&&this.store.phase>=d.bC.EditorView&&this.store.updateAttributes()}};((e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r)})(Xr=(e=>{var t;return[,,,Zr(null!=(t=null==e?void 0:e[io("metadata")])?t:null)]})(Yr),1,xo=((e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=po[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&to(h<4?o:{get[n](){return vo(this,s)},set[n](e){return bo(this,s,e)}},n));h?p&&h<4&&uo(s,(h>2?"set ":h>1?"get ":"")+n):uo(o,n);for(var b=r.length-1;b>=0;b--)c=mo(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>yo(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?vo:wo)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>bo(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?fo(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?ao("Object expected"):(fo(i=a.get)&&(v.get=i),fo(i=a.set)&&(v.set=i),fo(i=a.init)&&g.unshift(i));return h||((e,t)=>{lo(t,io("metadata"),e[3])})(e,o),v&&Qr(o,n,v),p?4^h?s:v:o})(Xr,0,"PlaceholderExtension",qr,xo));var So,Oo,ko,Eo=n(48628),Co=Object.create,Mo=Object.defineProperty,No=Object.getOwnPropertyDescriptor,To=Object.getOwnPropertySymbols,Ao=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,Ro=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),_o=e=>{throw TypeError(e)},Po=(e,t,n)=>t in e?Mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Do=(e,t)=>{for(var n in t||(t={}))Ao.call(t,n)&&Po(e,n,t[n]);if(To)for(var n of To(t))Io.call(t,n)&&Po(e,n,t[n]);return e},Lo=(e,t)=>Mo(e,"name",{value:t,configurable:!0}),zo=["class","method","getter","setter","accessor","field","value","get","set"],jo=e=>void 0!==e&&"function"!==typeof e?_o("Function expected"):e,Fo=(e,t,n,r,o)=>({kind:zo[e],name:t,metadata:r,addInitializer:e=>n._?_o("Already initialized"):o.push(jo(e||null))}),Bo=(e,t,n)=>t.has(e)||_o("Cannot "+n),Vo=(e,t)=>Object(t)!==t?_o('Cannot use the "in" operator on this value'):e.has(t),Ko=(e,t,n)=>(Bo(e,t,"read from private field"),n?n.call(e):t.get(e)),$o=(e,t,n,r)=>(Bo(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Wo=(e,t,n)=>(Bo(e,t,"access private method"),n),Ho=Do(Do({},xo.defaultOptions),Eo.sR.defaultOptions),Uo=[...xo.staticKeys,...Eo.sR.staticKeys];So=[(0,h.ckn)({defaultOptions:Ho,staticKeys:Uo})];var Go=class extends(ko=h.UBi){get name(){return"react"}onSetOptions(e){const{pickChanged:t}=e;this.getExtension(xo).setOptions(t(["placeholder"]))}createExtensions(){const{emptyNodeClass:e,placeholder:t,defaultBlockNode:n,defaultContentNode:r,defaultEnvironment:o,defaultInlineNode:s,nodeViewComponents:i}=this.options;return[new xo({emptyNodeClass:e,placeholder:t,priority:d.OR.Low}),new Eo.sR({defaultBlockNode:n,defaultContentNode:r,defaultEnvironment:o,defaultInlineNode:s,nodeViewComponents:i})]}};((e,t,n,r)=>{for(var o=0,s=e[t>>1],i=s&&s.length;o<i;o++)1&t?s[o].call(n):r=s[o].call(n,r)})(Oo=(e=>{var t;return[,,,Co(null!=(t=null==e?void 0:e[Ro("metadata")])?t:null)]})(ko),1,Go=((e,t,n,r,o,s)=>{var i,a,l,c,d,h=7&t,u=!!(8&t),p=!!(16&t),f=h>3?e.length+1:h?u?1:2:0,m=zo[h+5],g=h>3&&(e[f-1]=[]),y=e[f]||(e[f]=[]),v=h&&(!p&&!u&&(o=o.prototype),h<5&&(h>3||!p)&&No(h<4?o:{get[n](){return Ko(this,s)},set[n](e){return $o(this,s,e)}},n));h?p&&h<4&&Lo(s,(h>2?"set ":h>1?"get ":"")+n):Lo(o,n);for(var b=r.length-1;b>=0;b--)c=Fo(h,n,l={},e[3],y),h&&(c.static=u,c.private=p,d=c.access={has:p?e=>Vo(o,e):e=>n in e},3^h&&(d.get=p?e=>(1^h?Ko:Wo)(e,o,4^h?s:v.get):e=>e[n]),h>2&&(d.set=p?(e,t)=>$o(e,o,t,4^h?s:v.set):(e,t)=>e[n]=t)),a=(0,r[b])(h?h<4?p?s:v[m]:h>4?void 0:{get:v.get,set:v.set}:o,c),l._=1,4^h||void 0===a?jo(a)&&(h>4?g.unshift(a):h?p?s=a:v[m]=a:o=a):"object"!==typeof a||null===a?_o("Object expected"):(jo(i=a.get)&&(v.get=i),jo(i=a.set)&&(v.set=i),jo(i=a.init)&&g.unshift(i));return h||((e,t)=>{Po(t,Ro("metadata"),e[3])})(e,o),v&&Mo(o,n,v),p?4^h?s:v:o})(Oo,0,"ReactExtension",So,Go));var Jo=n(31446),qo=Object.defineProperty,Xo=Object.defineProperties,Yo=Object.getOwnPropertyDescriptors,Zo=Object.getOwnPropertySymbols,Qo=Object.prototype.hasOwnProperty,es=Object.prototype.propertyIsEnumerable,ts=e=>{throw TypeError(e)},ns=(e,t,n)=>t in e?qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t)=>{for(var n in t||(t={}))Qo.call(t,n)&&ns(e,n,t[n]);if(Zo)for(var n of Zo(t))es.call(t,n)&&ns(e,n,t[n]);return e},os=(e,t)=>Xo(e,Yo(t)),ss=(e,t)=>{var n={};for(var r in e)Qo.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Zo)for(var r of Zo(e))t.indexOf(r)<0&&es.call(e,r)&&(n[r]=e[r]);return n},is=(e,t,n)=>ns(e,"symbol"!==typeof t?t+"":t,n),as=(e,t,n)=>t.has(e)||ts("Cannot "+n),ls=(e,t,n)=>(as(e,t,"read from private field"),n?n.call(e):t.get(e)),cs=e=>e.message,ds=(0,l.createContext)(cs),hs=e=>{let{i18nFormat:t=cs,locale:n="en",supportedLocales:r,children:o}=e;const s=(0,l.useMemo)((()=>null!=r?r:[n]),[r,n]),i=(0,l.useCallback)(((e,r)=>t(e,r,n,s)),[t,n,s]);return l.createElement(ds.Provider,{value:i},o)};var us=(0,l.createContext)(null);function ps(e){const t=(0,l.useContext)(us),n=(0,l.useRef)(function(){const[,e]=(0,l.useState)((0,c.Ik)());return(0,l.useCallback)((()=>{e((0,c.Ik)())}),[])}());(0,c.V1)(t,{code:d.bh.REACT_PROVIDER_CONTEXT});const{addHandler:r}=t;return(0,l.useEffect)((()=>{let t=e;if(t){if((0,c.Qd)(t)){const{autoUpdate:e}=t;t=e?()=>n.current():void 0}if((0,c.Tn)(t))return r("updated",t)}}),[r,e]),t}function fs(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{core:n,react:r}=t,o=ss(t,["core","react"]);return(0,h.AYH)(e)?e:h.QIB.create((()=>[...(0,c.Y)(e),new Go(r),...Jr(n)]),o)}var ms,gs="object"===typeof Jo&&Jo.__esModule&&Jo.default?Jo.default:Jo,ys=class extends h.dTB{constructor(e){var t,n,r,o;super(e),n=this,(r=ms).has(n)?ts("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(n):r.set(n,o),is(this,"rootPropsConfig",{called:!1,count:0}),is(this,"getRootProps",(e=>this.internalGetRootProps(e,null))),is(this,"internalGetRootProps",((e,t)=>{this.rootPropsConfig.called=!0;const n=null!=e?e:(0,c.Ik)(),{refKey:r="ref",ref:o}=n,s=ss(n,["refKey","ref"]);return os(rs({[r]:gs(o,this.onRef),key:this.uid},s),{children:t})})),is(this,"onRef",(e=>{e&&(this.rootPropsConfig.count+=1,(0,c.V1)(this.rootPropsConfig.count<=1,{code:d.bh.REACT_GET_ROOT_PROPS,message:"Called ".concat(this.rootPropsConfig.count," times")}),((e,t,n,r)=>{as(e,t,"write to private field"),r?r.call(e,n):t.set(e,n)})(this,ms,e),this.onRefLoad())})),this.manager.view?this.manager.view.setProps({state:this.manager.view.state,dispatchTransaction:this.dispatchTransaction,attributes:()=>this.getAttributes(),editable:()=>{var e;return null==(e=this.props.editable)||e}}):this.manager.getExtension(xo).setOptions({placeholder:null!=(t=this.props.placeholder)?t:""})}get name(){return"react"}update(e){return super.update(e),this}createView(e){return new pe.Lz(null,{state:e,dispatchTransaction:this.dispatchTransaction,attributes:()=>this.getAttributes(),editable:()=>{var e;return null==(e=this.props.editable)||e},plugins:[]})}updateState(e){var t=e,{state:n}=t,r=ss(t,["state"]);const{triggerChange:o=!0,tr:s,transactions:i}=r;if(this.props.state){const{onChange:e}=this.props;return(0,c.V1)(e,{code:d.bh.REACT_CONTROLLED,message:"You are required to provide the `onChange` handler when creating a controlled editor."}),(0,c.V1)(o,{code:d.bh.REACT_CONTROLLED,message:"Controlled editors do not support `clearContent` or `setContent` where `triggerChange` is `true`. Update the `state` prop instead."}),this.previousStateOverride||(this.previousStateOverride=this.getState()),void this.onChange({state:n,tr:s,transactions:i})}s||i||(n=n.apply(n.tr.setMeta(d.Tc,{}))),this.view.updateState(n),o&&0!==(null==i?void 0:i.length)&&this.onChange({state:n,tr:s,transactions:i}),this.manager.onStateUpdate({previousState:this.previousState,state:n,tr:s,transactions:i})}updateControlledState(e,t){this.previousStateOverride=t,e=e.apply(e.tr.setMeta(d.Tc,{})),this.view.updateState(e),this.manager.onStateUpdate({previousState:this.previousState,state:e}),this.previousStateOverride=void 0}addProsemirrorViewToDom(e,t){"start"===this.props.insertPosition?e.insertBefore(t,e.firstChild):e.append(t)}onRefLoad(){(0,c.V1)(ls(this,ms),{code:d.bh.REACT_EDITOR_VIEW,message:"Something went wrong when initializing the text editor. Please check your setup."});const{autoFocus:e}=this.props;this.addProsemirrorViewToDom(ls(this,ms),this.view.dom),e&&this.focus(e),this.onChange(),this.addFocusListeners()}onUpdate(){this.view&&ls(this,ms)&&this.view.setProps(os(rs({},this.view.props),{editable:()=>{var e;return null==(e=this.props.editable)||e}}))}get frameworkOutput(){return os(rs({},this.baseOutput),{getRootProps:this.getRootProps,portalContainer:this.manager.store.portalContainer})}resetRender(){this.rootPropsConfig.called=!1,this.rootPropsConfig.count=0}};ms=new WeakMap;var vs="undefined"!==typeof document?l.useLayoutEffect:l.useEffect;function bs(e){const{manager:t,state:n}=e,{placeholder:r,editable:o}=e;(0,l.useRef)(!0).current&&!(0,c.hX)(r)&&t.getExtension(Go).setOptions({placeholder:r}),(0,l.useEffect)((()=>{null!=r&&t.getExtension(Go).setOptions({placeholder:r})}),[r,t]);const[s]=(0,l.useState)((()=>{var r;if(n)return n;const o=t.createEmptyDoc(),[s,i]=(0,c.cy)(e.initialContent)?e.initialContent:[null!=(r=e.initialContent)?r:o];return t.createState({content:s,selection:i})})),i=function(e){const t=(0,l.useRef)(e);t.current=e;const n=(0,l.useMemo)((()=>new ys(t.current)),[]);return n.update(e),n}({initialEditorState:s,getProps:()=>e});return(0,l.useEffect)((()=>()=>{i.destroy()}),[i]),(0,l.useEffect)((()=>{i.onUpdate()}),[o,i]),function(e){const{state:t}=e.props,n=(0,l.useRef)(!!t),r=function(e){const t=(0,l.useRef)();return vs((()=>{t.current=e})),t.current}(t);vs((()=>{const o=t?!0===n.current:!1===n.current;(0,c.V1)(o,{code:d.bh.REACT_CONTROLLED,message:n.current?"You have attempted to switch from a controlled to an uncontrolled editor. Once you set up an editor as a controlled editor it must always provide a `state` prop.":"You have provided a `state` prop to an uncontrolled editor. In order to set up your editor as controlled you must provide the `state` prop from the very first render."}),t&&t!==r&&e.updateControlledState(t,null!=r?r:void 0)}),[t,r,e])}(i),i.frameworkOutput}function ws(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{content:t,document:n,selection:r,extensions:o}=e,s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(0,l.useRef)(e),r=(0,l.useRef)(t),[o,s]=(0,l.useState)((()=>fs(e,t)));return n.current=e,r.current=t,(0,l.useEffect)((()=>o.addHandler("destroy",(()=>{s((()=>fs(n.current,r.current)))}))),[o]),o}(null!=o?o:()=>[],ss(e,["content","document","selection","extensions"])),[i,a]=(0,l.useState)((()=>s.createState({selection:r,content:null!=t?t:s.createEmptyDoc()}))),c=(0,l.useCallback)((e=>{let{state:t}=e;a(t)}),[]),d=(0,l.useCallback)((()=>s.output),[s]);return(0,l.useMemo)((()=>({state:i,setState:a,manager:s,onChange:c,getContext:d})),[d,s,c,i])}var xs=()=>l.createElement("div",rs({className:Cn.E6.EDITOR_WRAPPER},ps().getRootProps())),Ss=e=>(e.hook(),null);function Os(e){const t=e,{children:n,autoRender:r,i18nFormat:o,locale:s,supportedLocales:i,hooks:a=[]}=t,d=bs(ss(t,["children","autoRender","i18nFormat","locale","supportedLocales","hooks"])),h=(0,Eo.hZ)(d.portalContainer),u="start"===r||!0===r||!n&&(0,c.hX)(r),p="end"===r;return l.createElement(hs,{i18nFormat:o,locale:s,supportedLocales:i},l.createElement(us.Provider,{value:d},l.createElement(Eo.Wt,{portals:h}),a.map(((e,t)=>l.createElement(Ss,{hook:e,key:t}))),u&&l.createElement(xs,null),n,p&&l.createElement(xs,null)))}},34220:(e,t,n)=>{"use strict";n.d(t,{$u:()=>s,E6:()=>o,Lz:()=>d,iC:()=>i,rk:()=>a});var r=n(36065);var o=Object.freeze({__proto__:null,ANIMATED_POPOVER:"remirror-animated-popover",BUTTON:"remirror-button",BUTTON_ACTIVE:"remirror-button-active",COLOR_PICKER:"remirror-color-picker",COLOR_PICKER_CELL:"remirror-color-picker-cell",COLOR_PICKER_CELL_SELECTED:"remirror-color-picker-cell-selected",COMPOSITE:"remirror-composite",DIALOG:"remirror-dialog",DIALOG_BACKDROP:"remirror-dialog-backdrop",EDITOR_WRAPPER:"remirror-editor-wrapper",FLEX_COLUMN:"remirror-flex-column",FLEX_ROW:"remirror-flex-row",FLOATING_POPOVER:"remirror-floating-popover",FORM:"remirror-form",FORM_GROUP:"remirror-form-group",FORM_LABEL:"remirror-form-label",FORM_MESSAGE:"remirror-form-message",GROUP:"remirror-group",INPUT:"remirror-input",MENU:"remirror-menu",MENU_BAR:"remirror-menu-bar",MENU_BUTTON:"remirror-menu-button",MENU_BUTTON_LEFT:"remirror-menu-button-left",MENU_BUTTON_NESTED_LEFT:"remirror-menu-button-nested-left",MENU_BUTTON_NESTED_RIGHT:"remirror-menu-button-nested-right",MENU_BUTTON_RIGHT:"remirror-menu-button-right",MENU_DROPDOWN_LABEL:"remirror-menu-dropdown-label",MENU_GROUP:"remirror-menu-group",MENU_ITEM:"remirror-menu-item",MENU_ITEM_CHECKBOX:"remirror-menu-item-checkbox",MENU_ITEM_COLUMN:"remirror-menu-item-column",MENU_ITEM_RADIO:"remirror-menu-item-radio",MENU_ITEM_ROW:"remirror-menu-item-row",MENU_PANE:"remirror-menu-pane",MENU_PANE_ACTIVE:"remirror-menu-pane-active",MENU_PANE_ICON:"remirror-menu-pane-icon",MENU_PANE_LABEL:"remirror-menu-pane-label",MENU_PANE_SHORTCUT:"remirror-menu-pane-shortcut",POPOVER:"remirror-popover",ROLE:"remirror-role",SEPARATOR:"remirror-separator",TAB:"remirror-tab",TABBABLE:"remirror-tabbable",TABLE_SIZE_EDITOR:"remirror-table-size-editor",TABLE_SIZE_EDITOR_BODY:"remirror-table-size-editor-body",TABLE_SIZE_EDITOR_CELL:"remirror-table-size-editor-cell",TABLE_SIZE_EDITOR_CELL_SELECTED:"remirror-table-size-editor-cell-selected",TABLE_SIZE_EDITOR_FOOTER:"remirror-table-size-editor-footer",TAB_LIST:"remirror-tab-list",TOOLBAR:"remirror-toolbar",TOOLTIP:"remirror-tooltip"});var s=Object.freeze({__proto__:null,COLLAPSIBLE_LIST_ITEM_BUTTON:"remirror-collapsible-list-item-button",COLLAPSIBLE_LIST_ITEM_CLOSED:"remirror-collapsible-list-item-closed",EDITOR:"remirror-editor",LIST_ITEM_CHECKBOX:"remirror-list-item-checkbox",LIST_ITEM_MARKER_CONTAINER:"remirror-list-item-marker-container",LIST_ITEM_WITH_CUSTOM_MARKER:"remirror-list-item-with-custom-mark",LIST_SPINE:"remirror-list-spine",UL_LIST_CONTENT:"remirror-ul-list-content"});var i=Object.freeze({__proto__:null,IS_EMPTY:"remirror-is-empty"});var a=Object.freeze({__proto__:null,EDITOR:"remirror-editor",POSITIONER:"remirror-positioner",POSITIONER_WIDGET:"remirror-positioner-widget"});function l(e){return e.replace(/([a-z])([\dA-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase()}function c(e){return`--rmr-${e.map(l).join("-")}`}function d(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return`var(${c(e)})`}(t.map((e=>e.toString())))}const h={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},u="#000000",p="#ffffff",f=(0,r.No)(u,.75),m="#7963d2",g="#bcd263",y=h.gray[1],v="rgba(10,31,68,0.08)",b="rgba(10,31,68,0.10)",w="rgba(10,31,68,0.12)",x={background:p,border:f,foreground:u,muted:y,primary:m,secondary:g,primaryText:"#fff",secondaryText:"#fff",text:"#252103",faded:(0,r.a)((0,r.No)(u,.1),.13)},S={...x,background:(0,r.e$)(p,.15),border:(0,r.e$)(f,.15),foreground:(0,r.e$)(u,.15),muted:(0,r.e$)(y,.15),primary:(0,r.e$)(m,.15),secondary:(0,r.e$)(g,.15),get text(){return(0,r.W0)(this.background)},get primaryText(){return(0,r.W0)(this.primary)},get secondaryText(){return(0,r.W0)(this.secondary)}},O={...x,background:(0,r.e$)(p,.075),border:(0,r.e$)(f,.075),foreground:(0,r.e$)(u,.075),muted:(0,r.e$)(y,.075),primary:(0,r.e$)(m,.075),secondary:(0,r.e$)(g,.075),get text(){return(0,r.W0)(this.background)},get primaryText(){return(0,r.W0)(this.primary)},get secondaryText(){return(0,r.W0)(this.secondary)}};(0,r.No)(u,.1),(0,r.No)(m,.6),(0,r.a)(u,.8),(0,r.a)(u,.4),h.gray[3],h.blue[7],h.blue[1],h.blue[5],h.blue[7],(0,r.a)(u,.4),h.blue[5],h.red[7],h.red[1],h.red[5]},83207:(e,t,n)=>{"use strict";n.d(t,{fL:()=>a,kW:()=>l});const r=/^[a-z\xe0-\xf6\xf8-\xff]+|[A-Z\xc0-\xd6\xd8-\xdf][a-z\xe0-\xf6\xf8-\xff]+|[a-z\xe0-\xf6\xf8-\xff]+|[0-9]+|[A-Z\xc0-\xd6\xd8-\xdf]+(?![a-z\xe0-\xf6\xf8-\xff])/g,o=/\S+/g;function s(e,t){const{keepSpecialCharacters:n=!1,keep:s,prefix:i=""}=t||{},a=e.trim().normalize("NFC"),l=a.includes(" "),c=function(e,t){const n={parts:[],prefixes:[]},r=e.matchAll(t);let o=0;for(const i of r){if("number"!==typeof i.index)continue;const t=i[0];n.parts.push(t);const r=e.slice(o,i.index).trim();n.prefixes.push(r),o=i.index+t.length}const s=e.slice(o).trim();return s&&(n.parts.push(""),n.prefixes.push(s)),n}(a,l?o:r);return c.parts.map(((e,t)=>{let r=c.prefixes[t]||"",o=e;return!1===n&&(s&&(o=o.normalize("NFD").replace(new RegExp(`[^a-zA-Z\xd8\xdf\xf80-9${s.join("")}]`,"g"),"")),s||(o=o.normalize("NFD").replace(/[^a-zA-Z\xd8\xdf\xf80-9]/g,""),r="")),s&&(r=r.replace(new RegExp(`[^${s.join("")}]`,"g"),"")),0===t?r+o:r||o?l&&!r&&i.match(/\s/)?" "+o:(r||i)+o:""})).filter(Boolean)}function i(e){const t=e.matchAll(r).next().value,n=t?t.index:0;return e.slice(0,n+1).toUpperCase()+e.slice(n+1).toLowerCase()}function a(e,t){return s(e,t).reduce(((e,t)=>e+i(t)),"")}function l(e,t){return s(e,{...t,prefix:"-"}).join("").toLowerCase()}},36065:(e,t,n)=>{"use strict";function r(e,t,n){return Math.min(Math.max(e,n),t)}n.d(t,{No:()=>O,W0:()=>k,a:()=>S,e$:()=>b,nj:()=>E});class o extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var s=o;function i(e){if("string"!==typeof e)throw new s(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=f.test(e)?function(e){const t=e.toLowerCase().trim(),n=l[function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0)%2341}(t)];if(!n)throw new s(e);return`#${n}`}(e):e;const n=d.exec(t);if(n){const e=Array.from(n).slice(1);return[...e.slice(0,3).map((e=>parseInt(c(e,2),16))),parseInt(c(e[3]||"f",2),16)/255]}const o=h.exec(t);if(o){const e=Array.from(o).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,16))),parseInt(e[3]||"ff",16)/255]}const i=u.exec(t);if(i){const e=Array.from(i).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,10))),parseFloat(e[3]||"1")]}const a=p.exec(t);if(a){const[t,n,o,i]=Array.from(a).slice(1).map(parseFloat);if(r(0,100,n)!==n)throw new s(e);if(r(0,100,o)!==o)throw new s(e);return[...g(t,n,o),Number.isNaN(i)?1:i]}throw new s(e)}const a=e=>parseInt(e.replace(/_/g,""),36),l="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((e,t)=>{const n=a(t.substring(0,3)),r=a(t.substring(3)).toString(16);let o="";for(let s=0;s<6-r.length;s++)o+="0";return e[n]=`${o}${r}`,e}),{});const c=(e,t)=>Array.from(Array(t)).map((()=>e)).join(""),d=new RegExp(`^#${c("([a-f0-9])",3)}([a-f0-9])?$`,"i"),h=new RegExp(`^#${c("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),u=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${c(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),p=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,f=/^[a-z]+$/i,m=e=>Math.round(255*e),g=(e,t,n)=>{let r=n/100;if(0===t)return[r,r,r].map(m);const o=(e%360+360)%360/60,s=(1-Math.abs(2*r-1))*(t/100),i=s*(1-Math.abs(o%2-1));let a=0,l=0,c=0;o>=0&&o<1?(a=s,l=i):o>=1&&o<2?(a=i,l=s):o>=2&&o<3?(l=s,c=i):o>=3&&o<4?(l=i,c=s):o>=4&&o<5?(a=i,c=s):o>=5&&o<6&&(a=s,c=i);const d=r-s/2;return[a+d,l+d,c+d].map(m)};function y(e){const[t,n,r,o]=i(e).map(((e,t)=>3===t?e:e/255)),s=Math.max(t,n,r),a=Math.min(t,n,r),l=(s+a)/2;if(s===a)return[0,0,l,o];const c=s-a;return[60*(t===s?(n-r)/c+(n<r?6:0):n===s?(r-t)/c+2:(t-n)/c+4),l>.5?c/(2-s-a):c/(s+a),l,o]}function v(e,t,n,o){return`hsla(${(e%360).toFixed()}, ${r(0,100,100*t).toFixed()}%, ${r(0,100,100*n).toFixed()}%, ${parseFloat(r(0,1,o).toFixed(3))})`}function b(e,t){const[n,r,o,s]=y(e);return v(n,r,o-t,s)}function w(e){if("transparent"===e)return 0;function t(e){const t=e/255;return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}const[n,r,o]=i(e);return.2126*t(n)+.7152*t(r)+.0722*t(o)}function x(e,t,n,o){return`rgba(${r(0,255,e).toFixed()}, ${r(0,255,t).toFixed()}, ${r(0,255,n).toFixed()}, ${parseFloat(r(0,1,o).toFixed(3))})`}function S(e,t){return b(e,-t)}function O(e,t){const[n,r,o,s]=i(e);return x(n,r,o,s-t)}function k(e){return function(e){return w(e)>.179}(e)?"#000":"#fff"}function E(e){const[t,n,o,s]=i(e);let a=e=>{const t=r(0,255,e).toString(16);return 1===t.length?`0${t}`:t};return`#${a(t)}${a(n)}${a(o)}${s<1?a(Math.round(255*s)):""}`}},36934:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});let r=()=>({events:{},emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.events[e]||[]).forEach((e=>e(...n)))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter((e=>e!==t))}})},17293:(e,t,n)=>{"use strict";n.d(t,{Qv:()=>l,RV:()=>M,hy:()=>g,st:()=>S,wh:()=>x});var r=n(82711),o=n(94644),s=n(27908);const i=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function a(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const l=(e,t,n)=>{let i=a(e,n);if(!i)return!1;let l=d(i);if(!l){let n=i.blockRange(),o=n&&(0,r.jP)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let h=l.nodeBefore;if(y(e,l,t,-1))return!0;if(0==i.parent.content.size&&(c(h,"end")||s.nh.isSelectable(h)))for(let a=i.depth;;a--){let n=(0,r.$L)(e.doc,i.before(a),i.after(a),o.Ji.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(c(h,"end")?s.LN.findFrom(r.doc.resolve(r.mapping.map(l.pos,-1)),-1):s.nh.create(r.doc,l.pos-h.nodeSize)),t(r.scrollIntoView())}return!0}if(1==a||i.node(a-1).childCount>1)break}return!(!h.isAtom||l.depth!=i.depth-1)&&(t&&t(e.tr.delete(l.pos-h.nodeSize,l.pos).scrollIntoView()),!0)};function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function d(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function h(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}function u(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function p(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const f=(e,t)=>{let{$from:n,$to:o}=e.selection;if(e.selection instanceof s.nh&&e.selection.node.isBlock)return!(!n.parentOffset||!(0,r.zy)(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i,a,l=[],c=!1,d=!1;for(let r=n.depth;;r--){if(n.node(r).isBlock){c=n.end(r)==n.pos+(n.depth-r),d=n.start(r)==n.pos-(n.depth-r),a=p(n.node(r-1).contentMatchAt(n.indexAfter(r-1)));let e=m&&m(o.parent,c,n);l.unshift(e||(c&&a?{type:a}:null)),i=r;break}if(1==r)return!1;l.unshift(null)}let h=e.tr;(e.selection instanceof s.U3||e.selection instanceof s.i5)&&h.deleteSelection();let u=h.mapping.map(n.pos),f=(0,r.zy)(h.doc,u,l.length,l);if(f||(l[0]=a?{type:a}:null,f=(0,r.zy)(h.doc,u,l.length,l)),h.split(u,l.length,l),!c&&d&&n.node(i).type!=a){let e=h.mapping.map(n.before(i)),t=h.doc.resolve(e);a&&n.node(i-1).canReplaceWith(t.index(),t.index()+1,a)&&h.setNodeMarkup(h.mapping.map(n.before(i)),a)}return t&&t(h.scrollIntoView()),!0};var m;const g=(e,t)=>{let n,{$from:r,to:o}=e.selection,i=r.sharedDepth(o);return 0!=i&&(n=r.before(i),t&&t(e.tr.setSelection(s.nh.create(e.doc,n))),!0)};function y(e,t,n,i){let a,l,d=t.nodeBefore,h=t.nodeAfter,u=d.type.spec.isolating||h.type.spec.isolating;if(!u&&function(e,t,n){let o=t.nodeBefore,s=t.nodeAfter,i=t.index();return!!(o&&s&&o.type.compatibleContent(s.type))&&(!o.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!s.isTextblock&&!(0,r.n9)(e.doc,t.pos))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let p=!u&&t.parent.canReplace(t.index(),t.index()+1);if(p&&(a=(l=d.contentMatchAt(d.childCount)).findWrapping(h.type))&&l.matchType(a[0]||h.type).validEnd){if(n){let s=t.pos+h.nodeSize,i=o.FK.empty;for(let e=a.length-1;e>=0;e--)i=o.FK.from(a[e].create(null,i));i=o.FK.from(d.copy(i));let l=e.tr.step(new r.Wg(t.pos-1,s,t.pos,s,new o.Ji(i,1,0),a.length,!0)),c=l.doc.resolve(s+2*a.length);c.nodeAfter&&c.nodeAfter.type==d.type&&(0,r.n9)(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let f=h.type.spec.isolating||i>0&&u?null:s.LN.findFrom(t,1),m=f&&f.$from.blockRange(f.$to),g=m&&(0,r.jP)(m);if(null!=g&&g>=t.depth)return n&&n(e.tr.lift(m,g).scrollIntoView()),!0;if(p&&c(h,"start",!0)&&c(d,"end")){let s=d,i=[];for(;i.push(s),!s.isTextblock;)s=s.lastChild;let a=h,l=1;for(;!a.isTextblock;a=a.firstChild)l++;if(s.canReplace(s.childCount,s.childCount,a.content)){if(n){let s=o.FK.empty;for(let e=i.length-1;e>=0;e--)s=o.FK.from(i[e].copy(s));n(e.tr.step(new r.Wg(t.pos-i.length,t.pos+h.nodeSize,t.pos+l,t.pos+h.nodeSize-l,new o.Ji(s,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function v(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(s.U3.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}const b=v(-1),w=v(1);function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=!1!==(n&&n.removeWhenPresent),o=!1!==(n&&n.enterInlineAtoms),i=!(n&&n.includeWhitespace);return function(n,a){let{empty:l,$cursor:c,ranges:d}=n.selection;if(l&&!c||!function(e,t,n,r){for(let o=0;o<t.length;o++){let{$from:s,$to:i}=t[o],a=0==s.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(s.pos,i.pos,((e,t)=>{if(a||!r&&e.isAtom&&e.isInline&&t>=s.pos&&t+e.nodeSize<=i.pos)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return!0}return!1}(n.doc,d,e,o))return!1;if(a)if(c)e.isInSet(n.storedMarks||c.marks())?a(n.tr.removeStoredMark(e)):a(n.tr.addStoredMark(e.create(t)));else{let l,c=n.tr;o||(d=function(e){let t=[];for(let n=0;n<e.length;n++){let{$from:r,$to:o}=e[n];r.doc.nodesBetween(r.pos,o.pos,((e,n)=>{if(e.isAtom&&e.content.size&&e.isInline&&n>=r.pos&&n+e.nodeSize<=o.pos)return n+1>r.pos&&t.push(new s.yn(r,r.doc.resolve(n+1))),r=r.doc.resolve(n+1+e.content.size),!1})),r.pos<o.pos&&t.push(new s.yn(r,o))}return t}(d)),l=r?!d.some((t=>n.doc.rangeHasMark(t.$from.pos,t.$to.pos,e))):!d.every((t=>{let n=!1;return c.doc.nodesBetween(t.$from.pos,t.$to.pos,((r,o,s)=>{if(n)return!1;n=!e.isInSet(r.marks)&&!!s&&s.type.allowsMarkType(e)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,t.$from.pos-o),Math.min(r.nodeSize,t.$to.pos-o))))})),!n}));for(let n=0;n<d.length;n++){let{$from:r,$to:o}=d[n];if(l){let n=r.pos,s=o.pos,a=r.nodeAfter,l=o.nodeBefore,d=i&&a&&a.isText?/^\s*/.exec(a.text)[0].length:0,h=i&&l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+d<s&&(n+=d,s-=h),c.addMark(n,s,e.create(t))}else c.removeMark(r.pos,o.pos,e)}a(c.scrollIntoView())}return!0}}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}let O=S(i,l,((e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=d(r)}let a=i&&i.nodeBefore;return!(!a||!s.nh.isSelectable(a))&&(t&&t(e.tr.setSelection(s.nh.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)})),k=S(i,((e,t,n)=>{let i=h(e,n);if(!i)return!1;let a=u(i);if(!a)return!1;let l=a.nodeAfter;if(y(e,a,t,1))return!0;if(0==i.parent.content.size&&(c(l,"start")||s.nh.isSelectable(l))){let n=(0,r.$L)(e.doc,i.before(),i.after(),o.Ji.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(c(l,"start")?s.LN.findFrom(r.doc.resolve(r.mapping.map(a.pos)),1):s.nh.create(r.doc,r.mapping.map(a.pos))),t(r.scrollIntoView())}return!0}}return!(!l.isAtom||a.depth!=i.depth-1)&&(t&&t(e.tr.delete(a.pos,a.pos+l.nodeSize).scrollIntoView()),!0)}),((e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=u(r)}let a=i&&i.nodeAfter;return!(!a||!s.nh.isSelectable(a))&&(t&&t(e.tr.setSelection(s.nh.create(e.doc,i.pos)).scrollIntoView()),!0)}));const E={Enter:S(((e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),((e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof s.i5||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=p(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(n,i.createAndFill());a.setSelection(s.U3.create(a.doc,n+1)),t(a.scrollIntoView())}return!0}),((e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if((0,r.zy)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),s=o&&(0,r.jP)(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}),f),"Mod-Enter":(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),a=p(o.contentMatchAt(i));if(!a||!o.canReplaceWith(i,i,a))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,a.createAndFill());o.setSelection(s.LN.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},Backspace:O,"Mod-Backspace":O,"Shift-Backspace":O,Delete:k,"Mod-Delete":k,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new s.i5(e.doc))),!0)},C={"Ctrl-h":E.Backspace,"Alt-Backspace":E["Mod-Backspace"],"Ctrl-d":E.Delete,"Ctrl-Alt-Backspace":E["Mod-Delete"],"Alt-Delete":E["Mod-Delete"],"Alt-d":E["Mod-Delete"],"Ctrl-a":b,"Ctrl-e":w};for(let N in E)C[N]=E[N];const M=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?C:E},52350:(e,t,n)=>{"use strict";n.d(t,{dv:()=>c,fV:()=>s,sM:()=>a,tG:()=>d});var r=n(27908),o=n(82711);class s{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r;this.match=e,this.match=e,this.handler="string"==typeof t?(r=t,function(e,t,n,o){let s=r;if(t[1]){let e=t[0].lastIndexOf(t[1]);s+=t[0].slice(e+t[1].length);let r=(n+=e)-o;r>0&&(s=t[0].slice(e-r,e)+s,n=o)}return e.tr.insertText(s,n,o)}):t,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1}}const i=500;function a(e){let{rules:t}=e,n=new r.k_({state:{init:()=>null,apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(e,r,o,s)=>l(e,r,o,s,t,n),handleDOMEvents:{compositionend:e=>{setTimeout((()=>{let{$cursor:r}=e.state.selection;r&&l(e,r.pos,r.pos,"",t,n)}))}}},isInputRules:!0});return n}function l(e,t,n,r,o,s){if(e.composing)return!1;let a=e.state,l=a.doc.resolve(t),c=l.parent.textBetween(Math.max(0,l.parentOffset-i),l.parentOffset,null,"\ufffc")+r;for(let i=0;i<o.length;i++){let d=o[i];if(l.parent.type.spec.code){if(!d.inCode)continue}else if("only"===d.inCode)continue;let h=d.match.exec(c),u=h&&d.handler(a,h,t-(h[0].length-r.length),n);if(u)return d.undoable&&u.setMeta(s,{transform:u,from:t,to:n,text:r}),e.dispatch(u),!0}return!1}const c=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let o,s=n[r];if(s.spec.isInputRules&&(o=s.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1};new s(/--$/,"\u2014"),new s(/\.\.\.$/,"\u2026"),new s(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c"),new s(/"$/,"\u201d"),new s(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),new s(/'$/,"\u2019");function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new s(e,((e,s,i,a)=>{let l=n instanceof Function?n(s):n,c=e.tr.delete(i,a),d=c.doc.resolve(i).blockRange(),h=d&&(0,o.oM)(d,t,l);if(!h)return null;c.wrap(d,h);let u=c.doc.resolve(i-1).nodeBefore;return u&&u.type==t&&(0,o.n9)(c.doc,i-1)&&(!r||r(s,u))&&c.join(i-1),c}))}},6521:(e,t,n)=>{"use strict";n.d(t,{K:()=>u});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},s="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),a=0;a<10;a++)r[48+a]=r[96+a]=String(a);for(a=1;a<=24;a++)r[a+111]="F"+a;for(a=65;a<=90;a++)r[a]=String.fromCharCode(a+32),o[a]=String.fromCharCode(a);for(var l in r)o.hasOwnProperty(l)||(o[l]=r[l]);const c="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function d(e){let t,n,r,o,s=e.split(/-(?!$)/),i=s[s.length-1];"Space"==i&&(i=" ");for(let a=0;a<s.length-1;a++){let e=s[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);c?o=!0:n=!0}}return t&&(i="Alt-"+i),n&&(i="Ctrl-"+i),o&&(i="Meta-"+i),r&&(i="Shift-"+i),i}function h(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function u(e){let t=function(e){let t=Object.create(null);for(let n in e)t[d(n)]=e[n];return t}(e);return function(e,n){let a,l=function(e){var t=!(s&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||i&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),c=t[h(l,n)];if(c&&c(e.state,e.dispatch,e))return!0;if(1==l.length&&" "!=l){if(n.shiftKey){let r=t[h(l,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||l.charCodeAt(0)>127)&&(a=r[n.keyCode])&&a!=l){let r=t[h(a,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}},94644:(e,t,n)=>{"use strict";function r(e){this.content=e}n.d(t,{S4:()=>Z,ZF:()=>le,FK:()=>a,CU:()=>h,sX:()=>q,bP:()=>I,u$:()=>T,Z6:()=>G,vI:()=>u,pc:()=>E,Sj:()=>X,Ji:()=>p}),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,s=o.find(e),i=o.content.slice();return-1==s?i.push(n||e,t):(i[s+1]=t,n&&(i[s]=n)),new r(i)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var o=this.remove(t),s=o.content.slice(),i=o.find(e);return s.splice(-1==i?s.length:i,0,t,n),new r(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};const o=r;function s(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let e=0;o.text[e]==i.text[e];e++)n++;return n}if(o.content.size||i.content.size){let e=s(o.content,i.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function i(e,t,n,r){for(let o=e.childCount,s=t.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:r};let a=e.child(--o),l=t.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){let e=i(a.content,l.content,n-1,r-1);if(e)return e}n-=c,r-=c}else n-=c,r-=c}}class a{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0;for(let s=0,i=0;i<t;s++){let a=this.content[s],l=i+a.nodeSize;if(l>e&&!1!==n(a,r+i,o||null,s)&&a.content.size){let o=i+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,r+o)}i=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",s=!0;return this.nodesBetween(e,t,((i,a)=>{let l=i.isText?i.text.slice(Math.max(e,a)-a,t-a):i.isLeaf?r?"function"===typeof r?r(i):r:i.type.spec.leafText?i.type.spec.leafText(i):"":"";i.isBlock&&(i.isLeaf&&l||i.isTextblock)&&n&&(s?s=!1:o+=n),o+=l}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new a(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,s=0;s<t;o++){let i=this.content[o],a=s+i.nodeSize;a>e&&((s<e||a>t)&&(i=i.isText?i.cut(Math.max(0,e-s),Math.min(i.text.length,t-s)):i.cut(Math.max(0,e-s-1),Math.min(i.content.size,t-s-1))),n.push(i),r+=i.nodeSize),s=a}return new a(n,r)}cutByIndex(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new a(r,o)}addToStart(e){return new a([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new a(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){return s(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return i(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return c(0,e);if(e==this.size)return c(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?c(n+1,o):c(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return a.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new a(t||e,n)}static from(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(e,t){return l.index=e,l.offset=t,l}function d(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!d(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class h{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return h.none;if(e instanceof h)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}h.none=[];class u extends Error{}class p{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=m(this.content,e+this.openStart,t);return n&&new p(n,this.openStart,this.openEnd)}removeBetween(e,t){return new p(f(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return p.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new p(a.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new p(e,n,r)}}function f(e,t,n){let{index:r,offset:o}=e.findIndex(t),s=e.maybeChild(r),{index:i,offset:a}=e.findIndex(n);if(o==t||s.isText){if(a!=n&&!e.child(i).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(f(s.content,t-o-1,n-o-1)))}function m(e,t,n,r){let{index:o,offset:s}=e.findIndex(t),i=e.maybeChild(o);if(s==t||i.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=m(i.content,t-s-1,n);return a&&e.replaceChild(o,i.copy(a))}function g(e,t,n){if(n.openStart>e.depth)throw new u("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new u("Inconsistent open depths");return y(e,t,n,0)}function y(e,t,n,r){let o=e.index(r),s=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let i=y(e,t,n,r+1);return s.copy(s.content.replaceChild(o,i))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:o,end:i}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let o=n-1;o>=0;o--)r=t.node(o).copy(a.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return S(s,O(e,o,i,t,r))}{let r=e.parent,o=r.content;return S(r,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return S(s,k(e,t,r))}function v(e,t){if(!t.type.compatibleContent(e.type))throw new u("Cannot join "+t.type.name+" onto "+e.type.name)}function b(e,t,n){let r=e.node(n);return v(r,t.node(n)),r}function w(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function x(e,t,n,r){let o=(t||e).node(n),s=0,i=t?t.index(n):o.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(w(e.nodeAfter,r),s++));for(let a=s;a<i;a++)w(o.child(a),r);t&&t.depth==n&&t.textOffset&&w(t.nodeBefore,r)}function S(e,t){return e.type.checkContent(t),e.copy(t)}function O(e,t,n,r,o){let s=e.depth>o&&b(e,t,o+1),i=r.depth>o&&b(n,r,o+1),l=[];return x(null,e,o,l),s&&i&&t.index(o)==n.index(o)?(v(s,i),w(S(s,O(e,t,n,r,o+1)),l)):(s&&w(S(s,k(e,t,o+1)),l),x(t,n,o,l),i&&w(S(i,k(n,r,o+1)),l)),x(r,null,o,l),new a(l)}function k(e,t,n){let r=[];if(x(null,e,n,r),e.depth>n){w(S(b(e,t,n+1),k(e,t,n+1)),r)}return x(t,null,n,r),new a(r)}p.empty=new p(a.empty,0,0);class E{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new T(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let s=e;;){let{index:e,offset:t}=s.content.findIndex(o),i=o-t;if(n.push(s,e,r+t),!i)break;if(s=s.child(e),s.isText)break;o=i-1,r+=t+1}return new E(t,n,o)}static resolveCached(e,t){let n=N.get(e);if(n)for(let o=0;o<n.elts.length;o++){let e=n.elts[o];if(e.pos==t)return e}else N.set(e,n=new C);let r=n.elts[n.i]=E.resolve(e,t);return n.i=(n.i+1)%M,r}}class C{constructor(){this.elts=[],this.i=0}}const M=12,N=new WeakMap;class T{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const A=Object.create(null);class I{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.none;this.type=e,this.attrs=t,this.marks=r,this.content=n||a.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&d(this.attrs,t||e.defaultAttrs||A)&&h.sameSet(this.marks,n||h.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new I(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new I(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return p.empty;let r=this.resolve(e),o=this.resolve(t),s=n?0:r.sharedDepth(t),i=r.start(s),a=r.node(s).content.cut(r.pos-i,o.pos-i);return new p(a,r.depth-s,o.depth-s)}replace(e,t,n){return g(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return E.resolveCached(this,e)}resolveNoCache(e){return E.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),_(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,s=this.contentMatchAt(e).matchFragment(n,r,o),i=s&&s.matchFragment(this.content,t);if(!i||!i.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),s=o&&o.matchFragment(this.content,t);return!!s&&s.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=h.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!h.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=a.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,r,n);return o.type.checkAttrs(o.attrs),o}}I.prototype.text=void 0;class R extends I{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new R(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new R(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function _(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class P{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new D(e,t);if(null==n.next)return P.empty;let r=L(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return n(K(e,0));function n(r){let o=[];r.forEach((t=>{e[t].forEach((t=>{let n,{term:r,to:s}=t;if(r){for(let e=0;e<o.length;e++)o[e][0]==r&&(n=o[e][1]);K(e,s).forEach((e=>{n||o.push([r,n=[]]),-1==n.indexOf(e)&&n.push(e)}))}}))}));let s=t[r.join(",")]=new P(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(V);s.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return s}}(function(e){let t=[[]];return o(s(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}function s(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(s(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let i=n();return r(t,i),o(s(e.expr,i),i),[r(i)]}if("plus"==e.type){let i=n();return o(s(e.expr,t),i),o(s(e.expr,i),i),[r(i)]}if("opt"==e.type)return[r(t)].concat(s(e.expr,t));if("range"==e.type){let i=t;for(let t=0;t<e.min;t++){let t=n();o(s(e.expr,i),t),i=t}if(-1==e.max)o(s(e.expr,i),i);else for(let t=e.min;t<e.max;t++){let t=n();r(i,t),o(s(e.expr,i),t),i=t}return[r(i)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let i=s(e.exprs[r],t);if(r==e.exprs.length-1)return i;o(i,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,s=[];for(let t=0;t<e.next.length;t++){let{type:n,next:i}=e.next[t];s.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(i)&&r.push(i)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function o(s,i){let l=s.matchFragment(e,n);if(l&&(!t||l.validEnd))return a.from(i.map((e=>e.createAndFill())));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,i.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:s,next:i}=o.next[e];s.isLeaf||s.hasRequiredAttrs()||s.name in t||r.type&&!i.validEnd||(n.push({match:s.contentMatch,type:s,via:r}),t[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}P.empty=new P(!0);class D{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function L(e){let t=[];do{t.push(z(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function z(e){let t=[];do{t.push(j(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function j(e){let t=function(e){if(e.eat("(")){let t=L(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let s in n){let e=n[s];e.isInGroup(t)&&o.push(e)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=B(e,t)}return t}function F(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function B(e,t){let n=F(e),r=n;return e.eat(",")&&(r="}"!=e.next?F(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function V(e,t){return t-e}function K(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let e=0;e<o.length;e++){let{term:r,to:s}=o[e];r||-1!=n.indexOf(s)||t(s)}}(t),n.sort(V)}function $(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function W(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function H(e,t,n,r){for(let o in t)if(!(o in e))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in e){let n=e[o];n.validate&&n.validate(t[o])}}function U(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new J(e,r,t[r]);return n}class G{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=U(e,n.attrs),this.defaultAttrs=$(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==P.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:W(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(e),a.from(t),h.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=a.from(t),this.checkContent(t),new I(this,this.computeAttrs(e),t,h.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=a.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(a.empty,!0);return o?new I(this,e,t.append(o),h.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){H(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,r)=>n[e]=new G(e,t,r)));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class J{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let o=null===n?"null":typeof n;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${o}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class q{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=U(e,r.attrs),this.excluded=null;let o=$(this.attrs);this.instance=o?new h(this,o):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new h(this,W(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,o)=>n[e]=new q(e,r++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){H(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class X{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=o.from(e.nodes),t.marks=o.from(e.marks||{}),this.nodes=G.compile(this.spec.nodes,this),this.marks=q.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",o=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=P.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==o?null:o?Y(this,o.split(" ")):""!=o&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:Y(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof G))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new R(n,n.defaultAttrs,e,h.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return I.fromJSON(this,e)}markFromJSON(e){return h.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Y(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],s=e.marks[o],i=s;if(s)n.push(s);else for(let t in e.marks){let r=e.marks[t];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=r)}if(!i)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class Z{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach((e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new oe(this,t,!1);return n.addAll(e,h.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new oe(this,t,!0);return n.addAll(e,h.none,t.from,t.to),p.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(se(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],s=r.style;if(!(0!=s.indexOf(e)||r.context&&!n.matchesContext(r.context)||s.length>e.length&&(61!=s.charCodeAt(e.length)||s.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ie(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ie(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Z(e,Z.schemaRules(e)))}}const Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},te={ol:!0,ul:!0};function ne(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class re{constructor(e,t,n,r,o,s){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=s,this.content=[],this.activeMarks=h.none,this.match=o||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(a.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=a.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Q.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class oe{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,o=t.topNode,s=ne(null,t.preserveWhitespace,0)|(n?4:0);r=o?new re(o.type,o.attrs,h.none,!0,t.topMatch||o.type.contentMatch,s):new re(n?null:e.schema.topNodeType,null,h.none,!0,null,s),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,o=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===o||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o)n="full"!==o?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],o=e.previousSibling;(!t||o&&"BR"==o.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s,i=e.nodeName.toLowerCase();te.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&te.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));e:if(a?a.ignore:ee.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(Q.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),n=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(o),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?s:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let e=this.parser.matchedStyles[r],o=n.getPropertyValue(e);if(o)for(let n;;){let r=this.parser.matchStyle(e,o,this,n);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter((e=>!r.clearMark(e))):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return t}addElementByRule(e,t,n,r){let o,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(s,t.attrs||null,n,t.preserveWhitespace);e&&(o=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let i=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e,n)));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}o&&this.sync(i)&&this.open--}addAll(e,t,n,r){let o=n||0;for(let s=n?e.childNodes[n]:e.firstChild,i=null==r?null:e.childNodes[r];s!=i;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,t);this.findAtPoint(e,o)}findPlace(e,t){let n,r;for(let o=this.open;o>=0;o--){let t=this.nodes[o],s=t.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,r=t,!s.length))break;if(t.solid)break}if(!n)return null;this.sync(r);for(let o=0;o<n.length;o++)t=this.enterInner(n[o],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=h.none;for(let o of n.concat(e.marks))(t.type?t.type.allowsMarkType(o.type):ae(o.type,e.type))&&(r=o.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let o=this.findPlace(e.create(t),n);return o&&(o=this.enterInner(e,t,n,!0,r)),o}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let i=ne(e,o,s.options);4&s.options&&0==s.content.length&&(i|=4);let a=h.none;return n=n.filter((t=>!(s.type?s.type.allowsMarkType(t.type):ae(t.type,e))||(a=t.addToSet(a),!1))),this.nodes.push(new re(e,t,a,r,null,i)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),s=(e,i)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;i>=o;i--)if(s(e-1,i))return!0;return!1}{let e=i>0||0==i&&r?this.nodes[i].type:n&&i>=o?n.node(i-o).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;i--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function se(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ie(e){let t={};for(let n in e)t[n]=e[n];return t}function ae(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let s=[],i=e=>{s.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(s.indexOf(o)<0&&i(o))return!0}};if(i(o.contentMatch))return!0}}class le{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=de(t).createDocumentFragment());let r=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,s=0;for(;n<o.length&&s<e.marks.length;){let t=e.marks[s];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,s++}else s++}for(;n<o.length;)r=o.pop()[1];for(;s<e.marks.length;){let n=e.marks[s++],i=this.serializeMark(n,e.isInline,t);i&&(o.push([n,r]),r.appendChild(i.dom),r=i.contentDOM||i.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=pe(de(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&pe(de(n),r(e,t),null,e.attrs)}static renderSpec(e,t){return pe(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new le(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ce(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return ce(e.marks)}}function ce(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function de(e){return e.document||window.document}const he=new WeakMap;function ue(e){let t=he.get(e);return void 0===t&&he.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function pe(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let o,s=t[0];if("string"!=typeof s)throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=ue(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i,a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let l=n?e.createElementNS(n,s):e.createElement(s),c=t[1],d=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){d=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let h=d;h<t.length;h++){let o=t[h];if(0===o){if(h<t.length-1||h>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:s}=pe(e,o,n,r);if(l.appendChild(t),s){if(i)throw new RangeError("Multiple content holes");i=s}}}return{dom:l,contentDOM:i}}},27908:(e,t,n)=>{"use strict";n.d(t,{$t:()=>O,LN:()=>i,U3:()=>d,hs:()=>N,i5:()=>f,k_:()=>E,nh:()=>u,yn:()=>a});var r=n(94644),o=n(82711);const s=Object.create(null);class i{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new a(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Ji.empty,n=t.content.lastChild,o=null;for(let r=0;r<t.openEnd;r++)o=n,n=n.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],d=e.mapping.slice(s);e.replaceRange(d.map(l.pos),d.map(c.pos),a?r.Ji.empty:t),0==a&&y(e,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:i}=r[o],a=e.mapping.slice(n),l=a.map(s.pos),c=a.map(i.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),y(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new d(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let r=t<0?g(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):g(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new f(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new f(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new f(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=s[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in s)throw new RangeError("Duplicate use of selection JSON ID "+e);return s[e]=t,t.prototype.jsonID=e,t}getBookmark(){return d.between(this.$anchor,this.$head).getBookmark()}}i.prototype.visible=!0;class a{constructor(e,t){this.$from=e,this.$to=t}}let l=!1;function c(e){l||e.parent.inlineContent||(l=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class d extends i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return i.near(n);let r=e.resolve(t.map(this.anchor));return new d(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Ji.empty;if(super.replace(e,t),t==r.Ji.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof d&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new d(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=i.findFrom(t,n,!0)||i.findFrom(t,-n,!0);if(!e)return i.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(i.findFrom(e,-n,!0)||i.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new d(e,t)}}i.jsonID("text",d);class h{constructor(e,t){this.anchor=e,this.head=t}map(e){return new h(e.map(this.anchor),e.map(this.head))}resolve(e){return d.between(e.resolve(this.anchor),e.resolve(this.head))}}class u extends i{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?i.near(o):new u(o)}content(){return new r.Ji(r.FK.from(this.node),0,0)}eq(e){return e instanceof u&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new p(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new u(e.resolve(t.anchor))}static create(e,t){return new u(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}u.prototype.visible=!1,i.jsonID("node",u);class p{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new h(n,n):new p(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&u.isSelectable(n)?new u(t):i.near(t)}}class f extends i{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Ji.empty;if(t==r.Ji.empty){e.delete(0,e.doc.content.size);let t=i.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new f(e)}map(e){return new f(e)}eq(e){return e instanceof f}getBookmark(){return m}}i.jsonID("all",f);const m={map(){return this},resolve:e=>new f(e)};function g(e,t,n,r,o){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return d.create(e,n);for(let i=r-(o>0?0:1);o>0?i<t.childCount:i>=0;i+=o){let r=t.child(i);if(r.isAtom){if(!s&&u.isSelectable(r))return u.create(e,n-(o<0?r.nodeSize:0))}else{let t=g(e,r,n+o,o<0?r.childCount:0,o,s);if(t)return t}n+=r.nodeSize*o}return null}function y(e,t,n){let r=e.steps.length-1;if(r<t)return;let s,a=e.steps[r];(a instanceof o.Ln||a instanceof o.Wg)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==s&&(s=r)})),e.setSelection(i.near(e.doc.resolve(s),n)))}class v extends o.dL{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return r.CU.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.CU.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(i.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function b(e,t){return t&&e?e.bind(t):e}class w{constructor(e,t,n){this.name=e,this.init=b(t.init,n),this.apply=b(t.apply,n)}}const x=[new w("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new w("selection",{init:(e,t)=>e.selection||i.atStart(t.doc),apply:e=>e.selection}),new w("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new w("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class S{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=x.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new w(e.key,e.spec.state,e))}))}}class O{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let i=this.config.plugins[s];if(i.spec.appendTransaction){let a=r?r[s].n:0,l=r?r[s].state:this,c=a<t.length&&i.spec.appendTransaction.call(i,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,s)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<s?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[s]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new O(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new v(this)}static create(e){let t=new S(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new O(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new S(this.schema,e.plugins),n=t.fields,r=new O(t);for(let o=0;o<n.length;o++){let t=n[o].name;r[t]=this.hasOwnProperty(t)?this[t]:n[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new S(e.schema,e.plugins),s=new O(o);return o.fields.forEach((o=>{if("doc"==o.name)s.doc=r.bP.fromJSON(e.schema,t.doc);else if("selection"==o.name)s.selection=i.fromJSON(s.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(s.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let r in n){let i=n[r],a=i.spec.state;if(i.key==o.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,r))return void(s[o.name]=a.fromJSON.call(i,e,t[r],s))}s[o.name]=o.init(e,s)}})),s}}function k(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=k(o,t,{})),n[r]=o}return n}class E{constructor(e){this.spec=e,this.props={},e.props&&k(e.props,this,this.props),this.key=e.key?e.key.key:M("plugin")}getState(e){return e[this.key]}}const C=Object.create(null);function M(e){return e in C?e+"$"+ ++C[e]:(C[e]=0,e+"$")}class N{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=M(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},10278:(e,t,n)=>{"use strict";n.d(t,{$n:()=>ee,B4:()=>Q,Gb:()=>_,Hr:()=>Z,Wx:()=>te,ZA:()=>ne});var r=n(27908),o=n(3904),s=n(69811),i=n(8999),a=n(14736),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,f=e=>{throw TypeError(e)},m=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))u.call(t,n)&&m(e,n,t[n]);if(h)for(var n of h(t))p.call(t,n)&&m(e,n,t[n]);return e},y=(e,t,n)=>m(e,"symbol"!==typeof t?t+"":t,n),v=(e,t,n)=>t.has(e)||f("Cannot "+n),b=(e,t,n)=>(v(e,t,"read from private field"),n?n.call(e):t.get(e)),w=(e,t,n)=>t.has(e)?f("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),x=(e,t,n,r)=>(v(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var S=["jump-backward-exit","jump-forward-exit"],O=["jump-backward-change","jump-forward-change"];function k(e){return!!(e&&e.query.full.length>=e.suggester.matchOffset)}function E(e){return(0,s.Gv)(e)&&e instanceof r.U3}function C(e){const{match:t,changeReason:n,exitReason:r}=e;return o=g({},t),c(o,d({changeReason:n,exitReason:r}));var o}function M(e){const{text:t,regexp:n,$pos:r,suggester:o}=e,i=r.start();let l;return(0,s.Np)(t,n).forEach((e=>{if(function(e,t){const{invalidPrefixCharacters:n,validPrefixCharacters:r}=t;if(n)return!new RegExp(z(n)).test(e);return new RegExp(z(r)).test(e)}(e.input.slice(Math.max(0,e.index-1),e.index),o)){const t=e.index+i,n=e[0],c=e[1];if(!(0,s.Kg)(n)||!(0,s.Kg)(c))return;const d=t+n.length,h=Math.min(d,r.pos),u=h-t;t<r.pos&&d>=r.pos&&(l={range:{from:t,to:d,cursor:h},match:e,query:{partial:n.slice(c.length,u),full:n.slice(c.length)},text:{partial:n.slice(0,u),full:n},textAfter:r.doc.textBetween(d,r.end(),a.yE,a.yE),textBefore:r.doc.textBetween(i,t,a.yE,a.yE),suggester:o})}})),l}function N(e){const{$pos:t,suggester:n}=e,{char:r,name:o,startOfLine:l,supportedCharacters:c,matchOffset:d,multiline:h,caseInsensitive:u,unicode:p}=n,f=function(e){const{char:t,matchOffset:n,startOfLine:r,supportedCharacters:o,captureChar:a=!0,caseInsensitive:l=!1,multiline:c=!1,unicode:d=!1}=e,h="g".concat(c?"m":"").concat(l?"i":"").concat(d?"u":"");let u=function(e){return(0,s.Kg)(e)?new RegExp(i(e)):e}(t).source;a&&(u="(".concat(u,")"));return new RegExp("".concat((p=r,p?"^":"")).concat(u).concat(function(e,t){return"(?:".concat(z(e),"){").concat(t,",}")}(o,n)),h);var p}({char:r,matchOffset:d,startOfLine:l,supportedCharacters:c,multiline:h,caseInsensitive:u,unicode:p});return M({suggester:n,text:t.doc.textBetween(t.before(),t.end(),a.yE,a.yE),regexp:f,$pos:t,char:r,name:o})}function T(e){const{state:t,match:n}=e;try{return N({$pos:t.doc.resolve(n.range.cursor),suggester:n.suggester})}catch(r){return}}function A(e){const{prev:t,next:n,state:r}=e;return!n&&t.range.from>=r.doc.nodeSize?{exit:C({match:t,exitReason:"delete"})}:n&&t.query.partial?t.range.to===n.range.cursor?{exit:C({match:n,exitReason:"exit-end"})}:t.query.partial?{exit:C({match:n,exitReason:"exit-split"})}:{}:{exit:C({match:t,exitReason:"invalid-exit-split"})}}function I(e){const{prev:t,next:n,state:r,$pos:o}=e,i=(0,s.Ik)();if(!t&&!n)return i;const a={prev:t,next:n};return function(e){return!(!e.prev||!e.next||e.prev.range.from===e.next.range.from)}(a)?function(e){const{prev:t,next:n,state:r}=e,o=(0,s.Ik)(),i=T({state:r,match:t}),{exit:a}=i&&i.query.full!==t.query.full?A({prev:t,next:i,state:r}):o;return t.range.from<n.range.from?{exit:null!=a?a:C({match:t,exitReason:"jump-forward-exit"}),change:C({match:n,changeReason:"jump-forward-change"})}:{exit:null!=a?a:C({match:t,exitReason:"jump-backward-exit"}),change:C({match:n,changeReason:"jump-backward-change"})}}({prev:a.prev,next:a.next,state:r}):function(e){return!(e.prev||!e.next)}(a)?{change:C({match:a.next,changeReason:"start"})}:function(e){return!(!e.prev||e.next)}(a)?function(e){const{match:t,state:n,$pos:r}=e,{selection:o}=n,s=T({match:t,state:n});return s&&s.text.full===t.text.full?!o.empty&&(o.from<=t.range.from||o.to>=t.range.to)?{exit:C({match:t,exitReason:"selection-outside"})}:r.pos>t.range.to?{exit:C({match:t,exitReason:"move-end"})}:r.pos<=t.range.from?{exit:C({match:t,exitReason:"move-start"})}:{}:A({prev:t,next:s,state:n})}({$pos:o,match:a.prev,state:r}):function(e){return!(!e.prev||!e.next||e.prev.text.full===e.next.text.full)}(a)?{change:C({match:a.next,changeReason:"change-character"})}:function(e){return!(!e.prev||!e.next||e.prev.range.cursor===e.next.range.cursor)}(a)?{change:C({match:a.next,changeReason:r.selection.empty?"move":"selection-inside"})}:i}function R(e,t){for(let n=e.depth;n>0;n--){const r=e.node(n);if(t.includes(r.type.name))return!0}return!1}function _(e,t){const{$from:n,$to:r}=e;return!!P(e,t)||(0,s.y1)(n.pos,r.pos).some((e=>function(e,t){const n=new Set(e.marks().map((e=>e.type.name)));return t.some((e=>n.has(e)))}(n.doc.resolve(e),t)))}function P(e,t){var n;const{$from:r,$to:o}=e,s=new Set((null!=(n=r.marksAcross(o))?n:[]).map((e=>e.type.name)));return t.some((e=>s.has(e)))}function D(e,t){const{$cursor:n}=t,{validMarks:r,validNodes:o,invalidMarks:i,invalidNodes:a}=e;return!(r||o||!(0,s.VP)(i)||!(0,s.VP)(a))||!(r&&!P(t,r))&&(!(o&&!R(n,o))&&(!(!r&&_(t,i))&&!(!o&&R(n,a))))}function L(e){const{suggesters:t,$pos:n,selectionEmpty:r}=e;for(const s of t)if(!s.emptySelectionsOnly||r)try{const e=N({suggester:s,$pos:n});if(!e)continue;const t={$from:n.doc.resolve(e.range.from),$to:n.doc.resolve(e.range.to),$cursor:n};if(D(s,t)&&s.isValidPosition(t,e))return e}catch(o){}}function z(e){return(0,s.gd)(e)?e.source:e}var j,F,B,V,K,$,W,H,U,G={appendTransaction:!1,priority:50,ignoredTag:"span",matchOffset:0,disableDecorations:!1,startOfLine:!1,suggestClassName:"suggest",suggestTag:"span",supportedCharacters:/\w+/,validPrefixCharacters:/^[\s\0]?$/,invalidPrefixCharacters:null,ignoredClassName:null,invalidMarks:[],invalidNodes:[],validMarks:null,validNodes:null,isValidPosition:()=>!0,checkNextValidSelection:null,emptySelectionsOnly:!1,caseInsensitive:!1,multiline:!1,unicode:!1,captureChar:!0},J="__ignore_prosemirror_suggest_update__";j=new WeakMap,F=new WeakMap,B=new WeakMap,V=new WeakMap,K=new WeakMap,$=new WeakMap,W=new WeakMap,H=new WeakMap,U=new WeakMap;var q=class e{constructor(e){w(this,j,!1),w(this,F,!1),w(this,B),w(this,V),w(this,K),w(this,$,(0,s.Ik)()),y(this,"view"),w(this,W,o.zF.empty),w(this,H,!1),w(this,U,!1),y(this,"setMarkRemoved",(()=>{x(this,H,!0)})),y(this,"findNextTextSelection",(e=>{const t=e.$from.doc,n=Math.min(t.nodeSize-2,e.to+1),o=t.resolve(n),s=r.LN.findFrom(o,1,!0);if(E(s))return s})),y(this,"ignoreNextExit",(()=>{x(this,F,!0)})),y(this,"addIgnored",(e=>{let{from:t,name:n,specific:r=!1}=e;const i=b(this,B).find((e=>e.name===n));if(!i)throw new Error("No suggester exists for the name provided: ".concat(n));const a=t+((0,s.Kg)(i.char)?i.char.length:1),l=i.ignoredClassName?{class:i.ignoredClassName}:{},c=o.NZ.inline(t,a,g({nodeName:i.ignoredTag},l),{name:n,specific:r,char:i.char});x(this,W,b(this,W).add(this.view.state.doc,[c]))})),y(this,"removeIgnored",(e=>{let{from:t,name:n}=e;const r=b(this,B).find((e=>e.name===n));if(!r)throw new Error("No suggester exists for the name provided: ".concat(n));const o=(0,s.Kg)(r.char)?r.char.length:1,i=b(this,W).find(t,t+o)[0];i&&i.spec.name===n&&x(this,W,b(this,W).remove([i]))})),y(this,"clearIgnored",(e=>{if(!e)return void x(this,W,o.zF.empty);const t=b(this,W).find().filter((t=>{let{spec:n}=t;return n.name===e}));x(this,W,b(this,W).remove(t))})),y(this,"findMatchAtPosition",((e,t)=>L({suggesters:t?b(this,B).filter((e=>e.name===t)):b(this,B),$pos:e,docChanged:!1,selectionEmpty:!0}))),y(this,"setLastChangeFromAppend",(()=>{x(this,U,!0)}));const t=X();x(this,B,e.map(t)),x(this,B,(0,s.di)(b(this,B),((e,t)=>t.priority-e.priority)))}static create(t){return new e(t)}get decorationSet(){return b(this,W)}get removed(){return b(this,H)}get match(){return b(this,V)?b(this,V):b(this,K)&&b(this,$).exit?b(this,K):void 0}init(e){return this.view=e,this}createProps(e){const{name:t,char:n}=e.suggester;return g({view:this.view,addIgnored:this.addIgnored,clearIgnored:this.clearIgnored,ignoreNextExit:this.ignoreNextExit,setMarkRemoved:this.setMarkRemoved,name:t,char:n},e)}shouldRunExit(){return!b(this,F)||(x(this,F,!1),!1)}updateWithNextSelection(e){var t,n,r;const o=this.findNextTextSelection(e.selection);if(o)for(const s of b(this,B)){const i=null==(t=b(this,$).change)?void 0:t.suggester.name,a=null==(n=b(this,$).exit)?void 0:n.suggester.name;null==(r=s.checkNextValidSelection)||r.call(s,o.$from,e,{change:i,exit:a})}}changeHandler(e,t){const{change:n,exit:r}=b(this,$),o=this.match;if(!n&&!r||!k(o))return;const i=t===(null==r?void 0:r.suggester.appendTransaction)&&this.shouldRunExit(),a=t===(null==n?void 0:n.suggester.appendTransaction);if(i||a){if(n&&r&&function(e){var t,n;return(0,s.mK)(S,null==(t=e.exit)?void 0:t.exitReason)||(0,s.mK)(O,null==(n=e.change)?void 0:n.changeReason)}({change:n,exit:r})){const t=this.createProps(r),o=this.createProps(n);r.range.from,n.range.from;return i&&r.suggester.onChange(t,e),a&&n.suggester.onChange(o,e),void(i&&x(this,H,!1))}n&&a&&n.suggester.onChange(this.createProps(n),e),r&&i&&(r.suggester.onChange(this.createProps(r),e),x(this,H,!1),"invalid-exit-split"===r.exitReason&&x(this,$,(0,s.Ik)()))}}mapIgnoredDecorations(e){const t=b(this,W).map(e.mapping,e.doc),n=t.find().filter((e=>{let{from:t,to:n,spec:r}=e;return n-t!==((0,s.Kg)(r.char)?r.char.length:1)}));x(this,W,t.remove(n))}shouldIgnoreMatch(e){let{range:t,suggester:{name:n}}=e;return b(this,W).find().some((e=>{let{spec:r,from:o}=e;return o===t.from&&(!r.specific||r.name===n)}))}resetState(){x(this,$,(0,s.Ik)()),x(this,V,void 0),x(this,H,!1),x(this,U,!1)}updateReasons(e){const{$pos:t,state:n}=e,r=b(this,j),o=b(this,B),s=n.selection.empty,i=E(n.selection)?L({suggesters:o,$pos:t,docChanged:r,selectionEmpty:s}):void 0;x(this,V,i&&this.shouldIgnoreMatch(i)?void 0:i),x(this,$,I({next:b(this,V),prev:b(this,K),state:n,$pos:t}))}addSuggester(e){const t=b(this,B).find((t=>t.name===e.name)),n=X();if(t)x(this,B,b(this,B).map((r=>r===t?n(e):r)));else{const t=[...b(this,B),n(e)];x(this,B,(0,s.di)(t,((e,t)=>t.priority-e.priority)))}return()=>this.removeSuggester(e.name)}removeSuggester(e){const t=(0,s.Kg)(e)?e:e.name;x(this,B,b(this,B).filter((e=>e.name!==t))),this.clearIgnored(t)}toJSON(){return this.match}apply(e){const{exit:t,change:n}=b(this,$);if(b(this,U)&&(x(this,U,!1),!(null==t?void 0:t.suggester.appendTransaction)&&!(null==n?void 0:n.suggester.appendTransaction)))return this;const{tr:r,state:o}=e,s=r.docChanged||r.selectionSet;return r.getMeta(J)||!s&&!b(this,H)||(x(this,j,r.docChanged),this.mapIgnoredDecorations(r),t&&this.resetState(),x(this,K,b(this,V)),this.updateReasons({$pos:r.selection.$from,state:o})),this}createDecorations(e){const t=this.match;if(!k(t))return b(this,W);const{disableDecorations:n}=t.suggester;if((0,s.Tn)(n)?n(e,t):n)return b(this,W);const{range:r,suggester:i}=t,{name:a,suggestTag:l,suggestClassName:c}=i,{from:d,to:h}=r;return this.shouldIgnoreMatch(t)?b(this,W):b(this,W).add(e.doc,[o.NZ.inline(d,h,{nodeName:l,class:a?"".concat(c," suggest-").concat(a):c},{name:a})])}};function X(){const e=new Set;return t=>{if(e.has(t.name))throw new Error("A suggester already exists with the name '".concat(t.name,"'. The name provided must be unique."));const n=g(g({},G),t);return e.add(t.name),n}}var Y=new r.hs("suggest");function Z(e){return Y.getState(e)}function Q(e,t){return Z(e).addSuggester(t)}function ee(e){e.setMeta(J,!0)}function te(e,t){return Z(e).removeSuggester(t)}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=q.create(t);return new r.k_({key:Y,view:e=>(o.init(e),{update:e=>o.changeHandler(e.state.tr,!1)}),state:{init:()=>o,apply:(e,t,n,r)=>o.apply({tr:e,state:r})},appendTransaction:(e,t,n)=>{const r=n.tr;return o.updateWithNextSelection(r),o.changeHandler(r,!0),r.docChanged||r.steps.length>0||r.selectionSet||r.storedMarksSet?(o.setLastChangeFromAppend(),r):null},props:{decorations:e=>o.createDecorations(e)}})}},82711:(e,t,n)=>{"use strict";n.d(t,{$L:()=>I,Ln:()=>y,Um:()=>A,Wg:()=>v,X9:()=>l,dL:()=>W,jP:()=>S,n9:()=>N,oM:()=>O,zy:()=>M});var r=n(94644);const o=Math.pow(2,16);function s(e){return 65535&e}class i{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&a.empty)return a.empty}recover(e){let t=0,n=s(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/o}(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,s=this.inverted?2:1,a=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>e)break;let d=this.ranges[l+s],h=this.ranges[l+a],u=c+d;if(e<=u){let s=c+r+((d?e==c?-1:e==u?1:t:t)<0?0:h);if(n)return s;let a=e==(t<0?c:u)?null:l/3+(e-c)*o,p=e==c?2:e==u?1:4;return(t<0?e!=c:e!=u)&&(p|=8),new i(s,p,a)}r+=h-d}return n?e+r:new i(e+r,0,null)}touches(e,t){let n=0,r=s(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+o];if(e<=t+a&&s==3*r)return!0;n+=this.ranges[s+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],i=s-(this.inverted?o:0),a=s+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(i,i+l,a,a+c),o+=c-l}}invert(){return new a(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])}}a.empty=new a([]);class l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new l(this.maps,this.mirror,e,t)}copy(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new l;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let n=this.maps[o].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(o);if(null!=t&&t>o&&t<this.to){o=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new i(e,r,null)}}const c=Object.create(null);class d{getMap(){return a.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=c[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in c)throw new RangeError("Duplicate use of step JSON ID "+e);return c[e]=t,t.prototype.jsonID=e,t}}class h{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new h(e,null)}static fail(e){return new h(null,e)}static fromReplace(e,t,n,o){try{return h.ok(e.replace(t,n,o))}catch(s){if(s instanceof r.vI)return h.fail(s.message);throw s}}}function u(e,t,n){let o=[];for(let r=0;r<e.childCount;r++){let s=e.child(r);s.content.size&&(s=s.copy(u(s.content,t,s))),s.isInline&&(s=t(s,n,r)),o.push(s)}return r.FK.fromArray(o)}class p extends d{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),s=new r.Ji(u(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),o),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,s)}invert(){return new f(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new p(t.pos,n.pos,this.mark)}merge(e){return e instanceof p&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new p(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new p(t.from,t.to,e.markFromJSON(t.mark))}}d.jsonID("addMark",p);class f extends d{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new r.Ji(u(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,n)}invert(){return new p(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new f(t.pos,n.pos,this.mark)}merge(e){return e instanceof f&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new f(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new f(t.from,t.to,e.markFromJSON(t.mark))}}d.jsonID("removeMark",f);class m extends d{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new m(this.pos,t.marks[n]);return new m(this.pos,this.mark)}}return new g(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new m(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new m(t.pos,e.markFromJSON(t.mark))}}d.jsonID("addNodeMark",m);class g extends d{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new m(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new g(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new g(t.pos,e.markFromJSON(t.mark))}}d.jsonID("removeNodeMark",g);class y extends d{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&b(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new a([this.from,this.to-this.from,this.slice.size])}invert(e){return new y(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new y(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof y)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?r.Ji.empty:new r.Ji(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new y(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?r.Ji.empty:new r.Ji(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new y(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new y(t.from,t.to,r.Ji.fromJSON(e,t.slice),!!t.structure)}}d.jsonID("replace",y);class v extends d{constructor(e,t,n,r,o,s){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=i}apply(e){if(this.structure&&(b(e,this.from,this.gapFrom)||b(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")}getMap(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new v(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new v(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new v(t.from,t.to,t.gapFrom,t.gapTo,r.Ji.fromJSON(e,t.slice),t.insert,!!t.structure)}}function b(e,t,n){let r=e.resolve(t),o=n-t,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let e=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function w(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.doc.nodeAt(t),a=[],l=t+1;for(let c=0;c<i.childCount;c++){let t=i.child(c),d=l+t.nodeSize,h=o.matchType(t.type);if(h){o=h;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new f(l,d,t.marks[r]));if(s&&t.isText&&"pre"!=n.whitespace){let e,o,s=/\r?\n|\r/g;for(;e=s.exec(t.text);)o||(o=new r.Ji(r.FK.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),a.push(new y(l+e.index,l+e.index+e[0].length,o))}}else a.push(new y(l,d,r.Ji.empty));l=d}if(!o.validEnd){let t=o.fillBefore(r.FK.empty,!0);e.replace(l,l,new r.Ji(t,0,0))}for(let r=a.length-1;r>=0;r--)e.step(a[r])}function x(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function S(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),s=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,s,t))return n;if(0==n||r.type.spec.isolating||!x(r,o,s))break}return null}function O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let i=s.length?s[0]:t;return n.canReplaceWith(r,o,i)?s:null}(e,t),s=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,s=n.child(r),i=t.contentMatch.findWrapping(s.type);if(!i)return null;let a=(i.length?i[i.length-1]:t).contentMatch;for(let l=r;a&&l<o;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?i:null}(r,t);return s?o.map(k).concat({type:t,attrs:n}).concat(s.map(k)):null}function k(e){return{type:e,attrs:null}}function E(e,t,n,r){t.forEach(((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let o=e.mapping.slice(r).map(n+1+s+i.index);e.replaceWith(o,o+1,t.type.schema.linebreakReplacement.create())}}}))}function C(e,t,n,r){t.forEach(((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text("\n"))}}))}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>s;c--,d--){let e=o.node(c),t=o.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),s=r&&r[d+1];s&&(n=n.replaceChild(0,s.type.create(s.attrs)));let i=r&&r[d]||e;if(!e.canReplace(t+1,e.childCount)||!i.type.validContent(n))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function N(e,t){let n=e.resolve(t),r=n.index();return T(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function T(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let o=0;o<t.childCount;o++){let s=t.child(o),i=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n)return!1;if(!e.type.allowsMarks(s.marks))return!1}return n.validEnd}(e,t))}function A(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),i=r.node(e),a=!1;if(1==s)a=i.canReplace(n,n,o);else{let e=i.contentMatchAt(n).findWrapping(o.firstChild.type);a=e&&i.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function I(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.Ji.empty;if(t==n&&!o.size)return null;let s=e.resolve(t),i=e.resolve(n);return R(s,i,o)?new y(t,n,o):new _(s,i,o).fit()}function R(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}d.jsonID("replaceAround",v);class _{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=r.FK.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let o=e.depth;o>0;o--)this.placed=r.FK.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;let s=this.placed,i=n.depth,a=o.depth;for(;i&&a&&1==s.childCount;)s=s.firstChild.content,i--,a--;let l=new r.Ji(s,i,a);return e>-1?new v(n.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||n.pos!=this.$to.pos?new y(n.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,o=null;n?(o=L(this.unplaced.content,n-1).firstChild,e=o.content):e=this.unplaced.content;let s=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:a,match:l}=this.frontier[i],c=null;if(1==t&&(s?l.matchType(s.type)||(c=l.fillBefore(r.FK.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:i,parent:o,inject:c};if(2==t&&s&&(e=l.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:i,parent:o,wrap:e};if(o&&l.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=L(e,t);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new r.Ji(e,t+1,Math.max(n,o.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=L(e,t);if(o.childCount<=1&&t>0){let s=e.size-t<=t+o.size;this.unplaced=new r.Ji(P(e,t-1,1),t-1,s?t-1:n)}else this.unplaced=new r.Ji(P(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:o,inject:s,wrap:i}=e;for(;this.depth>n;)this.closeFrontierNode();if(i)for(let r=0;r<i.length;r++)this.openFrontierNode(i[r]);let a=this.unplaced,l=o?o.content:a.content,c=a.openStart-t,d=0,h=[],{match:u,type:p}=this.frontier[n];if(s){for(let e=0;e<s.childCount;e++)h.push(s.child(e));u=u.matchFragment(s)}let f=l.size+t-(a.content.size-a.openEnd);for(;d<l.childCount;){let e=l.child(d),t=u.matchType(e.type);if(!t)break;d++,(d>1||0==c||e.content.size)&&(u=t,h.push(z(e.mark(p.allowedMarks(e.marks)),1==d?c:0,d==l.childCount?f:-1)))}let m=d==l.childCount;m||(f=-1),this.placed=D(this.placed,n,r.FK.from(h)),this.frontier[n].match=u,m&&f<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let r=0,g=l;r<f;r++){let e=g.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),g=e.content}this.unplaced=m?0==t?r.Ji.empty:new r.Ji(P(a.content,t-1,1),t-1,f<0?a.openEnd:t-1):new r.Ji(P(a.content,t,d),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!j(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=j(e,t,r,n,o);if(s){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=j(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=D(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=D(this.placed,this.depth,r.FK.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(r.FK.empty,!0);e.childCount&&(this.placed=D(this.placed,this.frontier.length,e))}}function P(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(P(e.firstChild.content,t-1,n)))}function D(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(D(e.lastChild.content,t-1,n)))}function L(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function z(e,t,n){if(t<=0)return e;let o=e.content;return t>1&&(o=o.replaceChild(0,z(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.FK.empty,!0)))),e.copy(o)}function j(e,t,n,r,o){let s=e.node(t),i=o?e.indexAfter(t):e.index(t);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,s.content,i)?a:null}function F(e,t,n,o,s){if(t<n){let r=e.firstChild;e=e.replaceChild(0,r.copy(F(r.content,t+1,n,o,r)))}if(t>o){let t=s.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(r.FK.empty,!0))}return e}function B(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class V extends d{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at attribute step's position");let n=Object.create(null);for(let r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return h.fromReplace(e,this.pos,this.pos+1,new r.Ji(r.FK.from(o),0,t.isLeaf?0:1))}getMap(){return a.empty}invert(e){return new V(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new V(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new V(t.pos,t.attr,t.value)}}d.jsonID("attr",V);class K extends d{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return h.ok(n)}getMap(){return a.empty}invert(e){return new K(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new K(t.attr,t.value)}}d.jsonID("docAttr",K);let $=class extends Error{};$=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},($.prototype=Object.create(Error.prototype)).constructor=$,$.prototype.name="TransformError";class W{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new l}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new $(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Ji.empty,o=I(this.doc,e,t,n);return o&&this.step(o),this}replaceWith(e,t,n){return this.replace(e,t,new r.Ji(r.FK.from(n),0,0))}delete(e,t){return this.replace(e,t,r.Ji.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,o){if(!o.size)return e.deleteRange(t,n);let s=e.doc.resolve(t),i=e.doc.resolve(n);if(R(s,i,o))return e.step(new y(t,n,o));let a=B(s,e.doc.resolve(n));0==a[a.length-1]&&a.pop();let l=-(s.depth+1);a.unshift(l);for(let r=s.depth,f=s.pos-1;r>0;r--,f--){let e=s.node(r).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;a.indexOf(r)>-1?l=r:s.before(r)==f&&a.splice(1,0,-r)}let c=a.indexOf(l),d=[],h=o.openStart;for(let r=o.content,f=0;;f++){let e=r.firstChild;if(d.push(e),f==o.openStart)break;r=e.content}for(let r=h-1;r>=0;r--){let e=d[r],t=(u=e.type).spec.defining||u.spec.definingForContent;if(t&&!e.sameMarkup(s.node(Math.abs(l)-1)))h=r;else if(t||!e.type.isTextblock)break}var u;for(let f=o.openStart;f>=0;f--){let t=(f+h+1)%(o.openStart+1),l=d[t];if(l)for(let d=0;d<a.length;d++){let h=a[(d+c)%a.length],u=!0;h<0&&(u=!1,h=-h);let p=s.node(h-1),f=s.index(h-1);if(p.canReplaceWith(f,f,l.type,l.marks))return e.replace(s.before(h),u?i.after(h):n,new r.Ji(F(o.content,0,o.openStart,t),t,o.openEnd))}}let p=e.steps.length;for(let r=a.length-1;r>=0&&(e.replace(t,n,o),!(e.steps.length>p));r--){let e=a[r];e<0||(t=s.before(e),n=i.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,o){if(!o.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let r=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let e=r.index(o);if(r.node(o).canReplaceWith(e,e,n))return r.before(o+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let e=r.indexAfter(o);if(r.node(o).canReplaceWith(e,e,n))return r.after(o+1);if(e<r.node(o).childCount)return null}return null}(e.doc,t,o.type);null!=r&&(t=n=r)}e.replaceRange(t,n,new r.Ji(r.FK.from(o),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),s=B(r,o);for(let i=0;i<s.length;i++){let t=s[i],n=i==s.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),o.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),o.indexAfter(t-1))))return e.delete(r.before(t),o.after(t))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return e.delete(r.before(i),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:o,$to:s,depth:i}=t,a=o.before(i+1),l=s.after(i+1),c=a,d=l,h=r.FK.empty,u=0;for(let m=i,g=!1;m>n;m--)g||o.index(m)>0?(g=!0,h=r.FK.from(o.node(m).copy(h)),u++):c--;let p=r.FK.empty,f=0;for(let m=i,g=!1;m>n;m--)g||s.after(m+1)<s.end(m)?(g=!0,p=r.FK.from(s.node(m).copy(p)),f++):d++;e.step(new v(c,d,a,l,new r.Ji(h.append(p),u,f),h.size-u,!0))}(this,e,t),this}join(e){return function(e,t,n){let o=null,{linebreakReplacement:s}=e.doc.type.schema,i=e.doc.resolve(t-n),a=i.node().type;if(s&&a.inlineContent){let e="pre"==a.whitespace,t=!!a.contentMatch.matchType(s);e&&!t?o=!1:!e&&t&&(o=!0)}let l=e.steps.length;if(!1===o){let r=e.doc.resolve(t+n);C(e,r.node(),r.before(),l)}a.inlineContent&&w(e,t+n-1,a,i.node().contentMatchAt(i.index()),null==o);let c=e.mapping.slice(l),d=c.map(t-n);if(e.step(new y(d,c.map(t+n,-1),r.Ji.empty,!0)),!0===o){let t=e.doc.resolve(d);E(e,t.node(),t.before(),e.steps.length)}}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let o=r.FK.empty;for(let a=n.length-1;a>=0;a--){if(o.size){let e=n[a].type.contentMatch.matchFragment(o);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=r.FK.from(n[a].type.create(n[a].attrs,o))}let s=t.start,i=t.end;e.step(new v(s,i,s,i,new r.Ji(o,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,o,s){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{let a="function"==typeof s?s(t):s;if(t.isTextblock&&!t.hasMarkup(o,a)&&function(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(i).map(n),o)){let s=null;if(o.schema.linebreakReplacement){let e="pre"==o.whitespace,t=!!o.contentMatch.matchType(o.schema.linebreakReplacement);e&&!t?s=!1:!e&&t&&(s=!0)}!1===s&&C(e,t,n,i),w(e,e.mapping.slice(i).map(n,1),o,void 0,null===s);let l=e.mapping.slice(i),c=l.map(n,1),d=l.map(n+t.nodeSize,1);return e.step(new v(c,d,c+1,d-1,new r.Ji(r.FK.from(o.create(a,null,t.marks)),0,0),1,!0)),!0===s&&E(e,t,n,i),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,o,s){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let a=n.create(o,null,s||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,a);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new v(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Ji(r.FK.from(a),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new V(e,t,n)),this}setDocAttribute(e,t){return this.step(new K(e,t)),this}addNodeMark(e,t){return this.step(new m(e,t)),this}removeNodeMark(e,t){if(!(t instanceof r.CU)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new g(e,t)),this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=e.doc.resolve(t),i=r.FK.empty,a=r.FK.empty;for(let l=s.depth,c=s.depth-n,d=n-1;l>c;l--,d--){i=r.FK.from(s.node(l).copy(i));let e=o&&o[d];a=r.FK.from(e?e.type.create(e.attrs,a):s.node(l).copy(a))}e.step(new y(t,t,new r.Ji(i.append(a),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){return function(e,t,n,r){let o,s,i=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let d=e.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),h=Math.min(l+e.nodeSize,n),u=r.addToSet(d);for(let e=0;e<d.length;e++)d[e].isInSet(u)||(o&&o.to==c&&o.mark.eq(d[e])?o.to=h:i.push(o=new f(c,h,d[e])));s&&s.to==c?s.to=h:a.push(s=new p(c,h,r))}})),i.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,o){let s=[],i=0;e.doc.nodesBetween(t,n,((e,a)=>{if(!e.isInline)return;i++;let l=null;if(o instanceof r.sX){let t,n=e.marks;for(;t=o.isInSet(n);)(l||(l=[])).push(t),n=t.removeFromSet(n)}else o?o.isInSet(e.marks)&&(l=[o]):l=e.marks;if(l&&l.length){let r=Math.min(a+e.nodeSize,n);for(let e=0;e<l.length;e++){let n,o=l[e];for(let e=0;e<s.length;e++){let t=s[e];t.step==i-1&&o.eq(s[e].style)&&(n=t)}n?(n.to=r,n.step=i):s.push({style:o,from:Math.max(a,t),to:r,step:i})}}})),s.forEach((t=>e.step(new f(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return w(this,e,t,n),this}}},3904:(e,t,n)=>{"use strict";n.d(t,{Lz:()=>gn,NZ:()=>Vt,zF:()=>Wt});var r=n(27908),o=n(94644),s=n(82711);const i=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},a=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let l=null;const c=function(e,t,n){let r=l||(l=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},d=function(e,t,n,r){return n&&(u(e,t,n,r,-1)||u(e,t,n,r,1))},h=/^(img|br|input|textarea|hr)$/i;function u(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:p(e))){let n=e.parentNode;if(!n||1!=n.nodeType||f(e)||h.test(e.nodeName)||"false"==e.contentEditable)return!1;t=i(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?p(e):0}}}function p(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function f(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const m=function(e){return e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function g(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const y="undefined"!=typeof navigator?navigator:null,v="undefined"!=typeof document?document:null,b=y&&y.userAgent||"",w=/Edge\/(\d+)/.exec(b),x=/MSIE \d/.exec(b),S=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(b),O=!!(x||S||w),k=x?document.documentMode:S?+S[1]:w?+w[1]:0,E=!O&&/gecko\/(\d+)/i.test(b);E&&(/Firefox\/(\d+)/.exec(b)||[0,0])[1];const C=!O&&/Chrome\/(\d+)/.exec(b),M=!!C,N=C?+C[1]:0,T=!O&&!!y&&/Apple Computer/.test(y.vendor),A=T&&(/Mobile\/\w+/.test(b)||!!y&&y.maxTouchPoints>2),I=A||!!y&&/Mac/.test(y.platform),R=!!y&&/Win/.test(y.platform),_=/Android \d/.test(b),P=!!v&&"webkitFontSmoothing"in v.documentElement.style,D=P?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function L(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function z(e,t){return"number"==typeof e?e:e[t]}function j(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function F(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let i=n||e.dom;i;i=a(i)){if(1!=i.nodeType)continue;let e=i,n=e==s.body,a=n?L(s):j(e),l=0,c=0;if(t.top<a.top+z(r,"top")?c=-(a.top-t.top+z(o,"top")):t.bottom>a.bottom-z(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+z(o,"top")-a.top:t.bottom-a.bottom+z(o,"bottom")),t.left<a.left+z(r,"left")?l=-(a.left-t.left+z(o,"left")):t.right>a.right-z(r,"right")&&(l=t.right-a.right+z(o,"right")),l||c)if(n)s.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let o=e.scrollLeft-n,s=e.scrollTop-r;t={left:t.left-o,top:t.top-s,right:t.right-o,bottom:t.bottom-s}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function B(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=a(r));return t}function V(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:s}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let K=null;function $(e,t){let n,r,o,s,i=2e8,a=0,l=t.top,d=t.top;for(let h=e.firstChild,u=0;h;h=h.nextSibling,u++){let e;if(1==h.nodeType)e=h.getClientRects();else{if(3!=h.nodeType)continue;e=c(h).getClientRects()}for(let c=0;c<e.length;c++){let p=e[c];if(p.top<=l&&p.bottom>=d){l=Math.max(p.bottom,l),d=Math.min(p.top,d);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<i){n=h,i=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==h.nodeType&&e&&(a=u+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!o&&p.left<=t.left&&p.right>=t.left&&(o=h,s={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=u+1)}}return!n&&o&&(n=o,r=s,i=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let n=J(r,1);if(n.top!=n.bottom&&W(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:e,offset:a}:$(n,r)}function W(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function H(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let n=e.childNodes[s];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let o=e[r];if(W(t,o))return H(n,t,o)}}if((s=(s+1)%r)==o)break}return e}function U(e,t){let n,r=e.dom.ownerDocument,o=0,s=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(p(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(p(r.startContainer),r.startOffset)}}}(r,t.left,t.top);s&&({node:n,offset:o}=s);let i,l=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!l||!e.dom.contains(1!=l.nodeType?l.parentNode:l)){let n=e.dom.getBoundingClientRect();if(!W(t,n))return null;if(l=H(e.dom,t,n),!l)return null}if(T)for(let d=l;n&&d;d=a(d))d.draggable&&(n=void 0);if(l=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(l,t),n){if(E&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,r=n.childNodes[o];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}let r;P&&o&&1==n.nodeType&&1==(r=n.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?i=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(i=function(e,t,n,r){let o=-1;for(let s=t,i=!1;s!=e.dom;){let t,n=e.docView.nearestDesc(s,!0);if(!n)return null;if(1==n.dom.nodeType&&(n.node.isBlock&&n.parent||!n.contentDOM)&&((t=n.dom.getBoundingClientRect()).width||t.height)&&(n.node.isBlock&&n.parent&&(!i&&t.left>r.left||t.top>r.top?o=n.posBefore:(!i&&t.right<r.left||t.bottom<r.top)&&(o=n.posAfter),i=!0),!n.contentDOM&&o<0&&!n.node.isText))return(n.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?n.posBefore:n.posAfter;s=n.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==i&&(i=function(e,t,n){let{node:r,offset:o}=$(t,n),s=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();s=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,o,s)}(e,l,t));let c=e.docView.nearestDesc(l,!0);return{pos:i,inside:c?c.posAtStart-c.border:-1}}function G(e){return e.top<e.bottom||e.left<e.right}function J(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(G(e))return e}return Array.prototype.find.call(n,G)||e.getBoundingClientRect()}const q=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function X(e,t,n){let{node:r,offset:o,atom:s}=e.docView.domFromPos(t,n<0?-1:1),i=P||E;if(3==r.nodeType){if(!i||!q.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let e=o,t=o,s=n<0?1:-1;return n<0&&!o?(t++,s=-1):n>=0&&o==r.nodeValue.length?(e--,s=1):n<0?e--:t++,Y(J(c(r,e,t),s),s<0)}{let e=J(c(r,o,o),n);if(E&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let t=J(c(r,o-1,o-1),-1);if(t.top==e.top){let n=J(c(r,o,o+1),-1);if(n.top!=e.top)return Y(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(null==s&&o&&(n<0||o==p(r))){let e=r.childNodes[o-1];if(1==e.nodeType)return Z(e.getBoundingClientRect(),!1)}if(null==s&&o<p(r)){let e=r.childNodes[o];if(1==e.nodeType)return Z(e.getBoundingClientRect(),!0)}return Z(r.getBoundingClientRect(),n>=0)}if(null==s&&o&&(n<0||o==p(r))){let e=r.childNodes[o-1],t=3==e.nodeType?c(e,p(e)-(i?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Y(J(t,1),!1)}if(null==s&&o<p(r)){let e=r.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,i?0:1):1==e.nodeType?e:null:null;if(t)return Y(J(t,-1),!0)}return Y(J(3==r.nodeType?c(r):r,-n),n>=0)}function Y(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Z(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Q(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}const ee=/[\u0590-\u08ac]/;let te=null,ne=null,re=!1;function oe(e,t,n){return te==t&&ne==n?re:(te=t,ne=n,re="up"==n||"down"==n?function(e,t,n){let r=t.selection,o="up"==n?r.$from:r.$to;return Q(e,t,(()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=X(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?r.top-o.top>2*(o.bottom-r.top):o.bottom-r.bottom>2*(r.bottom-o.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=e.domSelection();return a?ee.test(r.parent.textContent)&&a.modify?Q(e,t,(()=>{let{focusNode:t,focusOffset:o,anchorNode:s,anchorOffset:i}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:d,focusOffset:h}=e.domSelectionRange(),u=d&&!c.contains(1==d.nodeType?d:d.parentNode)||t==d&&o==h;try{a.collapse(s,i),t&&(t!=s||o!=i)&&a.extend&&a.extend(t,o)}catch(p){}return null!=l&&(a.caretBidiLevel=l),u})):"left"==n||"backward"==n?s:i:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class se{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>i(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let o,s=this.getDesc(r);if(s&&(!t||s.node)){if(!n||!(o=s.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return s;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let o=0;n<this.children.length;n++){let t=this.children[n],s=o+t.size;if(s>e||t instanceof ue){r=e-o;break}o=s}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let o;n&&!(o=this.children[n-1]).size&&o instanceof ie&&o.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?i(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?i(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let s=n,a=0;;a++){let n=this.children[a],l=s+n.size;if(-1==r&&e<=l){let o=s+n.border;if(e>=o&&t<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=s;for(let t=a;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=i(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(l>t||a==this.children.length-1)){t=l;for(let e=a+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=i(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}s=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),s=Math.max(e,t);for(let i=0,d=0;i<this.children.length;i++){let a=this.children[i],l=d+a.size;if(o>d&&s<l)return a.setSelection(e-d-a.border,t-d-a.border,n,r);d=l}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=n.root.getSelection(),h=n.domSelectionRange(),u=!1;if((E||T)&&e==t){let{node:e,offset:t}=a;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(a=l={node:n.parentNode,offset:i(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(E&&h.focusNode&&h.focusNode!=l.node&&1==h.focusNode.nodeType){let e=h.focusNode.childNodes[h.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&T)&&d(a.node,a.offset,h.anchorNode,h.anchorOffset)&&d(l.node,l.offset,h.focusNode,h.focusOffset))return;let p=!1;if((c.extend||e==t)&&!u){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),p=!0}catch(f){}}if(!p){if(e>t){let e=a;a=l,l=e}let n=document.createRange();n.setEnd(l.node,l.offset),n.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],s=n+o.size;if(n==s?e<=s&&t>=n:e<s&&t>n){let r=n+o.border,i=s-o.border;if(e>=r&&t<=i)return this.dirty=e==n||t==s?2:1,void(e!=r||t!=i||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-r,t-r):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=s}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class ie extends se{constructor(e,t,n,r){let o,s=t.type.toDOM;if("function"==typeof s&&(s=s(n,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r))),!t.type.spec.raw){if(1!=s.nodeType){let e=document.createElement("span");e.appendChild(s),s=e}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class ae extends se{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class le extends se{constructor(e,t,n,r,o){super(e,[],n,r),this.mark=t,this.spec=o}static create(e,t,n,r){let s=r.nodeViews[t.type.name],i=s&&s(t,r,n);return i&&i.dom||(i=o.ZF.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new le(e,t,i.dom,i.contentDOM||i.dom,i)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=le.create(this.parent,this.mark,!0,n),o=this.children,s=this.size;t<s&&(o=Ee(o,t,s,n)),e>0&&(o=Ee(o,0,e,n));for(let i=0;i<o.length;i++)o[i].parent=r;return r.children=o,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ce extends se{constructor(e,t,n,r,o,s,i,a,l){super(e,[],o,s),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=i}static create(e,t,n,r,s,i){let a,l=s.nodeViews[t.type.name],c=l&&l(t,s,(()=>a?a.parent?a.parent.posBeforeChild(a):void 0:i),n,r),d=c&&c.dom,h=c&&c.contentDOM;if(t.isText)if(d){if(3!=d.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else d=document.createTextNode(t.text);else if(!d){let e=o.ZF.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:d,contentDOM:h}=e)}h||t.isText||"BR"==d.nodeName||(d.hasAttribute("contenteditable")||(d.contentEditable="false"),t.type.spec.draggable&&(d.draggable=!0));let u=d;return d=we(d,n,t),c?a=new pe(e,t,n,r,d,h||null,u,c,s,i+1):t.isText?new he(e,t,n,r,d,u,s):new ce(e,t,n,r,d,h||null,u,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>o.FK.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&xe(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,s=e.composing?this.localCompositionInfo(e,t):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new Oe(this,i&&i.node,e);!function(e,t,n,r){let o=t.locals(e),s=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let i=e.child(n);r(i,o,t.forChild(s,i),n),s+=i.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let d,h,u,p;for(;i<o.length&&o[i].to==s;){let e=o[i++];e.widget&&(d?(h||(h=[d])).push(e):d=e)}if(d)if(h){h.sort(ke);for(let e=0;e<h.length;e++)n(h[e],c,!!l)}else n(d,c,!!l);if(l)p=-1,u=l,l=null;else{if(!(c<e.childCount))break;p=c,u=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=s&&a.splice(e--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let f=s+u.nodeSize;if(u.isText){let e=f;i<o.length&&o[i].from<e&&(e=o[i].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=u.cut(e-s),u=u.cut(0,e-s),f=e,p=-1)}else for(;i<o.length&&o[i].to<f;)i++;r(u,u.isInline&&!u.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(s,u),p),s=f}}(this.node,this.innerDeco,((t,s,i)=>{t.spec.marks?l.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&l.syncToMarks(s==this.node.childCount?o.CU.none:this.node.child(s).marks,n,e),l.placeWidget(t,e,r)}),((t,o,i,c)=>{let d;l.syncToMarks(t.marks,n,e),l.findNodeMatch(t,o,i,c)||a&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(d=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(t,o,i,d,e)||l.updateNextNode(t,o,i,e,c,r)||l.addNode(t,o,i,e,r),r+=t.nodeSize})),l.syncToMarks([],n,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),fe(this.contentDOM,this.children,e),A&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:o}=e.state.selection;if(!(e.state.selection instanceof r.U3)||n<t||o>t+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,r=function(e,t,n,r){for(let o=0,s=0;o<e.childCount&&s<=r;){let i=e.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<e.childCount;){let t=e.child(o++);if(s+=t.nodeSize,!t.isText)break;l+=t.text}if(s>=n){if(s>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,o-t);return r<0?null:{node:s,pos:r,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:r,text:o}=t;if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new ae(this,s,n,o);e.input.compositionNodes.push(i),this.children=Ee(this.children,r,r+o.length,e,i)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(xe(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ve(this.dom,this.nodeDOM,ye(this.outerDeco,this.node,t),ye(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function de(e,t,n,r,o){we(r,t,e);let s=new ce(void 0,e,t,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class he extends ce{constructor(e,t,n,r,o,s,i){super(e,t,n,r,o,null,s,i,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new he(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ue extends se{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class pe extends ce{constructor(e,t,n,r,o,s,i,a,l,c){super(e,t,n,r,o,s,i,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function fe(e,t,n){let r=e.firstChild,o=!1;for(let s=0;s<t.length;s++){let i=t[s],a=i.dom;if(a.parentNode==e){for(;a!=r;)r=Se(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(i instanceof le){let t=r?r.previousSibling:e.lastChild;fe(i.contentDOM,i.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=Se(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const me=function(e){e&&(this.nodeName=e)};me.prototype=Object.create(null);const ge=[new me];function ye(e,t,n){if(0==e.length)return ge;let r=n?ge[0]:new me,o=[r];for(let s=0;s<e.length;s++){let i=e[s].type.attrs;if(i){i.nodeName&&o.push(r=new me(i.nodeName));for(let e in i){let s=i[e];null!=s&&(n&&1==o.length&&o.push(r=new me(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+s:"style"==e?r.style=(r.style?r.style+";":"")+s:"nodeName"!=e&&(r[e]=s))}}}return o}function ve(e,t,n,r){if(n==ge&&r==ge)return t;let o=t;for(let s=0;s<r.length;s++){let t=r[s],i=n[s];if(s){let n;i&&i.nodeName==t.nodeName&&o!=e&&(n=o.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(o),i=ge[0]),o=n}be(o,i||ge[0],t)}return o}function be(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function we(e,t,n){return ve(e,e,ge,ye(t,n,1!=e.nodeType))}function xe(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Se(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Oe{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,o=e.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof le)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;r<s&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=le.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,s=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))s=this.top.children.indexOf(o,this.index);else for(let i=this.index,a=Math.min(this.top.children.length,i+5);i<a;i++){let r=this.top.children[i];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){s=i;break}}return!(s<0)&&(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,t,n,r,o){let s=this.top.children[r];return 3==s.dirty&&s.dom==s.contentDOM&&(s.dirty=2),!!s.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,o,s){for(let i=this.index;i<this.top.children.length;i++){let a=this.top.children[i];if(a instanceof ce){let l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;let c,d=a.dom,h=this.isLocked(d)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&xe(t,a.outerDeco));if(!h&&a.update(e,t,n,r))return this.destroyBetween(this.index,i),a.dom!=d&&(this.changed=!0),this.index++,!0;if(!h&&(c=this.recreateWrapper(a,e,t,n,r,s)))return this.destroyBetween(this.index,i),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,s+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!xe(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let i=ce.create(this.top,t,n,r,o,s);if(i.contentDOM){i.children=e.children,e.children=[];for(let e of i.children)e.parent=i}return e.destroy(),i}addNode(e,t,n,r,o){let s=ce.create(this.top,e,t,n,r,o);s.contentDOM&&s.updateChildren(r,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new ie(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof le;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof he)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((T||M)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new ue(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function ke(e,t){return e.type.side-t.type.side}function Ee(e,t,n,r,o){let s=[];for(let i=0,a=0;i<e.length;i++){let l=e[i],c=a,d=a+=l.size;c>=n||d<=t?s.push(l):(c<t&&s.push(l.slice(0,t-c,r)),o&&(s.push(o),o=void 0),d>n&&s.push(l.slice(n-c,l.size,r)))}return s}function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),o=e.state.doc;if(!n.focusNode)return null;let s=e.docView.nearestDesc(n.focusNode),a=s&&0==s.size,l=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c,d,h=o.resolve(l);if(m(n)){for(c=l;s&&!s.node;)s=s.parent;let e=s.node;if(s&&e.isAtom&&r.nh.isSelectable(e)&&s.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==p(e);r||o;){if(e==n)return!0;let t=i(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==p(e)}}(n.focusNode,n.focusOffset,s.dom))){let e=s.posBefore;d=new r.nh(l==e?h:o.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=l,r=l;for(let o=0;o<n.rangeCount;o++){let s=n.getRangeAt(o);t=Math.min(t,e.docView.posFromDOM(s.startContainer,s.startOffset,1)),r=Math.max(r,e.docView.posFromDOM(s.endContainer,s.endOffset,-1))}if(t<0)return null;[c,l]=r==e.state.selection.anchor?[r,t]:[t,r],h=o.resolve(l)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let u=o.resolve(c);if(!d){d=De(e,u,h,"pointer"==t||e.state.selection.head<h.pos&&!a?1:-1)}return d}function Me(e){return e.editable?e.hasFocus():ze(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(_e(e,n),Me(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&M){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&d(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setStart(r.parentNode,i(r)+1):n.setStart(r,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&O&&k<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let o,s,{anchor:i,head:a}=n;!Te||n instanceof r.U3||(n.$from.parent.inlineContent||(o=Ae(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=Ae(e,n.to))),e.docView.setSelection(i,a,e,t),Te&&(o&&Re(o),s&&Re(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Me(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Te=T||M&&N<63;function Ae(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(T&&o&&"false"==o.contentEditable)return Ie(o);if((!o||"false"==o.contentEditable)&&(!s||"false"==s.contentEditable)){if(o)return Ie(o);if(s)return Ie(s)}}function Ie(e){return e.contentEditable="true",T&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Re(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function _e(e,t){if(t instanceof r.nh){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Pe(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Pe(e)}function Pe(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function De(e,t,n,o){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||r.U3.between(t,n,o)}function Le(e){return!(e.editable&&!e.hasFocus())&&ze(e)}function ze(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function je(e,t){let{$anchor:n,$head:o}=e.selection,s=t>0?n.max(o):n.min(o),i=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return i&&r.LN.findFrom(i,t)}function Fe(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Be(e,t,n){let o=e.state.selection;if(!(o instanceof r.U3)){if(o instanceof r.nh&&o.node.isInline)return Fe(e,new r.U3(t>0?o.$to:o.$from));{let n=je(e.state,t);return!!n&&Fe(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=o,s=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=e.state.doc.resolve(n.pos+s.nodeSize*(t<0?-1:1));return Fe(e,new r.U3(o.$anchor,i))}if(!o.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=je(e.state,t);return!!(n&&n instanceof r.nh)&&Fe(e,n)}if(!(I&&n.indexOf("m")>-1)){let n,s=o.$head,i=s.textOffset?null:t<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText)return!1;let a=t<0?s.pos-i.nodeSize:s.pos;return!!(i.isAtom||(n=e.docView.descAt(a))&&!n.contentDOM)&&(r.nh.isSelectable(i)?Fe(e,new r.nh(t<0?e.state.doc.resolve(s.pos-i.nodeSize):s)):!!P&&Fe(e,new r.U3(e.state.doc.resolve(t<0?a:a+i.nodeSize))))}}function Ve(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ke(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function $e(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,s,a=!1;E&&1==n.nodeType&&r<Ve(n)&&Ke(n.childNodes[r],-1)&&(a=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(Ke(e,-1))o=n,s=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(We(n))break;{let t=n.previousSibling;for(;t&&Ke(t,-1);)o=n.parentNode,s=i(t),t=t.previousSibling;if(t)n=t,r=Ve(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}a?He(e,n,r):o&&He(e,o,s)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,s,a=Ve(n);for(;;)if(r<a){if(1!=n.nodeType)break;if(!Ke(n.childNodes[r],1))break;o=n,s=++r}else{if(We(n))break;{let t=n.nextSibling;for(;t&&Ke(t,1);)o=t.parentNode,s=i(t)+1,t=t.nextSibling;if(t)n=t,r=0,a=Ve(n);else{if(n=n.parentNode,n==e.dom)break;r=a=0}}}o&&He(e,o,s)}(e)}function We(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function He(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!f(e);)t=i(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!f(e);)t=i(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(m(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&Ne(e)}),50)}function Ue(e,t){let n=e.state.doc.resolve(t);if(!M&&!R&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Ge(e,t,n){let o=e.state.selection;if(o instanceof r.U3&&!o.empty||n.indexOf("s")>-1)return!1;if(I&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=o;if(!s.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=je(e.state,t);if(n&&n instanceof r.nh)return Fe(e,n)}if(!s.parent.inlineContent){let n=t<0?s:i,a=o instanceof r.i5?r.LN.near(n,t):r.LN.findFrom(n,t);return!!a&&Fe(e,a)}return!1}function Je(e,t){if(!(e.state.selection instanceof r.U3))return!0;let{$head:n,$anchor:o,empty:s}=e.state.selection;if(!n.sameParent(o))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function qe(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Xe(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||I&&72==n&&"c"==r)return Je(e,-1)||$e(e,-1);if(46==n&&!t.shiftKey||I&&68==n&&"c"==r)return Je(e,1)||$e(e,1);if(13==n||27==n)return!0;if(37==n||I&&66==n&&"c"==r){let t=37==n?"ltr"==Ue(e,e.state.selection.from)?-1:1:-1;return Be(e,t,r)||$e(e,t)}if(39==n||I&&70==n&&"c"==r){let t=39==n?"ltr"==Ue(e,e.state.selection.from)?1:-1:1;return Be(e,t,r)||$e(e,t)}return 38==n||I&&80==n&&"c"==r?Ge(e,-1,r)||$e(e,-1):40==n||I&&78==n&&"c"==r?function(e){if(!T||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;qe(e,n,"true"),setTimeout((()=>qe(e,n,"false")),20)}return!1}(e)||Ge(e,1,r)||$e(e,1):r==(I?"m":"c")&&(66==n||73==n||89==n||90==n)}function Ye(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:s,openEnd:i}=t;for(;s>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount;){s--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let a=e.someProp("clipboardSerializer")||o.ZF.fromSchema(e.state.schema),l=at(),c=l.createElement("div");c.appendChild(a.serializeFragment(r,{document:l}));let d,h=c.firstChild,u=0;for(;h&&1==h.nodeType&&(d=st[h.nodeName.toLowerCase()]);){for(let e=d.length-1;e>=0;e--){let t=l.createElement(d[e]);for(;c.firstChild;)t.appendChild(c.firstChild);c.appendChild(t),u++}h=c.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${s} ${i}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Ze(e,t,n,r,s){let i,a,l=s.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(r||l||!n);if(c){if(e.someProp("transformPastedText",(n=>{t=n(t,l||r,e)})),l)return t?new o.Ji(o.FK.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):o.Ji.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,s,r,e)));if(n)a=n;else{let n=s.marks(),{schema:r}=e.state,a=o.ZF.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(a.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),i=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=at().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&st[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;lt||(lt=t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return lt.createHTML(e)}(e),n)for(let s=0;s<n.length;s++)r=r.querySelector(n[s])||r;return r}(n),P&&function(e){let t=e.querySelectorAll(M?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(i);let d=i&&i.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let o=+h[3];o>0;o--){let e=i.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;i=e}if(!a){let t=e.someProp("clipboardParser")||e.someProp("domParser")||o.S4.fromSchema(e.state.schema);a=t.parseSlice(i,{preserveWhitespace:!(!c&&!h),context:s,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Qe.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(h)a=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(l){return e}let{content:s,openStart:i,openEnd:a}=e;for(let c=n.length-2;c>=0;c-=2){let e=r.nodes[n[c]];if(!e||e.hasRequiredAttrs())break;s=o.FK.from(e.create(n[c+1],s)),i++,a++}return new o.Ji(s,i,a)}(ot(a,+h[1],+h[2]),h[4]);else if(a=o.Ji.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,s=t.node(n).contentMatchAt(t.index(n)),i=[];if(e.forEach((e=>{if(!i)return;let t,n=s.findWrapping(e.type);if(!n)return i=null;if(t=i.length&&r.length&&tt(n,r,e,i[i.length-1],0))i[i.length-1]=t;else{i.length&&(i[i.length-1]=nt(i[i.length-1],r.length));let t=et(e,n);i.push(t),s=s.matchType(t.type),r=n}})),i)return o.FK.from(i)}return e}(a.content,s),!0),a.openStart||a.openEnd){let e=0,t=0;for(let n=a.content.firstChild;e<a.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=a.content.lastChild;t<a.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);a=ot(a,e,t)}return e.someProp("transformPasted",(t=>{a=t(a,e)})),a}const Qe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function et(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,o.FK.from(e));return e}function tt(e,t,n,r,s){if(s<e.length&&s<t.length&&e[s]==t[s]){let i=tt(e,t,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==e.length-1?n.type:e[s+1]))return r.copy(r.content.append(o.FK.from(et(n,e,s+1))))}}function nt(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,nt(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(o.FK.empty,!0);return e.copy(n.append(r))}function rt(e,t,n,r,s,i){let a=t<0?e.firstChild:e.lastChild,l=a.content;return e.childCount>1&&(i=0),s<r-1&&(l=rt(l,t,n,r,s+1,i)),s>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,i<=s).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(o.FK.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}function ot(e,t,n){return t<e.openStart&&(e=new o.Ji(rt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new o.Ji(rt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const st={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let it=null;function at(){return it||(it=document.implementation.createHTMLDocument("title"))}let lt=null;const ct={},dt={},ht={touchstart:!0,touchmove:!0};class ut{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function pt(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ft(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>mt(e,t))}))}function mt(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function gt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function yt(e){return{left:e.clientX,top:e.clientY}}function vt(e,t,n,r,o){if(-1==r)return!1;let s=e.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(e.someProp(t,(t=>i>s.depth?t(e,n,s.nodeAfter,s.before(i),o,!0):t(e,n,s.node(i),s.before(i),o,!1))))return!0;return!1}function bt(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function wt(e,t,n,o,s){return vt(e,"handleClickOn",t,n,o)||e.someProp("handleClick",(n=>n(e,t,o)))||(s?function(e,t){if(-1==t)return!1;let n,o,s=e.state.selection;s instanceof r.nh&&(n=s.node);let i=e.state.doc.resolve(t);for(let a=i.depth+1;a>0;a--){let e=a>i.depth?i.nodeAfter:i.node(a);if(r.nh.isSelectable(e)){o=n&&s.$from.depth>0&&a>=s.$from.depth&&i.before(s.$from.depth+1)==s.$from.pos?i.before(s.$from.depth):i.before(a);break}}return null!=o&&(bt(e,r.nh.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&r.nh.isSelectable(o))&&(bt(e,new r.nh(n),"pointer"),!0)}(e,n))}function xt(e,t,n,r){return vt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function St(e,t,n,o){return vt(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",(n=>n(e,t,o)))||function(e,t,n){if(0!=n.button)return!1;let o=e.state.doc;if(-1==t)return!!o.inlineContent&&(bt(e,r.U3.create(o,0,o.content.size),"pointer"),!0);let s=o.resolve(t);for(let i=s.depth+1;i>0;i--){let t=i>s.depth?s.nodeAfter:s.node(i),n=s.before(i);if(t.inlineContent)bt(e,r.U3.create(o,n+1,n+1+t.content.size),"pointer");else{if(!r.nh.isSelectable(t))continue;bt(e,r.nh.create(o,n),"pointer")}return!0}}(e,n,o)}function Ot(e){return It(e)}dt.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Ct(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!_||!M||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!A||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Xe(e,n)?n.preventDefault():pt(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,g(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},dt.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},dt.keypress=(e,t)=>{let n=t;if(Ct(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||I&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let o=e.state.selection;if(!(o instanceof r.U3)||!o.$from.sameParent(o.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,o.$from.pos,o.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const kt=I?"metaKey":"ctrlKey";ct.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=Ot(e),o=Date.now(),s="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[kt]&&("singleClick"==e.input.lastClick.type?s="doubleClick":"doubleClick"==e.input.lastClick.type&&(s="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=e.posAtCoords(yt(n));i&&("singleClick"==s?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Et(e,i,n,!!r)):("doubleClick"==s?xt:St)(e,i.pos,i.inside,n)?n.preventDefault():pt(e,"pointer"))};class Et{constructor(e,t,n,o){let s,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[kt],this.allowDefault=n.shiftKey,t.inside>-1)s=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);s=n.parent,i=n.depth?n.before():0}const a=o?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&1==l.dom.nodeType?l.dom:null;let{selection:c}=e.state;(0==n.button&&s.type.spec.draggable&&!1!==s.type.spec.selectable||c instanceof r.nh&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!E||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),pt(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Ne(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(yt(e))),this.updateAllowDefault(e),this.allowDefault||!t?pt(this.view,"pointer"):wt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||T&&this.mightDrag&&!this.mightDrag.node.isAtom||M&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(bt(this.view,r.LN.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):pt(this.view,"pointer")}move(e){this.updateAllowDefault(e),pt(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function Ct(e,t){return!!e.composing||!!(T&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}ct.touchstart=e=>{e.input.lastTouch=Date.now(),Ot(e),pt(e,"pointer")},ct.touchmove=e=>{e.input.lastTouch=Date.now(),pt(e,"pointer")},ct.contextmenu=e=>Ot(e);const Mt=_?5e3:-1;function Nt(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>It(e)),t))}function Tt(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function At(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=p(e=e.childNodes[t-1])}else{if(!e.parentNode||f(e))return null;t=i(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||f(e))return null;t=i(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function It(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(_&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Tt(e),t||e.docView&&e.docView.dirty){let n=Ce(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||e.state.selection.empty?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}dt.compositionstart=dt.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof r.U3&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),It(e,!0),e.markCursor=null;else if(It(e,!t.selection.empty),E&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Nt(e,Mt)},dt.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,Nt(e,20))};const Rt=O&&k<15||A&&D<604;function _t(e,t,n,r,s){let i=Ze(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,s,i||o.Ji.empty))))return!0;if(!i)return!1;let a=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),l=a?e.state.tr.replaceSelectionWith(a,r):e.state.tr.replaceSelection(i);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Pt(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ct.copy=dt.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let s=Rt?null:n.clipboardData,i=r.content(),{dom:a,text:l}=Ye(e,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},dt.paste=(e,t)=>{let n=t;if(e.composing&&!_)return;let r=Rt?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&_t(e,Pt(r),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?_t(e,r.value,null,o,t):_t(e,r.textContent,r.innerHTML,o,t)}),50)}(e,n)};class Dt{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Lt=I?"altKey":"ctrlKey";ct.dragstart=(e,t)=>{let n=t,o=e.input.mouseDown;if(o&&o.done(),!n.dataTransfer)return;let s,i=e.state.selection,a=i.empty?null:e.posAtCoords(yt(n));if(a&&a.pos>=i.from&&a.pos<=(i instanceof r.nh?i.to-1:i.to));else if(o&&o.mightDrag)s=r.nh.create(e.state.doc,o.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(s=r.nh.create(e.state.doc,t.posBefore))}let l=(s||e.state.selection).content(),{dom:c,text:d,slice:h}=Ye(e,l);(!n.dataTransfer.files.length||!M||N>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Rt?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Rt||n.dataTransfer.setData("text/plain",d),e.dragging=new Dt(h,!n[Lt],s)},ct.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},dt.dragover=dt.dragenter=(e,t)=>t.preventDefault(),dt.drop=(e,t)=>{let n=t,i=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let a=e.posAtCoords(yt(n));if(!a)return;let l=e.state.doc.resolve(a.pos),c=i&&i.slice;c?e.someProp("transformPasted",(t=>{c=t(c,e)})):c=Ze(e,Pt(n.dataTransfer),Rt?null:n.dataTransfer.getData("text/html"),!1,l);let d=!(!i||n[Lt]);if(e.someProp("handleDrop",(t=>t(e,n,c||o.Ji.empty,d))))return void n.preventDefault();if(!c)return;n.preventDefault();let h=c?(0,s.Um)(e.state.doc,l.pos,c):l.pos;null==h&&(h=l.pos);let u=e.state.tr;if(d){let{node:e}=i;e?e.replace(u):u.deleteSelection()}let p=u.mapping.map(h),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=u.doc;if(f?u.replaceRangeWith(p,p,c.content.firstChild):u.replaceRange(p,p,c),u.doc.eq(m))return;let g=u.doc.resolve(p);if(f&&r.nh.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))u.setSelection(new r.nh(g));else{let t=u.mapping.map(h);u.mapping.maps[u.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),u.setSelection(De(e,g,u.doc.resolve(t)))}e.focus(),e.dispatch(u.setMeta("uiEvent","drop"))},ct.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ne(e)}),20))},ct.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},ct.beforeinput=(e,t)=>{if(M&&_&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,g(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let Sn in dt)ct[Sn]=dt[Sn];function zt(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class jt{constructor(e,t){this.toDOM=e,this.spec=t||$t,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:s}=e.mapResult(t.from+r,this.side<0?-1:1);return s?null:new Vt(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof jt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&zt(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ft{constructor(e,t){this.attrs=e,this.spec=t||$t}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,s=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=s?null:new Vt(o,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ft&&zt(this.attrs,e.attrs)&&zt(this.spec,e.spec)}static is(e){return e.type instanceof Ft}destroy(){}}class Bt{constructor(e,t){this.attrs=e,this.spec=t||$t}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let s=e.mapResult(t.to+r,-1);return s.deleted||s.pos<=o.pos?null:new Vt(o.pos-n,s.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Bt&&zt(this.attrs,e.attrs)&&zt(this.spec,e.spec)}destroy(){}}class Vt{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Vt(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Vt(e,e,new jt(t,n))}static inline(e,t,n,r){return new Vt(e,t,new Ft(n,r))}static node(e,t,n,r){return new Vt(e,t,new Bt(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ft}get widget(){return this.type instanceof jt}}const Kt=[],$t={};class Wt{constructor(e,t){this.local=e.length?e:Kt,this.children=t.length?t:Kt}static create(e,t){return t.length?Xt(t,e,0,$t):Ht}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let s=0;s<this.local.length;s++){let i=this.local[s];i.from<=t&&i.to>=e&&(!o||o(i.spec))&&n.push(i.copy(i.from+r,i.to+r))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let i=this.children[s]+1;this.children[s+2].findInner(e-i,t-i,n,r+i,o)}}map(e,t,n){return this==Ht||0==e.maps.length?this:this.mapInner(e,t,0,0,n||$t)}mapInner(e,t,n,r,o){let s;for(let i=0;i<this.local.length;i++){let a=this.local[i].map(e,n,r);a&&a.type.valid(t,a)?(s||(s=[])).push(a):o.onRemove&&o.onRemove(this.local[i].spec)}return this.children.length?function(e,t,n,r,o,s,i){let a=e.slice();for(let c=0,d=s;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,o)=>{let s=o-r-(n-t);for(let i=0;i<a.length;i+=3){let r=a[i+1];if(r<0||t>r+d-e)continue;let o=a[i]+d-e;n>=o?a[i+1]=t<=o?-2:-1:t>=d&&s&&(a[i]+=s,a[i+1]+=s)}e+=s})),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+s),d=t-o;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(e[c+1]+s,-1)-o,{index:u,offset:p}=r.content.findIndex(d),f=r.maybeChild(u);if(f&&p==d&&p+f.nodeSize==h){let r=a[c+2].mapInner(n,f,t+1,e[c]+s+1,i);r!=Ht?(a[c]=d,a[c+1]=h,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,o,s,i){function a(e,t){for(let s=0;s<e.local.length;s++){let a=e.local[s].map(r,o,t);a?n.push(a):i.onRemove&&i.onRemove(e.local[s].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+s+1);return n}(a,e,t,n,o,s,i),c=Xt(l,r,0,i);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Wt(t.sort(Yt),a)}(this.children,s||[],e,t,n,r,o):s?new Wt(s.sort(Yt),Kt):Ht}add(e,t){return t.length?this==Ht?Wt.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,s)=>{let i,a=s+n;if(i=Jt(t,e,a)){for(r||(r=this.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(e,i,a+1):r.splice(o,0,s,s+e.nodeSize,Xt(i,e,a+1,$t)),o+=3}}));let s=Gt(o?qt(t):t,-n);for(let i=0;i<s.length;i++)s[i].type.valid(e,s[i])||s.splice(i--,1);return new Wt(s.length?this.local.concat(s).sort(Yt):this.local,r||this.children)}remove(e){return 0==e.length||this==Ht?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,s=n[o]+t,i=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>s&&t.to<i&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[o+2].removeInner(r,s+1);a!=Ht?n[o+2]=a:(n.splice(o,3),o-=3)}if(r.length)for(let o,s=0;s<e.length;s++)if(o=e[s])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Wt(r,n):Ht}forChild(e,t){if(this==Ht)return this;if(t.isLeaf)return Wt.empty;let n,r;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=e){this.children[i]==e&&(n=this.children[i+2]);break}let o=e+1,s=o+t.content.size;for(let i=0;i<this.local.length;i++){let e=this.local[i];if(e.from<s&&e.to>o&&e.type instanceof Ft){let t=Math.max(o,e.from)-o,n=Math.min(s,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Wt(r.sort(Yt),Kt);return n?new Ut([e,n]):e}return n||Ht}eq(e){if(this==e)return!0;if(!(e instanceof Wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Zt(this.localsInner(e))}localsInner(e){if(this==Ht)return Kt;if(e.inlineContent||!this.local.some(Ft.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ft||t.push(this.local[n]);return t}forEachSet(e){e(this)}}Wt.empty=new Wt([],[]),Wt.removeOverlap=Zt;const Ht=Wt.empty;class Ut{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,$t)));return Ut.from(n)}forChild(e,t){if(t.isLeaf)return Wt.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Ht&&(o instanceof Ut?n=n.concat(o.members):n.push(o))}return Ut.from(n)}eq(e){if(!(e instanceof Ut)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?Zt(n?t:t.sort(Yt)):Kt}static from(e){switch(e.length){case 0:return Ht;case 1:return e[0];default:return new Ut(e.every((e=>e instanceof Wt))?e:e.reduce(((e,t)=>e.concat(t instanceof Wt?t:t.members)),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Gt(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Vt(o.from+t,o.to+t,o.type))}return n}function Jt(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let s,i=0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),e[i]=null);return o}function qt(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Xt(e,t,n,r){let o=[],s=!1;t.forEach(((t,i)=>{let a=Jt(e,t,i+n);if(a){s=!0;let e=Xt(a,t,n+i+1,r);e!=Ht&&o.push(i,i+t.nodeSize,e)}}));let i=Gt(s?qt(e):e,-n).sort(Yt);for(let a=0;a<i.length;a++)i[a].type.valid(t,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new Wt(i,o):Ht}function Yt(e,t){return e.from-t.from||e.to-t.to}function Zt(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let s=t[o];if(s.from!=r.from){s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),Qt(t,o,r.copy(s.from,r.to)));break}s.to!=r.to&&(t==e&&(t=e.slice()),t[o]=s.copy(s.from,r.to),Qt(t,o+1,s.copy(r.to,s.to)))}}return t}function Qt(e,t,n){for(;t<e.length&&Yt(n,e[t])>0;)t++;e.splice(t,0,n)}function en(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=Ht&&t.push(r)})),e.cursorWrapper&&t.push(Wt.create(e.state.doc,[e.cursorWrapper.deco])),Ut.from(t)}const tn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},nn=O&&k<=11;class rn{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class on{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new rn,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);O&&k<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),nn&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,tn)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(Le(this.view)){if(this.suppressingSelectionUpdates)return Ne(this.view);if(O&&k<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&d(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let o=e.focusNode;o;o=a(o))n.add(o);for(let o=e.anchorNode;o;o=a(o))if(n.has(o)){t=o;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Le(e)&&!this.ignoreSelectionChange(n),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let r=0;r<t.length;r++){let e=this.registerMutation(t[r],l);e&&(s=s<0?e.from:Math.min(e.from,s),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(a=!0))}if(E&&l.length){let t=l.filter((e=>"BR"==e.nodeName));if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&cn(e,n)==t||r.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&m(n)&&(c=Ce(e))&&c.eq(r.LN.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ne(e),this.currentSelection.set(n)):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),function(e){if(sn.has(e))return;if(sn.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=E,an)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),an=!0}}(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ne(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,o=e.nextSibling;if(O&&k<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:s}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!s||Array.prototype.indexOf.call(e.addedNodes,s)<0)&&(o=s)}let s=r&&r.parentNode==e.target?i(r)+1:0,a=n.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?i(o):e.target.childNodes.length;return{from:a,to:n.localPosFromDOM(e.target,l,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let sn=new WeakMap,an=!1;function ln(e,t){let n=t.startContainer,r=t.startOffset,o=t.endContainer,s=t.endOffset,i=e.domAtPos(e.state.selection.anchor);return d(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function cn(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function dn(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(T&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||T&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const hn=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function un(e,t,n,s,i){let a=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Ce(e,t);if(n&&!e.state.selection.eq(n)){if(M&&_&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,g(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),a&&r.setMeta("composition",a),e.dispatch(r)}return}let l=e.state.doc.resolve(t),c=l.sharedDepth(n);t=l.before(c+1),n=e.state.doc.resolve(n).after(c+1);let d,h,u=e.state.selection,p=function(e,t,n){let r,{node:s,fromOffset:i,toOffset:a,from:l,to:c}=e.docView.parseRange(t,n),d=e.domSelectionRange(),h=d.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:d.anchorOffset}],m(d)||r.push({node:d.focusNode,offset:d.focusOffset})),M&&8===e.input.lastKeyCode)for(let o=a;o>i;o--){let e=s.childNodes[o-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){a=o;break}if(!t||t.size)break}let u=e.state.doc,p=e.someProp("domParser")||o.S4.fromSchema(e.state.schema),f=u.resolve(l),g=null,y=p.parse(s,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:i,to:a,preserveWhitespace:"pre"!=f.parent.type.whitespace||"full",findPositions:r,ruleFromNode:dn,context:f});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),g={anchor:e+l,head:t+l}}return{doc:y,sel:g,from:l,to:c}}(e,t,n),f=e.state.doc,y=f.slice(p.from,p.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,h="end"):(d=e.state.selection.from,h="start"),e.input.lastKeyCode=null;let v=function(e,t,n,r,o){let s=e.findDiffStart(t,n);if(null==s)return null;let{a:i,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){r-=i+Math.max(0,s-Math.min(i,a))-s}if(i<s&&e.size<t.size){let e=r<=s&&r>=i?s-r:0;s-=e,s&&s<t.size&&mn(t.textBetween(s-1,s+1))&&(s+=e?1:-1),a=s+(a-i),i=s}else if(a<s){let t=r<=s&&r>=a?s-r:0;s-=t,s&&s<e.size&&mn(e.textBetween(s-1,s+1))&&(s+=t?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}(y.content,p.doc.content,p.from,d,h);if(v&&e.input.domChangeCount++,(A&&e.input.lastIOSEnter>Date.now()-225||_)&&i.some((e=>1==e.nodeType&&!hn.test(e.nodeName)))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",(t=>t(e,g(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!v){if(!(s&&u instanceof r.U3&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||p.sel&&p.sel.anchor!=p.sel.head){if(p.sel){let t=pn(e,e.state.doc,p.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);a&&n.setMeta("composition",a),e.dispatch(n)}}return}v={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof r.U3&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=p.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=p.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),O&&k<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>p.from&&" \xa0"==p.doc.textBetween(v.start-p.from-1,v.start-p.from+1)&&(v.start--,v.endA--,v.endB--);let b,w=p.doc.resolveNoCache(v.start-p.from),x=p.doc.resolveNoCache(v.endB-p.from),S=f.resolve(v.start),E=w.sameParent(x)&&w.parent.inlineContent&&S.end()>=v.endA;if((A&&e.input.lastIOSEnter>Date.now()-225&&(!E||i.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!E&&w.pos<p.doc.content.size&&!w.sameParent(x)&&(b=r.LN.findFrom(p.doc.resolve(w.pos+1),1,!0))&&b.head==x.pos)&&e.someProp("handleKeyDown",(t=>t(e,g(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>v.start&&function(e,t,n,r,o){if(n-t<=o.pos-r.pos||fn(r,!0,!1)<o.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let e=s.nodeAfter;return null!=e&&n==t+e.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=e.resolve(fn(s,!0,!0));return!(!i.parent.isTextblock||i.pos>n||fn(i,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(i.parent.content)}(f,v.start,v.endA,w,x)&&e.someProp("handleKeyDown",(t=>t(e,g(8,"Backspace")))))return void(_&&M&&e.domObserver.suppressSelectionUpdates());M&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),_&&!E&&w.start()!=x.start()&&0==x.parentOffset&&w.depth==x.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==v.endA&&(v.endB-=2,x=p.doc.resolveNoCache(v.endB-p.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,g(13,"Enter"))}))}),20));let C,N,T,I=v.start,R=v.endA;if(E)if(w.pos==x.pos)O&&k<=11&&0==w.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Ne(e)),20)),C=e.state.tr.delete(I,R),N=f.resolve(v.start).marksAcross(f.resolve(v.endA));else if(v.endA==v.endB&&(T=function(e,t){let n,r,s,i=e.firstChild.marks,a=t.firstChild.marks,l=i,c=a;for(let o=0;o<a.length;o++)l=a[o].removeFromSet(l);for(let o=0;o<i.length;o++)c=i[o].removeFromSet(c);if(1==l.length&&0==c.length)r=l[0],n="add",s=e=>e.mark(r.addToSet(e.marks));else{if(0!=l.length||1!=c.length)return null;r=c[0],n="remove",s=e=>e.mark(r.removeFromSet(e.marks))}let d=[];for(let o=0;o<t.childCount;o++)d.push(s(t.child(o)));if(o.FK.from(d).eq(e))return{mark:r,type:n}}(w.parent.content.cut(w.parentOffset,x.parentOffset),S.parent.content.cut(S.parentOffset,v.endA-S.start()))))C=e.state.tr,"add"==T.type?C.addMark(I,R,T.mark):C.removeMark(I,R,T.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){let t=w.parent.textBetween(w.parentOffset,x.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,I,R,t))))return;C=e.state.tr.insertText(t,I,R)}if(C||(C=e.state.tr.replace(I,R,p.doc.slice(v.start-p.from,v.endB-p.from))),p.sel){let t=pn(e,C.doc,p.sel);t&&!(M&&e.composing&&t.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==I||t.head==C.mapping.map(R)-1)||O&&t.empty&&t.head==I)&&C.setSelection(t)}N&&C.ensureMarks(N),a&&C.setMeta("composition",a),e.dispatch(C.scrollIntoView())}function pn(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:De(e,t.resolve(n.anchor),t.resolve(n.head))}function fn(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}function mn(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class gn{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ut,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(xn),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=bn(this),vn(this),this.nodeViews=wn(this),this.docView=de(this.state.doc,yn(this),en(this),this.dom,this),this.domObserver=new on(this,((e,t,n,r)=>un(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in ct){let n=ct[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!gt(e,t)||mt(e,t)||!e.editable&&t.type in dt||n(e,t)},ht[t]?{passive:!0}:void 0)}T&&e.dom.addEventListener("input",(()=>null)),ft(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ft(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(xn),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(Tt(this),s=!0),this.state=e;let i=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=wn(this);(function(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,o=!0)}(i||t.handleDOMEvents!=this._props.handleDOMEvents)&&ft(this),this.editable=bn(this),vn(this);let a=en(this),l=yn(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",h=o||!this.docView.matchesNode(e.doc,l,a);!h&&e.selection.eq(r.selection)||(s=!0);let u="preserve"==c&&s&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let s=(r.left+r.right)/2,i=o+1;i<Math.min(innerHeight,r.bottom);i+=5){let r=e.root.elementFromPoint(s,i);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=o-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:B(e.dom)}}(this);if(s){this.domObserver.stop();let t=h&&(O||M)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(h){let n=M?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=At(this)),!o&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=de(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return d(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Ne(this,t):(_e(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&function(e){let{refDOM:t,refTop:n,stack:r}=e,o=t?t.getBoundingClientRect().top:0;V(r,0==o?0:o-n)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof r.nh){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&F(this,t.getBoundingClientRect(),e)}else F(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,o=-1;if(this.state.doc.nodeAt(n.from)==n.node)o=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(o=e)}this.dragging=new Dt(e.slice,e.move,o<0?void 0:r.nh.create(this.state.doc,o))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let s=0;s<this.directPlugins.length;s++){let r=this.directPlugins[s].props[e];if(null!=r&&(n=t?t(r):r))return n}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let r=o[s].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(O){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(K)return e.focus(K);let t=B(e);e.focus(null==K?{get preventScroll(){return K={preventScroll:!0},!0}}:void 0),K||(K=!1,V(t,0))}(this.dom),Ne(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return U(this,e)}coordsAtPos(e){return X(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return oe(this,t||this.state,e)}pasteHTML(e,t){return _t(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return _t(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ye(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],en(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,l=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){mt(e,t)||!ct[t.type]||!e.editable&&t.type in dt||ct[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?T&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return ln(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?ln(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function yn(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[Vt.node(0,e.state.doc.content.size,t)]}function vn(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Vt.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function bn(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function wn(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function xn(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}}}]);
//# sourceMappingURL=https://s3-static-genially.genially.com/view/static/js/3298.a7538276.chunk.js.map